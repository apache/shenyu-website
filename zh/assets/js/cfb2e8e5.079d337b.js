"use strict";(self.webpackChunkshenyu_website=self.webpackChunkshenyu_website||[]).push([[68636],{95788:(e,n,t)=>{t.d(n,{Iu:()=>u,yg:()=>h});var a=t(11504);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),g=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=g(e.components);return a.createElement(s.Provider,{value:n},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=g(t),d=i,h=p["".concat(s,".").concat(d)]||p[d]||c[d]||r;return t?a.createElement(h,l(l({ref:n},u),{},{components:t})):a.createElement(h,l({ref:n},u))}));function h(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,l=new Array(r);l[0]=d;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o[p]="string"==typeof e?e:i,l[1]=o;for(var g=2;g<r;g++)l[g]=t[g];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},58720:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>s});var a=t(45072),i=(t(11504),t(95788));const r={title:"Divide\u63d2\u4ef6\u6e90\u7801\u5206\u6790",author:"midnight2104",author_title:"Apache ShenYu Committer",author_url:"https://github.com/midnight2104",tags:["plugin","divide","Apache ShenYu"]},l=void 0,o={permalink:"/zh/blog/Plugin-SourceCode-Analysis-Divide-Plugin",editUrl:"https://github.com/apache/shenyu-website/edit/main/i18n/zh/docusaurus-plugin-content-blog/Plugin-SourceCode-Analysis-Divide-Plugin.md",source:"@site/i18n/zh/docusaurus-plugin-content-blog/Plugin-SourceCode-Analysis-Divide-Plugin.md",title:"Divide\u63d2\u4ef6\u6e90\u7801\u5206\u6790",description:"Apache ShenYu \u662f\u4e00\u4e2a\u5f02\u6b65\u7684\uff0c\u9ad8\u6027\u80fd\u7684\uff0c\u8de8\u8bed\u8a00\u7684\uff0c\u54cd\u5e94\u5f0f\u7684 API \u7f51\u5173\u3002",date:"2024-02-06T08:47:38.183Z",formattedDate:"2024\u5e742\u67086\u65e5",tags:[{label:"plugin",permalink:"/zh/blog/tags/plugin"},{label:"divide",permalink:"/zh/blog/tags/divide"},{label:"Apache ShenYu",permalink:"/zh/blog/tags/apache-shen-yu"}],readingTime:26.27,truncated:!1,prevItem:{title:"Context-Path\u63d2\u4ef6\u6e90\u7801\u5206\u6790",permalink:"/zh/blog/Plugin-SourceCode-Analysis-Context-Path-Plugin"},nextItem:{title:"Etcd\u6570\u636e\u540c\u6b65\u6e90\u7801\u5206\u6790",permalink:"/zh/blog/DataSync-SourceCode-Analysis-Etcd-Data-Sync"}},s=[{value:"1. \u670d\u52a1\u6ce8\u518c",id:"1-\u670d\u52a1\u6ce8\u518c",children:[]},{value:"2. \u670d\u52a1\u8c03\u7528",id:"2-\u670d\u52a1\u8c03\u7528",children:[]},{value:"3. \u5c0f\u7ed3",id:"3-\u5c0f\u7ed3",children:[]}],g={toc:s},u="wrapper";function p(e){let{components:n,...r}=e;return(0,i.yg)(u,(0,a.c)({},g,r,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},(0,i.yg)("a",{parentName:"p",href:"https://shenyu.apache.org/zh/docs/index"},"Apache ShenYu")," \u662f\u4e00\u4e2a\u5f02\u6b65\u7684\uff0c\u9ad8\u6027\u80fd\u7684\uff0c\u8de8\u8bed\u8a00\u7684\uff0c\u54cd\u5e94\u5f0f\u7684 ",(0,i.yg)("inlineCode",{parentName:"p"},"API")," \u7f51\u5173\u3002")),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"ShenYu")," \u7f51\u5173\u4f7f\u7528 ",(0,i.yg)("inlineCode",{parentName:"p"},"divide")," \u63d2\u4ef6\u6765\u5904\u7406 ",(0,i.yg)("inlineCode",{parentName:"p"},"http")," \u8bf7\u6c42\u3002\u4f60\u53ef\u4ee5\u67e5\u770b\u5b98\u65b9\u6587\u6863 ",(0,i.yg)("a",{parentName:"p",href:"https://shenyu.apache.org/zh/docs/next/quick-start/quick-start-http"},"Http\u5feb\u901f\u5f00\u59cb")," \u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u8be5\u63d2\u4ef6\u3002"),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},"\u672c\u6587\u57fa\u4e8e",(0,i.yg)("inlineCode",{parentName:"p"},"shenyu-2.4.3"),"\u7248\u672c\u8fdb\u884c\u6e90\u7801\u5206\u6790\uff0c\u5b98\u7f51\u7684\u4ecb\u7ecd\u8bf7\u53c2\u8003 ",(0,i.yg)("a",{parentName:"p",href:"https://shenyu.apache.org/zh/docs/next/user-guide/http-proxy"},"Http\u670d\u52a1\u63a5\u5165")," \u3002")),(0,i.yg)("h3",{id:"1-\u670d\u52a1\u6ce8\u518c"},"1. \u670d\u52a1\u6ce8\u518c"),(0,i.yg)("h4",{id:"11--\u58f0\u660e\u6ce8\u518c\u63a5\u53e3"},"1.1  \u58f0\u660e\u6ce8\u518c\u63a5\u53e3"),(0,i.yg)("p",null,"\u4f7f\u7528\u6ce8\u89e3",(0,i.yg)("inlineCode",{parentName:"p"},"@ShenyuSpringMvcClient"),"\u5c06\u670d\u52a1\u6ce8\u518c\u5230\u7f51\u5173\u3002\u7b80\u5355",(0,i.yg)("inlineCode",{parentName:"p"},"demo"),"\u5982\u4e0b\uff1a"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'@RestController\n@RequestMapping("/order")\n@ShenyuSpringMvcClient(path = "/order")  // API\u6ce8\u518c\npublic class OrderController {\n    @GetMapping("/findById")\n    @ShenyuSpringMvcClient(path = "/findById", desc = "Find by id") // \u65b9\u6cd5\u6ce8\u518c\n    public OrderDTO findById(@RequestParam("id") final String id) {\n        return build(id, "hello world findById");\n    }\n}\n')),(0,i.yg)("p",null,"\u6ce8\u89e3\u5b9a\u4e49\uff1a"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'\n/**\n * \u4f5c\u7528\u4e8e\u7c7b\u548c\u65b9\u6cd5\u4e0a\n */\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.TYPE, ElementType.METHOD})\npublic @interface ShenyuSpringMvcClient {\n    \n    //\u6ce8\u518c\u8def\u5f84\n    String path() default "";\n    \n    //\u89c4\u5219\u540d\u79f0\n    String ruleName() default "";\n   \n    //\u63cf\u8ff0\u4fe1\u606f\n    String desc() default "";\n\n    //\u662f\u5426\u542f\u7528\n    boolean enabled() default true;\n    \n    //\u6ce8\u518c\u5143\u6570\u636e\n    boolean registerMetaData() default false;\n}\n\n')),(0,i.yg)("h4",{id:"12-\u626b\u63cf\u6ce8\u89e3\u4fe1\u606f"},"1.2 \u626b\u63cf\u6ce8\u89e3\u4fe1\u606f"),(0,i.yg)("p",null,"\u6ce8\u89e3\u626b\u63cf\u901a\u8fc7",(0,i.yg)("inlineCode",{parentName:"p"},"SpringMvcClientBeanPostProcessor"),"\u5b8c\u6210\uff0c\u5b83\u5b9e\u73b0\u4e86",(0,i.yg)("inlineCode",{parentName:"p"},"BeanPostProcessor"),"\u63a5\u53e3\uff0c\u662f",(0,i.yg)("inlineCode",{parentName:"p"},"Spring"),"\u63d0\u4f9b\u7684\u540e\u7f6e\u5904\u7406\u5668\u3002"),(0,i.yg)("p",null,"\u5728\u6784\u9020\u5668\u5b9e\u4f8b\u5316\u7684\u8fc7\u7a0b\u4e2d\uff1a"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u8bfb\u53d6\u5c5e\u6027\u914d\u7f6e"),(0,i.yg)("li",{parentName:"ul"},"\u6dfb\u52a0\u6ce8\u89e3\uff0c\u8bfb\u53d6",(0,i.yg)("inlineCode",{parentName:"li"},"path"),"\u4fe1\u606f"),(0,i.yg)("li",{parentName:"ul"},"\u542f\u52a8\u6ce8\u518c\u4e2d\u5fc3\uff0c\u5411",(0,i.yg)("inlineCode",{parentName:"li"},"shenyu-admin"),"\u6ce8\u518c")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'public class SpringMvcClientBeanPostProcessor implements BeanPostProcessor {\n    //...\n    /**\n     * \u6784\u9020\u5668\u5b9e\u4f8b\u5316\n     */\n    public SpringMvcClientBeanPostProcessor(final PropertiesConfig clientConfig,\n                                            final ShenyuClientRegisterRepository shenyuClientRegisterRepository) {\n        // 1. \u8bfb\u53d6\u5c5e\u6027\u914d\u7f6e\n        Properties props = clientConfig.getProps();\n        this.appName = props.getProperty(ShenyuClientConstants.APP_NAME);\n        this.contextPath = props.getProperty(ShenyuClientConstants.CONTEXT_PATH, "");\n        if (StringUtils.isBlank(appName) && StringUtils.isBlank(contextPath)) {\n            String errorMsg = "http register param must config the appName or contextPath";\n            LOG.error(errorMsg);\n            throw new ShenyuClientIllegalArgumentException(errorMsg);\n        }\n        this.isFull = Boolean.parseBoolean(props.getProperty(ShenyuClientConstants.IS_FULL, Boolean.FALSE.toString()));\n        // 2. \u6dfb\u52a0\u6ce8\u89e3\n        mappingAnnotation.add(ShenyuSpringMvcClient.class);\n        mappingAnnotation.add(PostMapping.class);\n        mappingAnnotation.add(GetMapping.class);\n        mappingAnnotation.add(DeleteMapping.class);\n        mappingAnnotation.add(PutMapping.class);\n        mappingAnnotation.add(RequestMapping.class);\n        // 3. \u542f\u52a8\u6ce8\u518c\u4e2d\u5fc3\n        publisher.start(shenyuClientRegisterRepository);\n    }\n    \n    @Override\n    public Object postProcessAfterInitialization(@NonNull final Object bean, @NonNull final String beanName) throws BeansException {\n       // \u91cd\u5199\u540e\u7f6e\u5904\u7406\u5668\u903b\u8f91\n        \n        return bean;\n    }\n    \n')),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"SpringMvcClientBeanPostProcessor#postProcessAfterInitialization()")),(0,i.yg)("p",null,"\u91cd\u5199\u540e\u7f6e\u5904\u7406\u5668\u903b\u8f91\uff1a\u8bfb\u53d6\u6ce8\u89e3\u4fe1\u606f\uff0c\u6784\u5efa\u5143\u6570\u636e\u5bf9\u8c61\u548c",(0,i.yg)("inlineCode",{parentName:"p"},"URI"),"\u5bf9\u8c61\uff0c\u5e76\u5411",(0,i.yg)("inlineCode",{parentName:"p"},"shenyu-admin"),"\u6ce8\u518c\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'    @Override\n    public Object postProcessAfterInitialization(@NonNull final Object bean, @NonNull final String beanName) throws BeansException {\n        // 1. \u5982\u679c\u662f\u6ce8\u518c\u6574\u4e2a\u670d\u52a1\u6216\u8005\u4e0d\u662fController\u7c7b\uff0c\u5c31\u4e0d\u5904\u7406\n        if (Boolean.TRUE.equals(isFull) || !hasAnnotation(bean.getClass(), Controller.class)) {\n            return bean;\n        }\n        // 2. \u8bfb\u53d6\u7c7b\u4e0a\u7684\u6ce8\u89e3 ShenyuSpringMvcClient\n        final ShenyuSpringMvcClient beanShenyuClient = AnnotationUtils.findAnnotation(bean.getClass(), ShenyuSpringMvcClient.class);\n        // 2.1\u6784\u5efasuperPath\n        final String superPath = buildApiSuperPath(bean.getClass());\n        // 2.2 \u662f\u5426\u6ce8\u518c\u6574\u4e2a\u7c7b\u65b9\u6cd5\n        if (Objects.nonNull(beanShenyuClient) && superPath.contains("*")) {\n            // \u6784\u5efa\u5143\u6570\u636e\u5bf9\u8c61\uff0c\u7136\u540e\u5411shenyu-admin\u6ce8\u518c\n            publisher.publishEvent(buildMetaDataDTO(beanShenyuClient, pathJoin(contextPath, superPath)));\n            return bean;\n        }\n        // 3. \u8bfb\u53d6\u6240\u6709\u65b9\u6cd5\n        final Method[] methods = ReflectionUtils.getUniqueDeclaredMethods(bean.getClass());\n        for (Method method : methods) {\n            // 3.1 \u8bfb\u53d6\u65b9\u6cd5\u4e0a\u7684\u6ce8\u89e3 ShenyuSpringMvcClient\n            ShenyuSpringMvcClient methodShenyuClient = AnnotationUtils.findAnnotation(method, ShenyuSpringMvcClient.class);\n            // \u5982\u679c\u65b9\u6cd5\u4e0a\u9762\u6ca1\u6709\u6ce8\u89e3\uff0c\u5c31\u7528\u7c7b\u4e0a\u9762\u7684\u6ce8\u89e3\n            methodShenyuClient = Objects.isNull(methodShenyuClient) ? beanShenyuClient : methodShenyuClient;\n            if (Objects.nonNull(methodShenyuClient)) {\n               // 3.2 \u6784\u5efapath\u4fe1\u606f\uff0c\u6784\u5efa\u5143\u6570\u636e\u5bf9\u8c61\uff0c\u5411shenyu-admin\u6ce8\u518c\n                publisher.publishEvent(buildMetaDataDTO(methodShenyuClient, buildApiPath(method, superPath)));\n            }\n        }\n        \n        return bean;\n    }\n')),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"1.\u5982\u679c\u662f\u6ce8\u518c\u6574\u4e2a\u670d\u52a1\u6216\u8005\u4e0d\u662f",(0,i.yg)("inlineCode",{parentName:"li"},"Controller"),"\u7c7b\uff0c\u5c31\u4e0d\u5904\u7406"),(0,i.yg)("li",{parentName:"ul"},"2.\u8bfb\u53d6\u7c7b\u4e0a\u7684\u6ce8\u89e3 ",(0,i.yg)("inlineCode",{parentName:"li"},"ShenyuSpringMvcClient"),"\uff0c\u5982\u679c\u662f\u6ce8\u518c\u6574\u4e2a\u7c7b\uff0c\u5c31\u5728\u8fd9\u91cc\u6784\u5efa\u5143\u6570\u636e\u5bf9\u8c61\uff0c\u7136\u540e\u5411",(0,i.yg)("inlineCode",{parentName:"li"},"shenyu-admin"),"\u6ce8\u518c"),(0,i.yg)("li",{parentName:"ul"},"3.\u5904\u7406\u65b9\u6cd5\u4e0a\u7684\u6ce8\u89e3 ",(0,i.yg)("inlineCode",{parentName:"li"},"ShenyuSpringMvcClient"),"\uff0c\u9488\u5bf9\u7279\u5b9a\u65b9\u6cd5\u6784\u5efa",(0,i.yg)("inlineCode",{parentName:"li"},"path"),"\u4fe1\u606f\uff0c\u6784\u5efa\u5143\u6570\u636e\u5bf9\u8c61\uff0c\u7136\u540e\u5411",(0,i.yg)("inlineCode",{parentName:"li"},"shenyu-admin"),"\u6ce8\u518c")),(0,i.yg)("p",null,"\u8fd9\u91cc\u6709\u4e24\u4e2a\u53d6",(0,i.yg)("inlineCode",{parentName:"p"},"path"),"\u7684\u65b9\u6cd5\uff0c\u9700\u8981\u7279\u522b\u8bf4\u660e\u4e00\u4e0b\uff1a"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"buildApiSuperPath()"),(0,i.yg)("p",{parentName:"li"},"\u6784\u9020",(0,i.yg)("inlineCode",{parentName:"p"},"SuperPath"),"\uff1a\u5148\u4ece\u7c7b\u4e0a\u7684\u6ce8\u89e3",(0,i.yg)("inlineCode",{parentName:"p"},"ShenyuSpringMvcClient"),"\u53d6",(0,i.yg)("inlineCode",{parentName:"p"},"path"),"\u5c5e\u6027\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5c31\u4ece\u5f53\u524d\u7c7b\u7684",(0,i.yg)("inlineCode",{parentName:"p"},"RequestMapping"),"\u6ce8\u89e3\u4e2d\u53d6",(0,i.yg)("inlineCode",{parentName:"p"},"path"),"\u4fe1\u606f\u3002"))),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'    private String buildApiSuperPath(@NonNull final Class<?> method) {\n        // \u5148\u4ece\u7c7b\u4e0a\u7684\u6ce8\u89e3ShenyuSpringMvcClient\u53d6path\u5c5e\u6027\n        ShenyuSpringMvcClient shenyuSpringMvcClient = AnnotationUtils.findAnnotation(method, ShenyuSpringMvcClient.class);\n        if (Objects.nonNull(shenyuSpringMvcClient) && StringUtils.isNotBlank(shenyuSpringMvcClient.path())) {\n            return shenyuSpringMvcClient.path();\n        }\n        // \u4ece\u5f53\u524d\u7c7b\u7684RequestMapping\u6ce8\u89e3\u4e2d\u53d6path\u4fe1\u606f\n        RequestMapping requestMapping = AnnotationUtils.findAnnotation(method, RequestMapping.class);\n        if (Objects.nonNull(requestMapping) && ArrayUtils.isNotEmpty(requestMapping.path()) && StringUtils.isNotBlank(requestMapping.path()[0])) {\n            return requestMapping.path()[0];\n        }\n        return "";\n    }\n')),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"buildApiPath()"),(0,i.yg)("p",{parentName:"li"},"\u6784\u5efa",(0,i.yg)("inlineCode",{parentName:"p"},"path"),"\uff1a\u5148\u8bfb\u53d6\u65b9\u6cd5\u4e0a\u7684\u6ce8\u89e3",(0,i.yg)("inlineCode",{parentName:"p"},"ShenyuSpringMvcClient"),"\uff0c\u5982\u679c\u5b58\u5728\u5c31\u6784\u5efa\uff1b\u5426\u5219\u4ece\u65b9\u6cd5\u7684\u5176\u4ed6\u6ce8\u89e3\u4e0a\u83b7\u53d6",(0,i.yg)("inlineCode",{parentName:"p"},"path"),"\u4fe1\u606f\uff1b\u5b8c\u6574\u7684",(0,i.yg)("inlineCode",{parentName:"p"},"path = contextPath(\u4e0a\u4e0b\u6587\u4fe1\u606f)+superPath(\u7c7b\u4fe1\u606f)+methodPath(\u65b9\u6cd5\u4fe1\u606f)"),"\u3002"))),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"    private String buildApiPath(@NonNull final Method method, @NonNull final String superPath) {\n        // 1. \u8bfb\u53d6\u65b9\u6cd5\u4e0a\u7684\u6ce8\u89e3ShenyuSpringMvcClient\n        ShenyuSpringMvcClient shenyuSpringMvcClient = AnnotationUtils.findAnnotation(method, ShenyuSpringMvcClient.class);\n        // 1.1\u5982\u679c\u5b58\u5728path\uff0c\u5c31\u6784\u5efa\n        if (Objects.nonNull(shenyuSpringMvcClient) && StringUtils.isNotBlank(shenyuSpringMvcClient.path())) {\n            //1.2\u5b8c\u6574 path = contextPath+superPath+methodPath\n            return pathJoin(contextPath, superPath, shenyuSpringMvcClient.path());\n        }\n        // 2.\u4ece\u65b9\u6cd5\u7684\u5176\u4ed6\u6ce8\u89e3\u4e0a\u83b7\u53d6path\u4fe1\u606f\n        final String path = getPathByMethod(method);\n        if (StringUtils.isNotBlank(path)) {\n             // 2.1 \u5b8c\u6574\u7684path = contextPath+superPath+methodPath\n            return pathJoin(contextPath, superPath, path);\n        }\n        return pathJoin(contextPath, superPath);\n    }\n")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"getPathByMethod()"),(0,i.yg)("p",{parentName:"li"},"\u4ece\u65b9\u6cd5\u7684\u5176\u4ed6\u6ce8\u89e3\u4e0a\u83b7\u53d6",(0,i.yg)("inlineCode",{parentName:"p"},"path"),"\u4fe1\u606f\uff0c\u5176\u4ed6\u6ce8\u89e3\u5305\u62ec\uff1a"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"ShenyuSpringMvcClient"),(0,i.yg)("li",{parentName:"ul"},"PostMapping"),(0,i.yg)("li",{parentName:"ul"},"GetMapping"),(0,i.yg)("li",{parentName:"ul"},"DeleteMapping"),(0,i.yg)("li",{parentName:"ul"},"PutMapping"),(0,i.yg)("li",{parentName:"ul"},"RequestMapping")))),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"\n    private String getPathByMethod(@NonNull final Method method) {\n        // \u904d\u5386\u63a5\u53e3\u6ce8\u89e3\u83b7\u53d6path\u4fe1\u606f\n        for (Class<? extends Annotation> mapping : mappingAnnotation) {\n            final String pathByAnnotation = getPathByAnnotation(AnnotationUtils.findAnnotation(method, mapping), pathAttributeNames);\n            if (StringUtils.isNotBlank(pathByAnnotation)) {\n                return pathByAnnotation;\n            }\n        }\n        return null;\n    }\n")),(0,i.yg)("p",null,"\u626b\u63cf\u6ce8\u89e3\u5b8c\u6210\u540e\uff0c\u6784\u5efa\u5143\u6570\u636e\u5bf9\u8c61\uff0c\u7136\u540e\u5c06\u8be5\u5bf9\u8c61\u53d1\u9001\u5230",(0,i.yg)("inlineCode",{parentName:"p"},"shenyu-admin"),"\uff0c\u5373\u53ef\u5b8c\u6210\u6ce8\u518c\u3002"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u5143\u6570\u636e\u5bf9\u8c61"),(0,i.yg)("p",{parentName:"li"},"\u5305\u62ec\u5f53\u524d\u6ce8\u518c\u65b9\u6cd5\u7684\u89c4\u5219\u4fe1\u606f\uff1acontextPath\uff0cappName\uff0c\u6ce8\u518c\u8def\u5f84\uff0c\u63cf\u8ff0\u4fe1\u606f\uff0c\u6ce8\u518c\u7c7b\u578b\uff0c\u662f\u5426\u542f\u7528\uff0c\u89c4\u5219\u540d\u79f0\u548c\u662f\u5426\u6ce8\u518c\u5143\u6570\u636e\u3002"))),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"}," private MetaDataRegisterDTO buildMetaDataDTO(@NonNull final ShenyuSpringMvcClient shenyuSpringMvcClient, final String path) {\n        return MetaDataRegisterDTO.builder()\n                .contextPath(contextPath) // contextPath\n                .appName(appName) // appName\n                .path(path) // \u6ce8\u518c\u8def\u5f84\uff0c\u5728\u7f51\u5173\u89c4\u5219\u5339\u914d\u65f6\u4f7f\u7528\n                .pathDesc(shenyuSpringMvcClient.desc()) // \u63cf\u8ff0\u4fe1\u606f\n                .rpcType(RpcTypeEnum.HTTP.getName()) // divide\u63d2\u4ef6\uff0c\u9ed8\u8ba4\u65f6http\u7c7b\u578b\n                .enabled(shenyuSpringMvcClient.enabled()) // \u662f\u5426\u542f\u7528\u89c4\u5219\n                .ruleName(StringUtils.defaultIfBlank(shenyuSpringMvcClient.ruleName(), path))//\u89c4\u5219\u540d\u79f0\n                .registerMetaData(shenyuSpringMvcClient.registerMetaData()) //\u662f\u5426\u6ce8\u518c\u5143\u6570\u636e\u4fe1\u606f\n                .build();\n    }\n")),(0,i.yg)("p",null,"\u5177\u4f53\u7684\u6ce8\u518c\u903b\u8f91\u7531\u6ce8\u518c\u4e2d\u5fc3\u5b9e\u73b0\uff0c\u5728\u4e4b\u524d\u7684\u6587\u7ae0\u4e2d\u5df2\u7ecf\u5206\u6790\u8fc7\u4e86\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u6df1\u5165\u5206\u6790\u3002"),(0,i.yg)("h4",{id:"13-\u6ce8\u518curi\u4fe1\u606f"},"1.3 \u6ce8\u518cURI\u4fe1\u606f"),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"ContextRegisterListener"),"\u8d1f\u8d23\u5c06\u5ba2\u6237\u7aef\u7684",(0,i.yg)("inlineCode",{parentName:"p"},"URI"),"\u4fe1\u606f\u6ce8\u518c\u5230",(0,i.yg)("inlineCode",{parentName:"p"},"shenyu-admin"),"\uff0c\u5b83\u5b9e\u73b0\u4e86",(0,i.yg)("inlineCode",{parentName:"p"},"ApplicationListener"),"\u63a5\u53e3\uff0c\u53d1\u751f\u4e0a\u4e0b\u6587\u5237\u65b0\u4e8b\u4ef6",(0,i.yg)("inlineCode",{parentName:"p"},"ContextRefreshedEvent"),"\u65f6\uff0c\u6267\u884c",(0,i.yg)("inlineCode",{parentName:"p"},"onApplicationEvent()"),"\u65b9\u6cd5\uff0c\u5b9e\u73b0\u6ce8\u518c\u903b\u8f91\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'\npublic class ContextRegisterListener implements ApplicationListener<ContextRefreshedEvent>, BeanFactoryAware {\n    //......\n    \n    /**\n     * \u6784\u9020\u5668\u5b9e\u4f8b\u5316\n     */\n    public ContextRegisterListener(final PropertiesConfig clientConfig) {\n        // \u8bfb\u53d6\u5c5e\u6027\u914d\u7f6e\n        final Properties props = clientConfig.getProps();\n        this.isFull = Boolean.parseBoolean(props.getProperty(ShenyuClientConstants.IS_FULL, Boolean.FALSE.toString()));\n        this.contextPath = props.getProperty(ShenyuClientConstants.CONTEXT_PATH);\n        if (Boolean.TRUE.equals(isFull)) {\n            if (StringUtils.isBlank(contextPath)) {\n                final String errorMsg = "http register param must config the contextPath";\n                LOG.error(errorMsg);\n                throw new ShenyuClientIllegalArgumentException(errorMsg);\n            }\n        }\n        this.port = Integer.parseInt(Optional.ofNullable(props.getProperty(ShenyuClientConstants.PORT)).orElseGet(() -> "-1"));\n        this.appName = props.getProperty(ShenyuClientConstants.APP_NAME);\n        this.protocol = props.getProperty(ShenyuClientConstants.PROTOCOL, ShenyuClientConstants.HTTP);\n        this.host = props.getProperty(ShenyuClientConstants.HOST);\n    }\n\n    @Override\n    public void setBeanFactory(final BeanFactory beanFactory) throws BeansException {\n        this.beanFactory = beanFactory;\n    }\n\n    // \u6267\u884c\u5e94\u7528\u4e8b\u4ef6\n    @Override\n    public void onApplicationEvent(@NonNull final ContextRefreshedEvent contextRefreshedEvent) {\n        // \u4fdd\u8bc1\u8be5\u65b9\u6cd5\u6267\u884c\u4e00\u6b21\n        if (!registered.compareAndSet(false, true)) {\n            return;\n        }\n        // 1. \u5982\u679c\u662f\u6ce8\u518c\u6574\u4e2a\u670d\u52a1\n        if (Boolean.TRUE.equals(isFull)) {\n            // \u6784\u5efa\u5143\u6570\u636e\uff0c\u5e76\u6ce8\u518c\n            publisher.publishEvent(buildMetaDataDTO());\n        }\n        try {\n            // \u83b7\u53d6\u7aef\u53e3\u4fe1\u606f\n            final int mergedPort = port <= 0 ? PortUtils.findPort(beanFactory) : port;\n            // 2. \u6784\u5efaURI\u6570\u636e\uff0c\u5e76\u6ce8\u518c\n            publisher.publishEvent(buildURIRegisterDTO(mergedPort));\n        } catch (ShenyuException e) {\n            throw new ShenyuException(e.getMessage() + "please config ${shenyu.client.http.props.port} in xml/yml !");\n        }\n    }\n\n    // \u6784\u5efaURI\u6570\u636e\n    private URIRegisterDTO buildURIRegisterDTO(final int port) {\n        return URIRegisterDTO.builder()\n            .contextPath(this.contextPath) // contextPath\n            .appName(appName) // appName\n            .protocol(protocol) // \u670d\u52a1\u4f7f\u7528\u7684\u534f\u8bae\n            .host(IpUtils.isCompleteHost(this.host) ? this.host : IpUtils.getHost(this.host)) //\u4e3b\u673a\n            .port(port) // \u7aef\u53e3\n            .rpcType(RpcTypeEnum.HTTP.getName()) // divide\u63d2\u4ef6\uff0c\u9ed8\u8ba4\u6ce8\u518chttp\u7c7b\u578b\n            .build();\n    }\n\n    // \u6784\u5efa\u5143\u6570\u636e\n    private MetaDataRegisterDTO buildMetaDataDTO() {\n        return MetaDataRegisterDTO.builder()\n            .contextPath(contextPath)\n            .appName(appName)\n            .path(contextPath)\n            .rpcType(RpcTypeEnum.HTTP.getName())\n            .enabled(true)\n            .ruleName(contextPath)\n            .build();\n    }\n}\n')),(0,i.yg)("h4",{id:"14-\u5904\u7406\u6ce8\u518c\u4fe1\u606f"},"1.4 \u5904\u7406\u6ce8\u518c\u4fe1\u606f"),(0,i.yg)("p",null,"\u5ba2\u6237\u7aef\u901a\u8fc7\u6ce8\u518c\u4e2d\u5fc3\u6ce8\u518c\u7684\u5143\u6570\u636e\u548c",(0,i.yg)("inlineCode",{parentName:"p"},"URI"),"\u6570\u636e\uff0c\u5728",(0,i.yg)("inlineCode",{parentName:"p"},"shenyu-admin"),"\u8fdb\u884c\u5904\u7406\uff0c\u8d1f\u8d23\u5b58\u50a8\u5230\u6570\u636e\u5e93\u548c\u540c\u6b65\u7ed9",(0,i.yg)("inlineCode",{parentName:"p"},"shenyu"),"\u7f51\u5173\u3002",(0,i.yg)("inlineCode",{parentName:"p"},"Divide"),"\u63d2\u4ef6\u7684\u5ba2\u6237\u7aef\u6ce8\u518c\u5904\u7406\u903b\u8f91\u5728",(0,i.yg)("inlineCode",{parentName:"p"},"ShenyuClientRegisterDivideServiceImpl"),"\u4e2d\u3002\u7ee7\u627f\u5173\u7cfb\u5982\u4e0b\uff1a"),(0,i.yg)("p",null,(0,i.yg)("img",{src:t(293).c})),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"ShenyuClientRegisterService\uff1a\u5ba2\u6237\u7aef\u6ce8\u518c\u670d\u52a1\uff0c\u9876\u5c42\u63a5\u53e3\uff1b"),(0,i.yg)("li",{parentName:"ul"},"FallbackShenyuClientRegisterService\uff1a\u6ce8\u518c\u5931\u8d25\uff0c\u63d0\u4f9b\u91cd\u8bd5\u64cd\u4f5c\uff1b"),(0,i.yg)("li",{parentName:"ul"},"AbstractShenyuClientRegisterServiceImpl\uff1a\u62bd\u8c61\u7c7b\uff0c\u5b9e\u73b0\u90e8\u5206\u516c\u5171\u6ce8\u518c\u903b\u8f91\uff1b"),(0,i.yg)("li",{parentName:"ul"},"AbstractContextPathRegisterService\uff1a\u62bd\u8c61\u7c7b\uff0c\u8d1f\u8d23\u6ce8\u518c",(0,i.yg)("inlineCode",{parentName:"li"},"ContextPath"),"\uff1b"),(0,i.yg)("li",{parentName:"ul"},"ShenyuClientRegisterDivideServiceImpl\uff1a\u5b9e\u73b0",(0,i.yg)("inlineCode",{parentName:"li"},"Divide"),"\u63d2\u4ef6\u7684\u6ce8\u518c\uff1b")),(0,i.yg)("h5",{id:"141-\u6ce8\u518c\u670d\u52a1"},"1.4.1 \u6ce8\u518c\u670d\u52a1"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"org.apache.shenyu.admin.service.register.AbstractShenyuClientRegisterServiceImpl#register()"),(0,i.yg)("p",{parentName:"li"},"\u5ba2\u6237\u7aef\u901a\u8fc7\u6ce8\u518c\u4e2d\u5fc3\u6ce8\u518c\u7684\u5143\u6570\u636e",(0,i.yg)("inlineCode",{parentName:"p"},"MetaDataRegisterDTO"),"\u5bf9\u8c61\u5728",(0,i.yg)("inlineCode",{parentName:"p"},"shenyu-admin"),"\u7684",(0,i.yg)("inlineCode",{parentName:"p"},"register()"),"\u65b9\u6cd5\u88ab\u63a5\u9001\u5230\u3002"))),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"   @Override\n    public String register(final MetaDataRegisterDTO dto) {\n        //1. \u6ce8\u518c\u9009\u62e9\u5668\n        String selectorHandler = selectorHandler(dto);\n        String selectorId = selectorService.registerDefault(dto, PluginNameAdapter.rpcTypeAdapter(rpcType()), selectorHandler);\n        //2. \u6ce8\u518c\u89c4\u5219\n        String ruleHandler = ruleHandler();\n        RuleDTO ruleDTO = buildRpcDefaultRuleDTO(selectorId, dto, ruleHandler);\n        ruleService.registerDefault(ruleDTO);\n        //3. \u6ce8\u518c\u5143\u6570\u636e\n        registerMetadata(dto);\n        //4. \u6ce8\u518cContextPath\n        String contextPath = dto.getContextPath();\n        if (StringUtils.isNotEmpty(contextPath)) {\n            registerContextPath(dto);\n        }\n        return ShenyuResultMessage.SUCCESS;\n    }\n")),(0,i.yg)("h6",{id:"1411-\u6ce8\u518c\u9009\u62e9\u5668"},"1.4.1.1 \u6ce8\u518c\u9009\u62e9\u5668"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.admin.service.impl.SelectorServiceImpl#registerDefault()")),(0,i.yg)("p",null,"\u6784\u5efa",(0,i.yg)("inlineCode",{parentName:"p"},"contextPath"),"\uff0c\u67e5\u627e\u9009\u62e9\u5668\u4fe1\u606f\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u5b58\u5728\u5c31\u8fd4\u56de",(0,i.yg)("inlineCode",{parentName:"p"},"id"),"\uff1b\u4e0d\u5b58\u5728\u5c31\u521b\u5efa\u9ed8\u8ba4\u7684\u9009\u62e9\u5668\u4fe1\u606f\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"    @Override\n    public String registerDefault(final MetaDataRegisterDTO dto, final String pluginName, final String selectorHandler) {\n        // \u6784\u5efacontextPath\n        String contextPath = ContextPathUtils.buildContextPath(dto.getContextPath(), dto.getAppName());\n        // \u901a\u8fc7\u540d\u79f0\u67e5\u627e\u9009\u62e9\u5668\u4fe1\u606f\u662f\u5426\u5b58\u5728\n        SelectorDO selectorDO = findByNameAndPluginName(contextPath, pluginName);\n        if (Objects.isNull(selectorDO)) {\n            // \u4e0d\u5b58\u5728\u5c31\u521b\u5efa\u9ed8\u8ba4\u7684\u9009\u62e9\u5668\u4fe1\u606f\n            return registerSelector(contextPath, pluginName, selectorHandler);\n        }\n        return selectorDO.getId();\n    }\n")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"\u9ed8\u8ba4\u9009\u62e9\u5668\u4fe1\u606f"),(0,i.yg)("p",{parentName:"li"},"\u5728\u8fd9\u91cc\u6784\u5efa\u9ed8\u8ba4\u9009\u62e9\u5668\u4fe1\u606f\u53ca\u5176\u6761\u4ef6\u5c5e\u6027\u3002"))),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"   //\u6ce8\u518c\u9009\u62e9\u5668\n   private String registerSelector(final String contextPath, final String pluginName, final String selectorHandler) {\n        //\u6784\u5efa\u9009\u62e9\u5668\n        SelectorDTO selectorDTO = buildSelectorDTO(contextPath, pluginMapper.selectByName(pluginName).getId());\n        selectorDTO.setHandle(selectorHandler);\n        //\u6ce8\u518c\u9ed8\u8ba4\u9009\u62e9\u5668\n        return registerDefault(selectorDTO);\n    }\n     //\u6784\u5efa\u9009\u62e9\u5668\n    private SelectorDTO buildSelectorDTO(final String contextPath, final String pluginId) {\n        //\u6784\u5efa\u9ed8\u8ba4\u9009\u62e9\u5668\n        SelectorDTO selectorDTO = buildDefaultSelectorDTO(contextPath);\n        selectorDTO.setPluginId(pluginId);\n         //\u6784\u5efa\u9ed8\u8ba4\u9009\u62e9\u5668\u7684\u6761\u4ef6\u5c5e\u6027\n        selectorDTO.setSelectorConditions(buildDefaultSelectorConditionDTO(contextPath));\n        return selectorDTO;\n    }\n")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u6784\u5efa\u9ed8\u8ba4\u9009\u62e9\u5668")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"private SelectorDTO buildDefaultSelectorDTO(final String name) {\n    return SelectorDTO.builder()\n            .name(name) // \u540d\u79f0\n            .type(SelectorTypeEnum.CUSTOM_FLOW.getCode()) // \u9ed8\u8ba4\u7c7b\u578b\u81ea\u5b9a\u4e49\n            .matchMode(MatchModeEnum.AND.getCode()) //\u9ed8\u8ba4\u5339\u914d\u65b9\u5f0f and\n            .enabled(Boolean.TRUE)  //\u9ed8\u8ba4\u542f\u5f00\u542f\n            .loged(Boolean.TRUE)  //\u9ed8\u8ba4\u8bb0\u5f55\u65e5\u5fd7\n            .continued(Boolean.TRUE) //\u9ed8\u8ba4\u7ee7\u7eed\u540e\u7eed\u9009\u62e9\u5668\n            .sort(1) //\u9ed8\u8ba4\u987a\u5e8f1\n            .build();\n}\n\n\n")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u6784\u5efa\u9ed8\u8ba4\u9009\u62e9\u5668\u6761\u4ef6\u5c5e\u6027")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'private List<SelectorConditionDTO> buildDefaultSelectorConditionDTO(final String contextPath) {\n    SelectorConditionDTO selectorConditionDTO = new SelectorConditionDTO();\n    selectorConditionDTO.setParamType(ParamTypeEnum.URI.getName()); // \u9ed8\u8ba4\u53c2\u6570\u7c7b\u578bURI\n    selectorConditionDTO.setParamName("/");\n    selectorConditionDTO.setOperator(OperatorEnum.MATCH.getAlias()); // \u9ed8\u8ba4\u5339\u914d\u7b56\u7565 match\n    selectorConditionDTO.setParamValue(contextPath + AdminConstants.URI_SUFFIX); // \u9ed8\u8ba4\u503c /contextPath/**\n    return Collections.singletonList(selectorConditionDTO);\n}\n')),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u6ce8\u518c\u9ed8\u8ba4\u9009\u62e9\u5668")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"@Override\npublic String registerDefault(final SelectorDTO selectorDTO) {\n    //\u9009\u62e9\u5668\u4fe1\u606f\n    SelectorDO selectorDO = SelectorDO.buildSelectorDO(selectorDTO);\n    //\u9009\u62e9\u5668\u6761\u4ef6\u5c5e\u6027\n    List<SelectorConditionDTO> selectorConditionDTOs = selectorDTO.getSelectorConditions();\n    if (StringUtils.isEmpty(selectorDTO.getId())) {\n        // \u5411\u6570\u636e\u5e93\u63d2\u5165\u9009\u62e9\u5668\u4fe1\u606f\n        selectorMapper.insertSelective(selectorDO);\n          // \u5411\u6570\u636e\u5e93\u63d2\u5165\u9009\u62e9\u5668\u6761\u4ef6\u5c5e\u6027\n        selectorConditionDTOs.forEach(selectorConditionDTO -> {\n            selectorConditionDTO.setSelectorId(selectorDO.getId());        \n                selectorConditionMapper.insertSelective(SelectorConditionDO.buildSelectorConditionDO(selectorConditionDTO));\n        });\n    }\n    // \u53d1\u5e03\u540c\u6b65\u4e8b\u4ef6\uff0c\u5411\u7f51\u5173\u540c\u6b65\u9009\u62e9\u4fe1\u606f\u53ca\u5176\u6761\u4ef6\u5c5e\u6027\n    publishEvent(selectorDO, selectorConditionDTOs);\n    return selectorDO.getId();\n}\n")),(0,i.yg)("h6",{id:"1412-\u6ce8\u518c\u89c4\u5219"},"1.4.1.2 \u6ce8\u518c\u89c4\u5219"),(0,i.yg)("p",null,"\u5728\u6ce8\u518c\u670d\u52a1\u7684\u7b2c\u4e8c\u6b65\u4e2d\uff0c\u5f00\u59cb\u6784\u5efa\u9ed8\u8ba4\u89c4\u5219\uff0c\u7136\u540e\u6ce8\u518c\u89c4\u5219\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"@Override\n    public String register(final MetaDataRegisterDTO dto) {\n        //1. \u6ce8\u518c\u9009\u62e9\u5668\n        //......\n        \n        //2. \u6ce8\u518c\u89c4\u5219\n        // \u9ed8\u8ba4\u89c4\u5219\u5904\u7406\u5c5e\u6027\n        String ruleHandler = ruleHandler();\n        // \u6784\u5efa\u9ed8\u8ba4\u89c4\u5219\u4fe1\u606f\n        RuleDTO ruleDTO = buildRpcDefaultRuleDTO(selectorId, dto, ruleHandler);\n        // \u6ce8\u518c\u89c4\u5219\n        ruleService.registerDefault(ruleDTO);\n        \n        //3. \u6ce8\u518c\u5143\u6570\u636e\n        //......\n        \n        //4. \u6ce8\u518cContextPath\n        //......\n        \n        return ShenyuResultMessage.SUCCESS;\n    }\n")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u9ed8\u8ba4\u89c4\u5219\u5904\u7406\u5c5e\u6027")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"    @Override\n    protected String ruleHandler() {\n        // \u9ed8\u8ba4\u89c4\u5219\u5904\u7406\u5c5e\u6027\n        return new DivideRuleHandle().toJson();\n    }\n")),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"Divide"),"\u63d2\u4ef6\u9ed8\u8ba4\u89c4\u5219\u5904\u7406\u5c5e\u6027"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"\npublic class DivideRuleHandle implements RuleHandle {\n\n    /**\n     * \u8d1f\u8f7d\u5747\u8861\uff1a\u9ed8\u8ba4\u968f\u673a\n     */\n    private String loadBalance = LoadBalanceEnum.RANDOM.getName();\n\n    /**\n     * \u91cd\u8bd5\u7b56\u7565\uff1a\u9ed8\u8ba4\u91cd\u8bd5\u5f53\u524d\u670d\u52a1\n     */\n    private String retryStrategy = RetryEnum.CURRENT.getName();\n\n    /**\n     * \u91cd\u8bd5\u6b21\u6570\uff1a\u9ed8\u8ba43\u6b21\n     */\n    private int retry = 3;\n\n    /**\n     * \u8c03\u7528\u8d85\u65f6\uff1a\u9ed8\u8ba4 3000\n     */\n    private long timeout = Constants.TIME_OUT;\n\n    /**\n     * header\u6700\u5927\u503c\uff1a10240 byte\n     */\n    private long headerMaxSize = Constants.HEADER_MAX_SIZE;\n\n    /**\n     * request\u6700\u5927\u503c\uff1a102400 byte\n     */\n    private long requestMaxSize = Constants.REQUEST_MAX_SIZE;\n}\n")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u6784\u5efa\u9ed8\u8ba4\u89c4\u5219\u4fe1\u606f")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'  // \u6784\u5efa\u9ed8\u8ba4\u89c4\u5219\u4fe1\u606f\n    private RuleDTO buildRpcDefaultRuleDTO(final String selectorId, final MetaDataRegisterDTO metaDataDTO, final String ruleHandler) {\n        return buildRuleDTO(selectorId, ruleHandler, metaDataDTO.getRuleName(), metaDataDTO.getPath());\n    }\n   //  \u6784\u5efa\u9ed8\u8ba4\u89c4\u5219\u4fe1\u606f\n    private RuleDTO buildRuleDTO(final String selectorId, final String ruleHandler, final String ruleName, final String path) {\n        RuleDTO ruleDTO = RuleDTO.builder()\n                .selectorId(selectorId) //\u5173\u8054\u7684\u9009\u62e9\u5668id\n                .name(ruleName) //\u89c4\u5219\u540d\u79f0\n                .matchMode(MatchModeEnum.AND.getCode()) // \u9ed8\u8ba4\u5339\u914d\u6a21\u5f0f and\n                .enabled(Boolean.TRUE) // \u9ed8\u8ba4\u5f00\u542f\n                .loged(Boolean.TRUE) //\u9ed8\u8ba4\u8bb0\u5f55\u65e5\u5fd7\n                .sort(1) //\u9ed8\u8ba4\u987a\u5e8f 1\n                .handle(ruleHandler)\n                .build();\n        RuleConditionDTO ruleConditionDTO = RuleConditionDTO.builder()\n                .paramType(ParamTypeEnum.URI.getName()) // \u9ed8\u8ba4\u53c2\u6570\u7c7b\u578bURI\n                .paramName("/")\n                .paramValue(path) //\u53c2\u6570\u503cpath\n                .build();\n        if (path.indexOf("*") > 1) {\n            ruleConditionDTO.setOperator(OperatorEnum.MATCH.getAlias()); //\u5982\u679cpath\u4e2d\u6709*\uff0c\u64cd\u4f5c\u7c7b\u578b\u5219\u9ed8\u8ba4\u4e3a match\n        } else {\n            ruleConditionDTO.setOperator(OperatorEnum.EQ.getAlias()); // \u5426\u5219\uff0c\u9ed8\u8ba4\u64cd\u4f5c\u7c7b\u578b = \n        }\n        ruleDTO.setRuleConditions(Collections.singletonList(ruleConditionDTO));\n        return ruleDTO;\n    }\n')),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.admin.service.impl.RuleServiceImpl#registerDefault()")),(0,i.yg)("p",null,"\u6ce8\u518c\u89c4\u5219\uff1a\u5411\u6570\u636e\u5e93\u63d2\u5165\u8bb0\u5f55\uff0c\u5e76\u5411\u7f51\u5173\u53d1\u5e03\u4e8b\u4ef6\uff0c\u8fdb\u884c\u6570\u636e\u540c\u6b65\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'\n    @Override\n    public String registerDefault(final RuleDTO ruleDTO) {\n        RuleDO exist = ruleMapper.findBySelectorIdAndName(ruleDTO.getSelectorId(), ruleDTO.getName());\n        if (Objects.nonNull(exist)) {\n            return "";\n        }\n\n        RuleDO ruleDO = RuleDO.buildRuleDO(ruleDTO);\n        List<RuleConditionDTO> ruleConditions = ruleDTO.getRuleConditions();\n        if (StringUtils.isEmpty(ruleDTO.getId())) {\n            // \u5411\u6570\u636e\u5e93\u63d2\u5165\u89c4\u5219\u4fe1\u606f\n            ruleMapper.insertSelective(ruleDO);\n            //\u5411\u6570\u636e\u5e93\u63d2\u5165\u89c4\u5219\u4f53\u6761\u4ef6\u5c5e\u6027\n            ruleConditions.forEach(ruleConditionDTO -> {\n                ruleConditionDTO.setRuleId(ruleDO.getId());            \n                ruleConditionMapper.insertSelective(RuleConditionDO.buildRuleConditionDO(ruleConditionDTO));\n            });\n        }\n        // \u5411\u7f51\u5173\u53d1\u5e03\u4e8b\u4ef6\uff0c\u8fdb\u884c\u6570\u636e\u540c\u6b65\n        publishEvent(ruleDO, ruleConditions);\n        return ruleDO.getId();\n    }\n\n')),(0,i.yg)("h6",{id:"1413-\u6ce8\u518c\u5143\u6570\u636e"},"1.4.1.3 \u6ce8\u518c\u5143\u6570\u636e"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"   @Override\n    public String register(final MetaDataRegisterDTO dto) {\n        //1. \u6ce8\u518c\u9009\u62e9\u5668\n        //......\n        \n        //2. \u6ce8\u518c\u89c4\u5219\n        //......\n        \n        //3. \u6ce8\u518c\u5143\u6570\u636e\n        registerMetadata(dto);\n        \n        //4. \u6ce8\u518cContextPath\n        //......\n        \n        return ShenyuResultMessage.SUCCESS;\n    }\n")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"org.apache.shenyu.admin.service.register.ShenyuClientRegisterDivideServiceImpl#registerMetadata()"),(0,i.yg)("p",{parentName:"li"},"\u63d2\u5165\u6216\u66f4\u65b0\u5143\u6570\u636e\uff0c\u7136\u540e\u53d1\u5e03\u540c\u6b65\u4e8b\u4ef6\u5230\u7f51\u5173\u3002"))),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"\n    @Override\n    protected void registerMetadata(final MetaDataRegisterDTO dto) {\n        if (dto.isRegisterMetaData()) { // \u5982\u679c\u6ce8\u518c\u5143\u6570\u636e\n            // \u83b7\u53d6metaDataService\n            MetaDataService metaDataService = getMetaDataService();\n            // \u5143\u6570\u636e\u662f\u5426\u5b58\u5728\n            MetaDataDO exist = metaDataService.findByPath(dto.getPath());\n            // \u63d2\u5165\u6216\u66f4\u65b0\u5143\u6570\u636e\n            metaDataService.saveOrUpdateMetaData(exist, dto);\n        }\n    }\n\n    @Override\n    public void saveOrUpdateMetaData(final MetaDataDO exist, final MetaDataRegisterDTO metaDataDTO) {\n        DataEventTypeEnum eventType;\n        // \u6570\u636e\u7c7b\u578b\u8f6c\u6362 DTO->DO\n        MetaDataDO metaDataDO = MetaDataTransfer.INSTANCE.mapRegisterDTOToEntity(metaDataDTO);\n        // \u63d2\u5165\u6570\u636e\n        if (Objects.isNull(exist)) {\n            Timestamp currentTime = new Timestamp(System.currentTimeMillis());\n            metaDataDO.setId(UUIDUtils.getInstance().generateShortUuid());\n            metaDataDO.setDateCreated(currentTime);\n            metaDataDO.setDateUpdated(currentTime);\n            metaDataMapper.insert(metaDataDO);\n            eventType = DataEventTypeEnum.CREATE;\n        } else {\n            // \u66f4\u65b0\u6570\u636e\n            metaDataDO.setId(exist.getId());\n            metaDataMapper.update(metaDataDO);\n            eventType = DataEventTypeEnum.UPDATE;\n        }\n        // \u53d1\u5e03\u540c\u6b65\u4e8b\u4ef6\u5230\u7f51\u5173\n        eventPublisher.publishEvent(new DataChangedEvent(ConfigGroupEnum.META_DATA, eventType,\n                Collections.singletonList(MetaDataTransfer.INSTANCE.mapToData(metaDataDO))));\n    }\n")),(0,i.yg)("h6",{id:"1414-\u6ce8\u518ccontextpath"},"1.4.1.4 \u6ce8\u518cContextPath"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"   @Override\n    public String register(final MetaDataRegisterDTO dto) {\n        //1. \u6ce8\u518c\u9009\u62e9\u5668\n        //......\n        \n        //2. \u6ce8\u518c\u89c4\u5219\n        //......\n        \n        //3. \u6ce8\u518c\u5143\u6570\u636e\n        //......\n        \n        //4. \u6ce8\u518cContextPath\n        String contextPath = dto.getContextPath();\n        if (StringUtils.isNotEmpty(contextPath)) {\n            registerContextPath(dto);\n        }\n        return ShenyuResultMessage.SUCCESS;\n    }\n")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.admin.service.register.AbstractContextPathRegisterService#registerContextPath()")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'    @Override\n    public void registerContextPath(final MetaDataRegisterDTO dto) {\n        // \u8bbe\u7f6e\u9009\u62e9\u5668\u7684contextPath\n        String contextPathSelectorId = getSelectorService().registerDefault(dto, PluginEnum.CONTEXT_PATH.getName(), "");\n        ContextMappingRuleHandle handle = new ContextMappingRuleHandle();\n        handle.setContextPath(PathUtils.decoratorContextPath(dto.getContextPath()));\n        // \u8bbe\u7f6e\u89c4\u5219\u7684contextPath\n        getRuleService().registerDefault(buildContextPathDefaultRuleDTO(contextPathSelectorId, dto, handle.toJson()));\n    }\n')),(0,i.yg)("h5",{id:"142-\u6ce8\u518curi"},"1.4.2 \u6ce8\u518cURI"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.admin.service.register.FallbackShenyuClientRegisterService#registerURI()")),(0,i.yg)("p",null,"\u670d\u52a1\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u6ce8\u518c\u7684",(0,i.yg)("inlineCode",{parentName:"p"},"URI"),"\u4fe1\u606f\u540e\uff0c\u8fdb\u884c\u5904\u7406\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'    @Override\n    public String registerURI(final String selectorName, final List<URIRegisterDTO> uriList) {\n        String result;\n        String key = key(selectorName);\n        try {\n            this.removeFallBack(key);\n            // \u6ce8\u518cURI\n            result = this.doRegisterURI(selectorName, uriList);\n            logger.info("Register success: {},{}", selectorName, uriList);\n        } catch (Exception ex) {\n            logger.warn("Register exception: cause:{}", ex.getMessage());\n            result = "";\n            // \u6ce8\u518c\u5931\u8d25\u540e\uff0c\u8fdb\u884c\u91cd\u8bd5\n            this.addFallback(key, new FallbackHolder(selectorName, uriList));\n        }\n        return result;\n    }\n')),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.admin.service.register.AbstractShenyuClientRegisterServiceImpl#doRegisterURI()")),(0,i.yg)("p",null,"\u4ece\u5ba2\u6237\u7aef\u6ce8\u518c\u7684",(0,i.yg)("inlineCode",{parentName:"p"},"URI"),"\u4e2d\u83b7\u53d6\u6709\u6548\u7684",(0,i.yg)("inlineCode",{parentName:"p"},"URI"),"\uff0c\u66f4\u65b0\u5bf9\u5e94\u7684\u9009\u62e9\u5668",(0,i.yg)("inlineCode",{parentName:"p"},"handle"),"\u5c5e\u6027\uff0c\u5411\u7f51\u5173\u53d1\u9001\u9009\u62e9\u5668\u66f4\u65b0\u4e8b\u4ef6\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'@Override\n    public String doRegisterURI(final String selectorName, final List<URIRegisterDTO> uriList) {\n        //\u53c2\u6570\u68c0\u67e5\n        if (CollectionUtils.isEmpty(uriList)) {\n            return "";\n        }\n        //\u83b7\u53d6\u9009\u62e9\u5668\u4fe1\u606f\n        SelectorDO selectorDO = selectorService.findByNameAndPluginName(selectorName, PluginNameAdapter.rpcTypeAdapter(rpcType()));\n        if (Objects.isNull(selectorDO)) {\n            throw new ShenyuException("doRegister Failed to execute,wait to retry.");\n        }\n        // \u83b7\u53d6\u6709\u6548\u7684URI\n        List<URIRegisterDTO> validUriList = uriList.stream().filter(dto -> Objects.nonNull(dto.getPort()) && StringUtils.isNotBlank(dto.getHost())).collect(Collectors.toList());\n        // \u6784\u5efa\u9009\u62e9\u5668\u7684handle\u5c5e\u6027\n        String handler = buildHandle(validUriList, selectorDO);\n        if (handler != null) {\n            selectorDO.setHandle(handler);\n            SelectorData selectorData = selectorService.buildByName(selectorName, PluginNameAdapter.rpcTypeAdapter(rpcType()));\n            selectorData.setHandle(handler);\n            // \u5411\u6570\u636e\u5e93\u66f4\u65b0\u9009\u62e9\u5668\u7684handle\u5c5e\u6027\n            selectorService.updateSelective(selectorDO);\n            // \u5411\u7f51\u5173\u53d1\u9001\u9009\u62e9\u5668\u66f4\u65b0\u4e8b\u4ef6\n            eventPublisher.publishEvent(new DataChangedEvent(ConfigGroupEnum.SELECTOR, DataEventTypeEnum.UPDATE, Collections.singletonList(selectorData)));\n        }\n        return ShenyuResultMessage.SUCCESS;\n    }\n')),(0,i.yg)("p",null,"\u5173\u4e8e\u670d\u52a1\u6ce8\u518c\u7684\u6e90\u7801\u5206\u6790\u5c31\u4ee5\u53ca\u5b8c\u6210\u4e86\uff0c\u5206\u6790\u6d41\u7a0b\u56fe\u5982\u4e0b\uff1a"),(0,i.yg)("p",null,(0,i.yg)("img",{src:t(99151).c})),(0,i.yg)("p",null,"\u63a5\u4e0b\u6765\u5c31\u5206\u6790",(0,i.yg)("inlineCode",{parentName:"p"},"divide"),"\u63d2\u4ef6\u662f\u5982\u4f55\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u5411",(0,i.yg)("inlineCode",{parentName:"p"},"http"),"\u670d\u52a1\u53d1\u8d77\u8c03\u7528\u3002"),(0,i.yg)("h3",{id:"2-\u670d\u52a1\u8c03\u7528"},"2. \u670d\u52a1\u8c03\u7528"),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"divide"),"\u63d2\u4ef6\u662f\u7f51\u5173\u7528\u4e8e\u5904\u7406 ",(0,i.yg)("inlineCode",{parentName:"p"},"http\u534f\u8bae"),"\u8bf7\u6c42\u7684\u6838\u5fc3\u5904\u7406\u63d2\u4ef6\u3002"),(0,i.yg)("p",null,"\u4ee5\u5b98\u7f51\u63d0\u4f9b\u7684\u6848\u4f8b ",(0,i.yg)("a",{parentName:"p",href:"https://shenyu.apache.org/zh/docs/next/quick-start/quick-start-http"},"Http\u5feb\u901f\u5f00\u59cb")," \u4e3a\u4f8b\uff0c\u4e00\u4e2a\u76f4\u8fde\u8bf7\u6c42\u5982\u4e0b\uff1a"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"GET http://localhost:8189/order/findById?id=100\nAccept: application/json\n")),(0,i.yg)("p",null,"\u901a\u8fc7",(0,i.yg)("inlineCode",{parentName:"p"},"ShenYu"),"\u7f51\u5173\u4ee3\u7406\u540e\uff0c\u8bf7\u6c42\u5982\u4e0b\uff1a"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"GET http://localhost:9195/http/order/findById?id=100\nAccept: application/json\n")),(0,i.yg)("p",null,"\u901a\u8fc7",(0,i.yg)("inlineCode",{parentName:"p"},"ShenYu"),"\u7f51\u5173\u4ee3\u7406\u540e\u7684\u670d\u52a1\u4ecd\u7136\u80fd\u591f\u8bf7\u6c42\u5230\u4e4b\u524d\u7684\u670d\u52a1\uff0c\u5728\u8fd9\u91cc\u8d77\u4f5c\u7528\u7684\u5c31\u662f",(0,i.yg)("inlineCode",{parentName:"p"},"divide"),"\u63d2\u4ef6\u3002\u7c7b\u7ee7\u627f\u5173\u7cfb\u5982\u4e0b\uff1a"),(0,i.yg)("p",null,(0,i.yg)("img",{src:t(57411).c})),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"ShenyuPlugin\uff1a\u9876\u5c42\u63a5\u53e3\uff0c\u5b9a\u4e49\u63a5\u53e3\u65b9\u6cd5\uff1b"),(0,i.yg)("li",{parentName:"ul"},"AbstractShenyuPlugin\uff1a\u62bd\u8c61\u7c7b\uff0c\u5b9e\u73b0\u63d2\u4ef6\u5171\u6709\u903b\u8f91\uff1b"),(0,i.yg)("li",{parentName:"ul"},"DividePlugin\uff1aDivide\u63d2\u4ef6\u3002")),(0,i.yg)("h4",{id:"21-\u63a5\u6536\u8bf7\u6c42"},"2.1 \u63a5\u6536\u8bf7\u6c42"),(0,i.yg)("p",null,"\u901a\u8fc7",(0,i.yg)("inlineCode",{parentName:"p"},"ShenYu"),"\u7f51\u5173\u4ee3\u7406\u540e\uff0c\u8bf7\u6c42\u5165\u53e3\u662f",(0,i.yg)("inlineCode",{parentName:"p"},"ShenyuWebHandler"),"\uff0c\u5b83\u5b9e\u73b0\u4e86",(0,i.yg)("inlineCode",{parentName:"p"},"org.springframework.web.server.WebHandler"),"\u63a5\u53e3\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"public final class ShenyuWebHandler implements WebHandler, ApplicationListener<SortPluginEvent> {\n    //......\n    \n    /**\n     * \u5904\u7406web\u8bf7\u6c42\n     */\n    @Override\n    public Mono<Void> handle(@NonNull final ServerWebExchange exchange) {\n       // \u6267\u884c\u9ed8\u8ba4\u63d2\u4ef6\u94fe\n        Mono<Void> execute = new DefaultShenyuPluginChain(plugins).execute(exchange);\n        if (scheduled) {\n            return execute.subscribeOn(scheduler);\n        }\n        return execute;\n    }\n    \n    private static class DefaultShenyuPluginChain implements ShenyuPluginChain {\n\n        private int index;\n\n        private final List<ShenyuPlugin> plugins;\n\n        /**\n         * \u5b9e\u4f8b\u5316\u9ed8\u8ba4\u63d2\u4ef6\u94fe\n         */\n        DefaultShenyuPluginChain(final List<ShenyuPlugin> plugins) {\n            this.plugins = plugins;\n        }\n\n        /**\n         * \u6267\u884c\u6bcf\u4e2a\u63d2\u4ef6.\n         */\n        @Override\n        public Mono<Void> execute(final ServerWebExchange exchange) {\n            return Mono.defer(() -> {\n                if (this.index < plugins.size()) {\n                    // \u83b7\u53d6\u5f53\u524d\u6267\u884c\u63d2\u4ef6\n                    ShenyuPlugin plugin = plugins.get(this.index++);\n                    // \u662f\u5426\u8df3\u8fc7\u5f53\u524d\u63d2\u4ef6\n                    boolean skip = plugin.skip(exchange);\n                    if (skip) {\n                        // \u5982\u679c\u8df3\u8fc7\u5c31\u6267\u884c\u4e0b\u4e00\u4e2a\n                        return this.execute(exchange);\n                    }\n                    // \u6267\u884c\u5f53\u524d\u63d2\u4ef6\n                    return plugin.execute(exchange, this);\n                }\n                return Mono.empty();\n            });\n        }\n    }\n}\n")),(0,i.yg)("h4",{id:"22-\u5339\u914d\u89c4\u5219"},"2.2 \u5339\u914d\u89c4\u5219"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.plugin.base.AbstractShenyuPlugin#execute()")),(0,i.yg)("p",null,"\u5728",(0,i.yg)("inlineCode",{parentName:"p"},"execute()"),"\u65b9\u6cd5\u4e2d\u6267\u884c\u9009\u62e9\u5668\u548c\u89c4\u5219\u7684\u5339\u914d\u903b\u8f91\u3002"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u5339\u914d\u9009\u62e9\u5668\uff1b"),(0,i.yg)("li",{parentName:"ul"},"\u5339\u914d\u89c4\u5219\uff1b"),(0,i.yg)("li",{parentName:"ul"},"\u6267\u884c\u63d2\u4ef6\u3002")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"@Override\n    public Mono<Void> execute(final ServerWebExchange exchange, final ShenyuPluginChain chain) {\n        // \u63d2\u4ef6\u540d\u79f0\n        String pluginName = named();\n        // \u63d2\u4ef6\u4fe1\u606f\n        PluginData pluginData = BaseDataCache.getInstance().obtainPluginData(pluginName);\n        if (pluginData != null && pluginData.getEnabled()) {\n            // \u9009\u62e9\u5668\u4fe1\u606f\n            final Collection<SelectorData> selectors = BaseDataCache.getInstance().obtainSelectorData(pluginName);\n            if (CollectionUtils.isEmpty(selectors)) {\n                return handleSelectorIfNull(pluginName, exchange, chain);\n            }\n            // \u5339\u914d\u9009\u62e9\u5668\n            SelectorData selectorData = matchSelector(exchange, selectors);\n            if (Objects.isNull(selectorData)) {\n                return handleSelectorIfNull(pluginName, exchange, chain);\n            }\n            selectorLog(selectorData, pluginName);\n            // \u89c4\u5219\u4fe1\u606f\n            List<RuleData> rules = BaseDataCache.getInstance().obtainRuleData(selectorData.getId());\n            if (CollectionUtils.isEmpty(rules)) {\n                return handleRuleIfNull(pluginName, exchange, chain);\n            }\n            // \u5339\u914d\u89c4\u5219\n            RuleData rule;\n            if (selectorData.getType() == SelectorTypeEnum.FULL_FLOW.getCode()) {\n                //get last\n                rule = rules.get(rules.size() - 1);\n            } else {\n                rule = matchRule(exchange, rules);\n            }\n            if (Objects.isNull(rule)) {\n                return handleRuleIfNull(pluginName, exchange, chain);\n            }\n            ruleLog(rule, pluginName);\n            // \u6267\u884c\u63d2\u4ef6\n            return doExecute(exchange, chain, selectorData, rule);\n        }\n        return chain.execute(exchange);\n    }\n")),(0,i.yg)("h4",{id:"23-\u6267\u884cdivide\u63d2\u4ef6"},"2.3 \u6267\u884cdivide\u63d2\u4ef6"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.plugin.divide.DividePlugin#doExecute()")),(0,i.yg)("p",null,"\u5728",(0,i.yg)("inlineCode",{parentName:"p"},"doExecute()"),"\u65b9\u6cd5\u4e2d\u6267\u884c",(0,i.yg)("inlineCode",{parentName:"p"},"divide"),"\u63d2\u4ef6\u7684\u5177\u4f53\u903b\u8f91\uff1a"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u6821\u9a8c",(0,i.yg)("inlineCode",{parentName:"li"},"header"),"\u5927\u5c0f\uff1b"),(0,i.yg)("li",{parentName:"ul"},"\u6821\u9a8c",(0,i.yg)("inlineCode",{parentName:"li"},"request"),"\u5927\u5c0f\uff1b"),(0,i.yg)("li",{parentName:"ul"},"\u83b7\u53d6\u670d\u52a1\u5217\u8868\uff1b"),(0,i.yg)("li",{parentName:"ul"},"\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\uff1b"),(0,i.yg)("li",{parentName:"ul"},"\u8bbe\u7f6e\u8bf7\u6c42",(0,i.yg)("inlineCode",{parentName:"li"},"url"),"\uff0c\u8d85\u65f6\u65f6\u95f4\uff0c\u91cd\u8bd5\u7b56\u7565\u3002")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'@Override\n    protected Mono<Void> doExecute(final ServerWebExchange exchange, final ShenyuPluginChain chain, final SelectorData selector, final RuleData rule) {\n        // \u83b7\u53d6\u4e0a\u4e0b\u6587\u4fe1\u606f\n        ShenyuContext shenyuContext = exchange.getAttribute(Constants.CONTEXT);\n        assert shenyuContext != null;\n        // \u83b7\u53d6\u89c4\u5219\u7684handle\u5c5e\u6027\n        DivideRuleHandle ruleHandle = DividePluginDataHandler.CACHED_HANDLE.get().obtainHandle(CacheKeyUtils.INST.getKey(rule));\n        long headerSize = 0;\n        // \u6821\u9a8cheader\u5927\u5c0f\n        for (List<String> multiHeader : exchange.getRequest().getHeaders().values()) {\n            for (String value : multiHeader) {\n                headerSize += value.getBytes(StandardCharsets.UTF_8).length;\n            }\n        }\n        if (headerSize > ruleHandle.getHeaderMaxSize()) {\n            LOG.error("request header is too large");\n            Object error = ShenyuResultWrap.error(exchange, ShenyuResultEnum.REQUEST_HEADER_TOO_LARGE, null);\n            return WebFluxResultUtils.result(exchange, error);\n        }\n        \n        // \u6821\u9a8crequest\u5927\u5c0f\n        if (exchange.getRequest().getHeaders().getContentLength() > ruleHandle.getRequestMaxSize()) {\n            LOG.error("request entity is too large");\n            Object error = ShenyuResultWrap.error(exchange, ShenyuResultEnum.REQUEST_ENTITY_TOO_LARGE, null);\n            return WebFluxResultUtils.result(exchange, error);\n        }\n        // \u83b7\u53d6\u670d\u52a1\u5217\u8868upstreamList\n        List<Upstream> upstreamList = UpstreamCacheManager.getInstance().findUpstreamListBySelectorId(selector.getId());\n        if (CollectionUtils.isEmpty(upstreamList)) {\n            LOG.error("divide upstream configuration error\uff1a {}", rule);\n            Object error = ShenyuResultWrap.error(exchange, ShenyuResultEnum.CANNOT_FIND_HEALTHY_UPSTREAM_URL, null);\n            return WebFluxResultUtils.result(exchange, error);\n        }\n        // \u8bf7\u6c42ip\n        String ip = Objects.requireNonNull(exchange.getRequest().getRemoteAddress()).getAddress().getHostAddress();\n        // \u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\n        Upstream upstream = LoadBalancerFactory.selector(upstreamList, ruleHandle.getLoadBalance(), ip);\n        if (Objects.isNull(upstream)) {\n            LOG.error("divide has no upstream");\n            Object error = ShenyuResultWrap.error(exchange, ShenyuResultEnum.CANNOT_FIND_HEALTHY_UPSTREAM_URL, null);\n            return WebFluxResultUtils.result(exchange, error);\n        }\n        // \u8bbe\u7f6eurl\n        String domain = upstream.buildDomain();\n        exchange.getAttributes().put(Constants.HTTP_DOMAIN, domain);\n        // \u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4\n        exchange.getAttributes().put(Constants.HTTP_TIME_OUT, ruleHandle.getTimeout());\n        exchange.getAttributes().put(Constants.HTTP_RETRY, ruleHandle.getRetry());\n        // \u8bbe\u7f6e\u91cd\u8bd5\u7b56\u7565\n        exchange.getAttributes().put(Constants.RETRY_STRATEGY, ruleHandle.getRetryStrategy());\n        exchange.getAttributes().put(Constants.LOAD_BALANCE, ruleHandle.getLoadBalance());\n        exchange.getAttributes().put(Constants.DIVIDE_SELECTOR_ID, selector.getId());\n        return chain.execute(exchange);\n    }\n')),(0,i.yg)("h4",{id:"24-\u53d1\u8d77\u8bf7\u6c42"},"2.4 \u53d1\u8d77\u8bf7\u6c42"),(0,i.yg)("p",null,"\u9ed8\u8ba4\u7531",(0,i.yg)("inlineCode",{parentName:"p"},"WebClientPlugin"),"\u5411",(0,i.yg)("inlineCode",{parentName:"p"},"http"),"\u670d\u52a1\u53d1\u8d77\u8c03\u7528\u8bf7\u6c42\uff0c\u7c7b\u7ee7\u627f\u5173\u7cfb\u5982\u4e0b\uff1a"),(0,i.yg)("p",null,(0,i.yg)("img",{src:t(82988).c})),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"ShenyuPlugin\uff1a\u9876\u5c42\u63d2\u4ef6\uff0c\u5b9a\u4e49\u63d2\u4ef6\u65b9\u6cd5\uff1b"),(0,i.yg)("li",{parentName:"ul"},"AbstractHttpClientPlugin\uff1a\u62bd\u8c61\u7c7b\uff0c\u5b9e\u73b0\u8bf7\u6c42\u8c03\u7528\u7684\u516c\u5171\u903b\u8f91\uff1b"),(0,i.yg)("li",{parentName:"ul"},"WebClientPlugin\uff1a\u901a\u8fc7",(0,i.yg)("inlineCode",{parentName:"li"},"WebClient"),"\u53d1\u8d77\u8bf7\u6c42\uff1b"),(0,i.yg)("li",{parentName:"ul"},"NettyHttpClientPlugin\uff1a\u901a\u8fc7",(0,i.yg)("inlineCode",{parentName:"li"},"Netty"),"\u53d1\u8d77\u8bf7\u6c42\u3002")),(0,i.yg)("p",null,"\u53d1\u8d77\u8bf7\u6c42\u8c03\u7528\uff1a"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.plugin.httpclient.AbstractHttpClientPlugin#execute()")),(0,i.yg)("p",null,"\u5728",(0,i.yg)("inlineCode",{parentName:"p"},"execute()"),"\u65b9\u6cd5\u4e2d\u53d1\u8d77\u8bf7\u6c42\u8c03\u7528\uff1a"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\u83b7\u53d6\u6307\u5b9a\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u91cd\u8bd5\u6b21\u6570"),(0,i.yg)("li",{parentName:"ul"},"\u53d1\u8d77\u8bf7\u6c42"),(0,i.yg)("li",{parentName:"ul"},"\u6839\u636e\u6307\u5b9a\u7684\u91cd\u8bd5\u7b56\u7565\u8fdb\u884c\u5931\u8d25\u540e\u91cd\u8bd5\u64cd\u4f5c")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'\npublic abstract class AbstractHttpClientPlugin<R> implements ShenyuPlugin {\n\n    protected static final Logger LOG = LoggerFactory.getLogger(AbstractHttpClientPlugin.class);\n\n    @Override\n    public final Mono<Void> execute(final ServerWebExchange exchange, final ShenyuPluginChain chain) {\n        // \u83b7\u53d6\u4e0a\u4e0b\u6587\u4fe1\u606f\n        final ShenyuContext shenyuContext = exchange.getAttribute(Constants.CONTEXT);\n        assert shenyuContext != null;\n        // \u83b7\u53d6uri\n        final URI uri = exchange.getAttribute(Constants.HTTP_URI);\n        if (Objects.isNull(uri)) {\n            Object error = ShenyuResultWrap.error(exchange, ShenyuResultEnum.CANNOT_FIND_URL, null);\n            return WebFluxResultUtils.result(exchange, error);\n        }\n        // \u83b7\u53d6\u6307\u5b9a\u7684\u8d85\u65f6\u65f6\u95f4\n        final long timeout = (long) Optional.ofNullable(exchange.getAttribute(Constants.HTTP_TIME_OUT)).orElse(3000L);\n        final Duration duration = Duration.ofMillis(timeout);\n        // \u83b7\u53d6\u6307\u5b9a\u91cd\u8bd5\u6b21\u6570\n        final int retryTimes = (int) Optional.ofNullable(exchange.getAttribute(Constants.HTTP_RETRY)).orElse(0);\n        // \u83b7\u53d6\u6307\u5b9a\u7684\u91cd\u8bd5\u7b56\u7565\n        final String retryStrategy = (String) Optional.ofNullable(exchange.getAttribute(Constants.RETRY_STRATEGY)).orElseGet(RetryEnum.CURRENT::getName);\n        LOG.info("The request urlPath is {}, retryTimes is {}, retryStrategy is {}", uri.toASCIIString(), retryTimes, retryStrategy);\n        // \u6784\u5efaheader\n        final HttpHeaders httpHeaders = buildHttpHeaders(exchange);\n        // \u53d1\u8d77\u8bf7\u6c42\n        final Mono<R> response = doRequest(exchange, exchange.getRequest().getMethodValue(), uri, httpHeaders, exchange.getRequest().getBody())\n                .timeout(duration, Mono.error(new TimeoutException("Response took longer than timeout: " + duration)))\n                .doOnError(e -> LOG.error(e.getMessage(), e));\n        \n        // \u91cd\u8bd5\u7b56\u7565CURRENT\uff0c\u5bf9\u5f53\u524d\u670d\u52a1\u8fdb\u884c\u91cd\u8bd5\n        if (RetryEnum.CURRENT.getName().equals(retryStrategy)) {\n            //old version of DividePlugin and SpringCloudPlugin will run on this\n            return response.retryWhen(Retry.anyOf(TimeoutException.class, ConnectTimeoutException.class, ReadTimeoutException.class, IllegalStateException.class)\n                    .retryMax(retryTimes)\n                    .backoff(Backoff.exponential(Duration.ofMillis(200), Duration.ofSeconds(20), 2, true)))\n                    .onErrorMap(TimeoutException.class, th -> new ResponseStatusException(HttpStatus.GATEWAY_TIMEOUT, th.getMessage(), th))\n                    .flatMap((Function<Object, Mono<? extends Void>>) o -> chain.execute(exchange));\n        }\n        \n        // \u5bf9\u5176\u4ed6\u670d\u52a1\u8fdb\u884c\u91cd\u8bd5\n        // \u6392\u9664\u5df2\u7ecf\u8c03\u7528\u8fc7\u7684\u670d\u52a1\n        final Set<URI> exclude = Sets.newHashSet(uri);\n        // \u8bf7\u6c42\u91cd\u8bd5\n        return resend(response, exchange, duration, httpHeaders, exclude, retryTimes)\n                .onErrorMap(TimeoutException.class, th -> new ResponseStatusException(HttpStatus.GATEWAY_TIMEOUT, th.getMessage(), th))\n                .flatMap((Function<Object, Mono<? extends Void>>) o -> chain.execute(exchange));\n    }\n\n    private Mono<R> resend(final Mono<R> clientResponse,\n                           final ServerWebExchange exchange,\n                           final Duration duration,\n                           final HttpHeaders httpHeaders,\n                           final Set<URI> exclude,\n                           final int retryTimes) {\n        Mono<R> result = clientResponse;\n        // \u6839\u636e\u6307\u5b9a\u7684\u91cd\u8bd5\u6b21\u6570\u8fdb\u884c\u91cd\u8bd5\n        for (int i = 0; i < retryTimes; i++) {\n            result = resend(result, exchange, duration, httpHeaders, exclude);\n        }\n        return result;\n    }\n\n    private Mono<R> resend(final Mono<R> response,\n                           final ServerWebExchange exchange,\n                           final Duration duration,\n                           final HttpHeaders httpHeaders,\n                           final Set<URI> exclude) {\n        return response.onErrorResume(th -> {\n            final String selectorId = exchange.getAttribute(Constants.DIVIDE_SELECTOR_ID);\n            final String loadBalance = exchange.getAttribute(Constants.LOAD_BALANCE);\n            //\u67e5\u8be2\u53ef\u7528\u670d\u52a1\n            final List<Upstream> upstreamList = UpstreamCacheManager.getInstance().findUpstreamListBySelectorId(selectorId)\n                    .stream().filter(data -> {\n                        final String trimUri = data.getUrl().trim();\n                        for (URI needToExclude : exclude) {\n                            // exclude already called\n                            if ((needToExclude.getHost() + ":" + needToExclude.getPort()).equals(trimUri)) {\n                                return false;\n                            }\n                        }\n                        return true;\n                    }).collect(Collectors.toList());\n            if (CollectionUtils.isEmpty(upstreamList)) {\n                // no need to retry anymore\n                return Mono.error(new ShenyuException(ShenyuResultEnum.CANNOT_FIND_HEALTHY_UPSTREAM_URL_AFTER_FAILOVER.getMsg()));\n            }\n            // \u8bf7\u6c42ip\n            final String ip = Objects.requireNonNull(exchange.getRequest().getRemoteAddress()).getAddress().getHostAddress();\n            // \u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\n            final Upstream upstream = LoadBalancerFactory.selector(upstreamList, loadBalance, ip);\n            if (Objects.isNull(upstream)) {\n                // no need to retry anymore\n                return Mono.error(new ShenyuException(ShenyuResultEnum.CANNOT_FIND_HEALTHY_UPSTREAM_URL_AFTER_FAILOVER.getMsg()));\n            }\n            final URI newUri = RequestUrlUtils.buildRequestUri(exchange, upstream.buildDomain());\n            // \u6392\u9664\u5df2\u7ecf\u8c03\u7528\u7684uri\n            exclude.add(newUri);\n             // \u8fdb\u884c\u518d\u6b21\u8c03\u7528\n            return doRequest(exchange, exchange.getRequest().getMethodValue(), newUri, httpHeaders, exchange.getRequest().getBody())\n                    .timeout(duration, Mono.error(new TimeoutException("Response took longer than timeout: " + duration)))\n                    .doOnError(e -> LOG.error(e.getMessage(), e));\n        });\n    }\n\n    //......\n}\n\n')),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.plugin.httpclient.WebClientPlugin#doRequest()")),(0,i.yg)("p",null,"\u5728",(0,i.yg)("inlineCode",{parentName:"p"},"doRequest()"),"\u65b9\u6cd5\u4e2d\u901a\u8fc7",(0,i.yg)("inlineCode",{parentName:"p"},"webClient"),"\u53d1\u8d77\u771f\u6b63\u7684\u8bf7\u6c42\u8c03\u7528\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"\n@Override\n    protected Mono<ClientResponse> doRequest(final ServerWebExchange exchange, final String httpMethod, final URI uri,\n                                             final HttpHeaders httpHeaders, final Flux<DataBuffer> body) {\n        return webClient.method(HttpMethod.valueOf(httpMethod)).uri(uri) //\u8bf7\u6c42uri\n                .headers(headers -> headers.addAll(httpHeaders)) // \u8bf7\u6c42header\n                .body(BodyInserters.fromDataBuffers(body))\n                .exchange() // \u53d1\u8d77\u8bf7\u6c42\n                .doOnSuccess(res -> {\n                    if (res.statusCode().is2xxSuccessful()) { // \u6210\u529f\n                        exchange.getAttributes().put(Constants.CLIENT_RESPONSE_RESULT_TYPE, ResultEnum.SUCCESS.getName());\n                    } else { // \u5931\u8d25\n                        exchange.getAttributes().put(Constants.CLIENT_RESPONSE_RESULT_TYPE, ResultEnum.ERROR.getName());\n                    }\n                    exchange.getResponse().setStatusCode(res.statusCode());\n                    exchange.getAttributes().put(Constants.CLIENT_RESPONSE_ATTR, res);\n                });\n    }\n")),(0,i.yg)("h4",{id:"25-\u5904\u7406\u54cd\u5e94\u7ed3\u679c"},"2.5 \u5904\u7406\u54cd\u5e94\u7ed3\u679c"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.plugin.response.ResponsePlugin#execute()")),(0,i.yg)("p",null,"\u54cd\u5e94\u7ed3\u679c\u7531",(0,i.yg)("inlineCode",{parentName:"p"},"ResponsePlugin"),"\u63d2\u4ef6\u5904\u7406\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"    @Override\n    public Mono<Void> execute(final ServerWebExchange exchange, final ShenyuPluginChain chain) {\n        ShenyuContext shenyuContext = exchange.getAttribute(Constants.CONTEXT);\n        assert shenyuContext != null;\n        // \u6839\u636erpc\u7c7b\u578b\u5904\u7406\u7ed3\u679c\n        return writerMap.get(shenyuContext.getRpcType()).writeWith(exchange, chain);\n    }\n")),(0,i.yg)("p",null,"\u5904\u7406\u7c7b\u578b\u7531",(0,i.yg)("inlineCode",{parentName:"p"},"MessageWriter"),"\u51b3\u5b9a\uff0c\u7c7b\u7ee7\u627f\u5173\u7cfb\u5982\u4e0b\uff1a"),(0,i.yg)("p",null,(0,i.yg)("img",{src:t(84432).c})),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"MessageWriter\uff1a\u63a5\u53e3\uff0c\u5b9a\u4e49\u6d88\u606f\u5904\u7406\u65b9\u6cd5\uff1b"),(0,i.yg)("li",{parentName:"ul"},"NettyClientMessageWriter\uff1a\u5904\u7406",(0,i.yg)("inlineCode",{parentName:"li"},"Netty"),"\u8c03\u7528\u7ed3\u679c\uff1b"),(0,i.yg)("li",{parentName:"ul"},"RPCMessageWriter\uff1a\u5904\u7406",(0,i.yg)("inlineCode",{parentName:"li"},"RPC"),"\u8c03\u7528\u7ed3\u679c\uff1b"),(0,i.yg)("li",{parentName:"ul"},"WebClientMessageWriter\uff1a\u5904\u7406",(0,i.yg)("inlineCode",{parentName:"li"},"WebClient"),"\u8c03\u7528\u7ed3\u679c\uff1b")),(0,i.yg)("p",null,"\u9ed8\u8ba4\u662f\u901a\u8fc7",(0,i.yg)("inlineCode",{parentName:"p"},"WebCient"),"\u53d1\u8d77",(0,i.yg)("inlineCode",{parentName:"p"},"http"),"\u8bf7\u6c42\u3002"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"org.apache.shenyu.plugin.response.strategy.WebClientMessageWriter#writeWith()")),(0,i.yg)("p",null,"\u5728",(0,i.yg)("inlineCode",{parentName:"p"},"writeWith()"),"\u65b9\u6cd5\u4e2d\u5904\u7406\u54cd\u5e94\u7ed3\u679c\u3002"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"\n    @Override\n    public Mono<Void> writeWith(final ServerWebExchange exchange, final ShenyuPluginChain chain) {\n        return chain.execute(exchange).then(Mono.defer(() -> {\n            // \u83b7\u53d6\u54cd\u5e94\n            ServerHttpResponse response = exchange.getResponse();\n            ClientResponse clientResponse = exchange.getAttribute(Constants.CLIENT_RESPONSE_ATTR);\n            if (Objects.isNull(clientResponse)) {\n                Object error = ShenyuResultWrap.error(exchange, ShenyuResultEnum.SERVICE_RESULT_ERROR, null);\n                return WebFluxResultUtils.result(exchange, error);\n            }\n            //\u83b7\u53d6cookies\u548cheaders\n            response.getCookies().putAll(clientResponse.cookies());\n            response.getHeaders().putAll(clientResponse.headers().asHttpHeaders());\n            // image, pdf or stream does not do format processing.\n            // \u5904\u7406\u7279\u6b8a\u54cd\u5e94\u7c7b\u578b\n            if (clientResponse.headers().contentType().isPresent()) {\n                final String media = clientResponse.headers().contentType().get().toString().toLowerCase();\n                if (media.matches(COMMON_BIN_MEDIA_TYPE_REGEX)) {\n                    return response.writeWith(clientResponse.body(BodyExtractors.toDataBuffers()))\n                            .doOnCancel(() -> clean(exchange));\n                }\n            }\n            // \u5904\u7406\u4e00\u822c\u54cd\u5e94\u7c7b\u578b\n            clientResponse = ResponseUtils.buildClientResponse(response, clientResponse.body(BodyExtractors.toDataBuffers()));\n            return clientResponse.bodyToMono(byte[].class)\n                    .flatMap(originData -> WebFluxResultUtils.result(exchange, originData))\n                    .doOnCancel(() -> clean(exchange));\n        }));\n    }\n")),(0,i.yg)("p",null,"\u5206\u6790\u81f3\u6b64\uff0c\u5173\u4e8e",(0,i.yg)("inlineCode",{parentName:"p"},"Divide"),"\u63d2\u4ef6\u7684\u6e90\u7801\u5206\u6790\u5c31\u5b8c\u6210\u4e86\uff0c\u5206\u6790\u6d41\u7a0b\u56fe\u5982\u4e0b\uff1a"),(0,i.yg)("p",null,(0,i.yg)("img",{src:t(94716).c})),(0,i.yg)("h3",{id:"3-\u5c0f\u7ed3"},"3. \u5c0f\u7ed3"),(0,i.yg)("p",null,"\u672c\u6587\u6e90\u7801\u5206\u6790\u4ece",(0,i.yg)("inlineCode",{parentName:"p"},"http"),"\u670d\u52a1\u6ce8\u518c\u5f00\u59cb\uff0c\u5230",(0,i.yg)("inlineCode",{parentName:"p"},"divide"),"\u63d2\u4ef6\u7684\u670d\u52a1\u8c03\u7528\u3002",(0,i.yg)("inlineCode",{parentName:"p"},"divide"),"\u63d2\u4ef6\u4e3b\u8981\u7528\u6765\u5904\u7406",(0,i.yg)("inlineCode",{parentName:"p"},"http"),"\u8bf7\u6c42\u3002\u6709\u4e9b\u6e90\u7801\u6ca1\u6709\u8fdb\u5165\u6df1\u5165\u5206\u6790\uff0c\u6bd4\u5982\u8d1f\u8f7d\u5747\u8861\u7684\u5b9e\u73b0\uff0c\u670d\u52a1\u63a2\u6d3b\uff0c\u5c06\u5728\u540e\u7eed\u7ee7\u7eed\u5206\u6790\u3002"))}p.isMDXComponent=!0},57411:(e,n,t)=>{t.d(n,{c:()=>a});const a="data:image/png;base64,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"},84432:(e,n,t)=>{t.d(n,{c:()=>a});const a=t.p+"assets/images/MessageWriter-81d10e88b3d5524b1eb2737c238956a6.png"},293:(e,n,t)=>{t.d(n,{c:()=>a});const a=t.p+"assets/images/ShenyuClientRegisterDivideServiceImpl-4d9351b1efbb545cde2a3a172e35f59c.png"},82988:(e,n,t)=>{t.d(n,{c:()=>a});const a=t.p+"assets/images/WebClientPlugin-64ae237cda7fd819160795669ee2e2bd.png"},94716:(e,n,t)=>{t.d(n,{c:()=>a});const a=t.p+"assets/images/divide-execute-zh-c145705430fc3aec6e561cc4ad183a05.png"},99151:(e,n,t)=>{t.d(n,{c:()=>a});const a=t.p+"assets/images/divide-register-zh-0697d4849e6ae1dbd2f15a0fd528cd32.png"}}]);