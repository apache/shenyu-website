"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[62469],{9814(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"plugin-center/http-process/contextpath-plugin","title":"ContextPath Plugin","description":"contextPath plugin","source":"@site/versioned_docs/version-2.4.3/plugin-center/http-process/contextpath-plugin.md","sourceDirName":"plugin-center/http-process","slug":"/plugin-center/http-process/contextpath-plugin","permalink":"/docs/2.4.3/plugin-center/http-process/contextpath-plugin","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.4.3/plugin-center/http-process/contextpath-plugin.md","tags":[],"version":"2.4.3","frontMatter":{"title":"ContextPath Plugin","keywords":["contextPath"],"description":"contextPath plugin"},"sidebar":"tutorialSidebar","previous":{"title":"Data Synchronization Config","permalink":"/docs/2.4.3/user-guide/use-data-sync"},"next":{"title":"ModifyResponse Plugin","permalink":"/docs/2.4.3/plugin-center/http-process/modifyresponse-plugin"}}');var r=t(74848),l=t(28453);const s={title:"ContextPath Plugin",keywords:["contextPath"],description:"contextPath plugin"},a="1. Overview",o={},c=[{value:"1.1 Plugin Name",id:"11-plugin-name",level:2},{value:"1.2 Appropriate Scenario",id:"12-appropriate-scenario",level:2},{value:"1.3 Plugin functionality",id:"13-plugin-functionality",level:2},{value:"1.4 Plugin Code",id:"14-plugin-code",level:2},{value:"1.5 Added since which shenyu version",id:"15-added-since-which-shenyu-version",level:2},{value:"2.1 Plugin-use procedure chart",id:"21-plugin-use-procedure-chart",level:2},{value:"2.2 Import pom",id:"22-import-pom",level:2},{value:"2.3 Enable plugin",id:"23-enable-plugin",level:2},{value:"2.4 Config plugin",id:"24-config-plugin",level:2},{value:"2.5 Examples",id:"25-examples",level:2},{value:"2.5.1 Example set service context path",id:"251-example-set-service-context-path",level:3},{value:"2.5.1.1 Refer Local Deployment to start admin and bootstrap.",id:"2511-refer-local-deployment-to-start-admin-and-bootstrap",level:4},{value:"2.5.1.2 Refer 2.2 to import pom and restart bootstrap.",id:"2512-refer-22-to-import-pom-and-restart-bootstrap",level:4},{value:"2.5.1.3 Refer 2.3 to enable plugin.",id:"2513-refer-23-to-enable-plugin",level:4},{value:"2.5.1.4 Client project config contextPath.",id:"2514-client-project-config-contextpath",level:4},{value:"2.5.1.5 Call Interface",id:"2515-call-interface",level:4},{value:"2.5.2 Example add prefix",id:"252-example-add-prefix",level:3},{value:"2.5.2.1 Refer Local Deployment to start admin and bootstrap.",id:"2521-refer-local-deployment-to-start-admin-and-bootstrap",level:4},{value:"2.5.2.2 Refer 2.2 to import pom and restart bootstrap.",id:"2522-refer-22-to-import-pom-and-restart-bootstrap",level:4},{value:"2.5.2.3 Refer 2.3 to enable plugin.",id:"2523-refer-23-to-enable-plugin",level:4},{value:"2.5.2.4 Client project config contextPath.",id:"2524-client-project-config-contextpath",level:4},{value:"2.5.2.5 Config addPrefix",id:"2525-config-addprefix",level:4},{value:"2.5.2.6 Modify the value of uri in the selector and condition configuration to delete the addPrefix part.",id:"2526-modify-the-value-of-uri-in-the-selector-and-condition-configuration-to-delete-the-addprefix-part",level:4},{value:"2.5.2.5 Call Interface",id:"2525-call-interface",level:4}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"1-overview",children:"1. Overview"})}),"\n",(0,r.jsx)(n.h2,{id:"11-plugin-name",children:"1.1 Plugin Name"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ContextPath Plugin"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"12-appropriate-scenario",children:"1.2 Appropriate Scenario"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Different services can do traffic governance of services by setting different context paths."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"13-plugin-functionality",children:"1.3 Plugin functionality"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Set the context path for service."}),"\n",(0,r.jsx)(n.li,{children:"When the interface is called, the plug-in uniformly prefixes the interface address of the service."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"14-plugin-code",children:"1.4 Plugin Code"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Core module ",(0,r.jsx)(n.code,{children:"shenyu-plugin-context-path"})]}),"\n",(0,r.jsxs)(n.li,{children:["Core class ",(0,r.jsx)(n.code,{children:"org.apache.shenyu.plugin.context.path.ContextPathPlugin"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"15-added-since-which-shenyu-version",children:"1.5 Added since which shenyu version"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"2.3.0"}),"\n"]}),"\n",(0,r.jsx)(n.h1,{id:"2-how-to-use-plugin",children:"2. How to use plugin"}),"\n",(0,r.jsx)(n.h2,{id:"21-plugin-use-procedure-chart",children:"2.1 Plugin-use procedure chart"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(12337).A+"",width:"474",height:"462"})}),"\n",(0,r.jsx)(n.h2,{id:"22-import-pom",children:"2.2 Import pom"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["import maven config in shenyu-bootstrap project's ",(0,r.jsx)(n.code,{children:"pom.xml"})," file."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"  <dependency>\n      <groupId>org.apache.shenyu</groupId>\n      <artifactId>shenyu-spring-boot-starter-gateway</artifactId>\n     <version>${project.version}</version>\n  </dependency>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"23-enable-plugin",children:"2.3 Enable plugin"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In ",(0,r.jsx)(n.code,{children:"shenyu-admin"})," --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,r.jsx)(n.code,{children:"contextPath"})," set Status enable."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(14769).A+"",width:"1910",height:"664"})}),"\n",(0,r.jsx)(n.h2,{id:"24-config-plugin",children:"2.4 Config plugin"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Set client project's contextPath."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(59886).A+"",width:"2794",height:"1288"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Selector and rule config, please refer: ",(0,r.jsx)(n.a,{href:"../../user-guide/admin-usage/selector-and-rule",children:"Selector and rule config"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"shenyu-admin contextPath plugin config, config contextPath and addPrefix, contextPath defines the value of contextPath,"}),"\n",(0,r.jsx)(n.li,{children:"and addPrefix defines the prefix that needs to be automatically added when the interface is called."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(66372).A+"",width:"1906",height:"767"})}),"\n",(0,r.jsx)(n.h2,{id:"25-examples",children:"2.5 Examples"}),"\n",(0,r.jsx)(n.h3,{id:"251-example-set-service-context-path",children:"2.5.1 Example set service context path"}),"\n",(0,r.jsxs)(n.h4,{id:"2511-refer-local-deployment-to-start-admin-and-bootstrap",children:["2.5.1.1 Refer ",(0,r.jsx)(n.a,{href:"https://shenyu.apache.org/docs/deployment/deployment-local/",children:"Local Deployment"})," to start admin and bootstrap."]}),"\n",(0,r.jsx)(n.h4,{id:"2512-refer-22-to-import-pom-and-restart-bootstrap",children:"2.5.1.2 Refer 2.2 to import pom and restart bootstrap."}),"\n",(0,r.jsx)(n.h4,{id:"2513-refer-23-to-enable-plugin",children:"2.5.1.3 Refer 2.3 to enable plugin."}),"\n",(0,r.jsx)(n.h4,{id:"2514-client-project-config-contextpath",children:"2.5.1.4 Client project config contextPath."}),"\n",(0,r.jsxs)(n.p,{children:["Client project can directly use ",(0,r.jsx)(n.a,{href:"https://github.com/apache/incubator-shenyu/tree/master/shenyu-examples/shenyu-examples-http",children:"shenyu-examples-http"}),", and config contextPath in application.yml."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(59886).A+"",width:"2794",height:"1288"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"After the configuration is completed, and start client project, you can see that there is an additional context selector and rule configuration in shenyu-admin."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(39924).A+"",width:"1912",height:"508"})}),"\n",(0,r.jsx)(n.h4,{id:"2515-call-interface",children:"2.5.1.5 Call Interface"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(19570).A+"",width:"2232",height:"1682"})}),"\n",(0,r.jsx)(n.h3,{id:"252-example-add-prefix",children:"2.5.2 Example add prefix"}),"\n",(0,r.jsxs)(n.h4,{id:"2521-refer-local-deployment-to-start-admin-and-bootstrap",children:["2.5.2.1 Refer ",(0,r.jsx)(n.a,{href:"https://shenyu.apache.org/docs/deployment/deployment-local/",children:"Local Deployment"})," to start admin and bootstrap."]}),"\n",(0,r.jsx)(n.h4,{id:"2522-refer-22-to-import-pom-and-restart-bootstrap",children:"2.5.2.2 Refer 2.2 to import pom and restart bootstrap."}),"\n",(0,r.jsx)(n.h4,{id:"2523-refer-23-to-enable-plugin",children:"2.5.2.3 Refer 2.3 to enable plugin."}),"\n",(0,r.jsx)(n.h4,{id:"2524-client-project-config-contextpath",children:"2.5.2.4 Client project config contextPath."}),"\n",(0,r.jsxs)(n.p,{children:["For client project we can directly use ",(0,r.jsx)(n.a,{href:"https://github.com/apache/incubator-shenyu/tree/master/shenyu-examples/shenyu-examples-http",children:"shenyu-examples-http"}),", and config contextPath in application.yml."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(59886).A+"",width:"2794",height:"1288"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"After the configuration is completed, start client project, you can see that there is an additional context selector and rule configuration in shenyu-admin."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(39924).A+"",width:"1912",height:"508"})}),"\n",(0,r.jsx)(n.h4,{id:"2525-config-addprefix",children:"2.5.2.5 Config addPrefix"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(70132).A+"",width:"1906",height:"768"})}),"\n",(0,r.jsx)(n.h4,{id:"2526-modify-the-value-of-uri-in-the-selector-and-condition-configuration-to-delete-the-addprefix-part",children:"2.5.2.6 Modify the value of uri in the selector and condition configuration to delete the addPrefix part."}),"\n",(0,r.jsx)(n.p,{children:"Since this example uses the service of the http protocol, we need to modify the divide plugin."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(86945).A+"",width:"1895",height:"817"})}),"\n",(0,r.jsx)(n.h4,{id:"2525-call-interface",children:"2.5.2.5 Call Interface"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(18931).A+"",width:"2880",height:"1668"})}),"\n",(0,r.jsx)(n.h1,{id:"3-how-to-disable-plugin",children:"3. How to disable plugin"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In ",(0,r.jsx)(n.code,{children:"shenyu-admin"})," --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,r.jsx)(n.code,{children:"contextPath"})," set Status disable."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(11616).A+"",width:"1912",height:"682"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},11616(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/disable-en-e92e23f9495300ceabd7f3937970e5db.png"},12337(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/procedure-en-1e938b19eab6ff11bd956e3e9641bc52.png"},14769(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/enable-en-93474e3fbe53b33a7870f7cc5a2990e6.png"},18931(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/invoke-interface-add-prefix-51c6dfad10bf466ae61d0bfc507a7443.png"},19570(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/invoke-interface-cde95ab27ebf6f7608fcfe075e5245f7.png"},28453(e,n,t){t.d(n,{R:()=>s,x:()=>a});var i=t(96540);const r={},l=i.createContext(r);function s(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(l.Provider,{value:n},e.children)}},39924(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/context-path-selector-and-rule-en-73179545dae6c534b9dd2639949e1a57.png"},59886(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/client-project-config-1b8ee987a5aaf08a17499f11a013f548.png"},66372(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/plugin-config-en-eb907beb602715d69ffe2df9e66b66ce.png"},70132(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/add-prefix-en-a804086aec06625788372c6a3933ff32.png"},86945(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/remove-add-prefix-en-9c8f7b7d266761d4ceb0f3ca720a5928.png"}}]);