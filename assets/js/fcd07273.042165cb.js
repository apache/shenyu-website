"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[49283],{2409(e,t,n){n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"plugin-center/http-process/contextpath-plugin","title":"ContextPath Plugin","description":"contextPath plugin","source":"@site/versioned_docs/version-2.7.0.1/plugin-center/http-process/contextpath-plugin.md","sourceDirName":"plugin-center/http-process","slug":"/plugin-center/http-process/contextpath-plugin","permalink":"/docs/2.7.0.1/plugin-center/http-process/contextpath-plugin","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.7.0.1/plugin-center/http-process/contextpath-plugin.md","tags":[],"version":"2.7.0.1","frontMatter":{"title":"ContextPath Plugin","keywords":["contextPath"],"description":"contextPath plugin"},"sidebar":"tutorialSidebar","previous":{"title":"Pull the swagger registration API document","permalink":"/docs/2.7.0.1/user-guide/api-doc/swagger-apidoc"},"next":{"title":"ModifyResponse Plugin","permalink":"/docs/2.7.0.1/plugin-center/http-process/modifyresponse-plugin"}}');var r=n(74848),a=n(28453);const l={title:"ContextPath Plugin",keywords:["contextPath"],description:"contextPath plugin"},s="1. Overview",o={},c=[{value:"1.1 Plugin Name",id:"11-plugin-name",level:2},{value:"1.2 Appropriate Scenario",id:"12-appropriate-scenario",level:2},{value:"1.3 Plugin functionality",id:"13-plugin-functionality",level:2},{value:"1.4 Plugin Code",id:"14-plugin-code",level:2},{value:"1.5 Added since which shenyu version",id:"15-added-since-which-shenyu-version",level:2},{value:"2.1 Plugin-use procedure chart",id:"21-plugin-use-procedure-chart",level:2},{value:"2.2 Import pom",id:"22-import-pom",level:2},{value:"2.3 Enable plugin",id:"23-enable-plugin",level:2},{value:"2.4 Config plugin",id:"24-config-plugin",level:2},{value:"2.5 Examples",id:"25-examples",level:2},{value:"2.5.1 Example set service context path",id:"251-example-set-service-context-path",level:3},{value:"2.5.1.1 Refer Local Deployment to start admin and bootstrap.",id:"2511-refer-local-deployment-to-start-admin-and-bootstrap",level:4},{value:"2.5.1.2 Refer 2.2 to import pom and restart bootstrap.",id:"2512-refer-22-to-import-pom-and-restart-bootstrap",level:4},{value:"2.5.1.3 Refer 2.3 to enable plugin.",id:"2513-refer-23-to-enable-plugin",level:4},{value:"2.5.1.4 Client project config contextPath.",id:"2514-client-project-config-contextpath",level:4},{value:"2.5.1.5 Call Interface",id:"2515-call-interface",level:4},{value:"2.5.2 Example add prefix",id:"252-example-add-prefix",level:3},{value:"2.5.2.1 Refer Local Deployment to start admin and bootstrap.",id:"2521-refer-local-deployment-to-start-admin-and-bootstrap",level:4},{value:"2.5.2.2 Refer 2.2 to import pom and restart bootstrap.",id:"2522-refer-22-to-import-pom-and-restart-bootstrap",level:4},{value:"2.5.2.3 Refer 2.3 to enable plugin.",id:"2523-refer-23-to-enable-plugin",level:4},{value:"2.5.2.4 Client project config contextPath.",id:"2524-client-project-config-contextpath",level:4},{value:"2.5.2.5 Config addPrefix",id:"2525-config-addprefix",level:4},{value:"2.5.2.6 Modify the value of uri in the selector and condition configuration to delete the addPrefix part.",id:"2526-modify-the-value-of-uri-in-the-selector-and-condition-configuration-to-delete-the-addprefix-part",level:4},{value:"2.5.2.7 Call Interface",id:"2527-call-interface",level:4},{value:"2.5.3 Example rewrite application",id:"253-example-rewrite-application",level:3},{value:"2.5.3.1 Refer Local Deployment to start admin and bootstrap.",id:"2531-refer-local-deployment-to-start-admin-and-bootstrap",level:4},{value:"2.5.3.2 Refer 2.2 to import pom and restart bootstrap.",id:"2532-refer-22-to-import-pom-and-restart-bootstrap",level:4},{value:"2.5.3.3 Refer 2.3 to enable plugin.",id:"2533-refer-23-to-enable-plugin",level:4},{value:"2.5.3.4 Run client projects.",id:"2534-run-client-projects",level:4},{value:"2.5.3.5 Config rewriteContextPath",id:"2535-config-rewritecontextpath",level:4},{value:"2.5.2.6 Call Interface",id:"2526-call-interface",level:4}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"1-overview",children:"1. Overview"})}),"\n",(0,r.jsx)(t.h2,{id:"11-plugin-name",children:"1.1 Plugin Name"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"ContextPath Plugin"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"12-appropriate-scenario",children:"1.2 Appropriate Scenario"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Different services can do traffic governance of services by setting different context paths."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"13-plugin-functionality",children:"1.3 Plugin functionality"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Set the context path for service."}),"\n",(0,r.jsx)(t.li,{children:"When the interface is called, the plug-in uniformly prefixes the interface address of the service."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"14-plugin-code",children:"1.4 Plugin Code"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Core module ",(0,r.jsx)(t.code,{children:"shenyu-plugin-context-path"})]}),"\n",(0,r.jsxs)(t.li,{children:["Core class ",(0,r.jsx)(t.code,{children:"org.apache.shenyu.plugin.context.path.ContextPathPlugin"})]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"15-added-since-which-shenyu-version",children:"1.5 Added since which shenyu version"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"2.3.0"}),"\n"]}),"\n",(0,r.jsx)(t.h1,{id:"2-how-to-use-plugin",children:"2. How to use plugin"}),"\n",(0,r.jsx)(t.h2,{id:"21-plugin-use-procedure-chart",children:"2.1 Plugin-use procedure chart"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(12337).A+"",width:"474",height:"462"})}),"\n",(0,r.jsx)(t.h2,{id:"22-import-pom",children:"2.2 Import pom"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["import maven config in shenyu-bootstrap project's ",(0,r.jsx)(t.code,{children:"pom.xml"})," file."]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",children:"  <dependency>\n      <groupId>org.apache.shenyu</groupId>\n      <artifactId>shenyu-spring-boot-starter-gateway</artifactId>\n     <version>${project.version}</version>\n  </dependency>\n"})}),"\n",(0,r.jsx)(t.h2,{id:"23-enable-plugin",children:"2.3 Enable plugin"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["In ",(0,r.jsx)(t.code,{children:"shenyu-admin"})," --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,r.jsx)(t.code,{children:"contextPath"})," set Status enable."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(14769).A+"",width:"1910",height:"664"})}),"\n",(0,r.jsx)(t.h2,{id:"24-config-plugin",children:"2.4 Config plugin"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Set client project's contextPath."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(59886).A+"",width:"2794",height:"1288"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Selector and rule config, please refer: ",(0,r.jsx)(t.a,{href:"../../user-guide/admin-usage/selector-and-rule",children:"Selector and rule config"}),"."]}),"\n",(0,r.jsx)(t.li,{children:"shenyu-admin contextPath plugin config, config contextPath and addPrefix, contextPath defines the value of contextPath,"}),"\n",(0,r.jsx)(t.li,{children:"and addPrefix defines the prefix that needs to be automatically added when the interface is called."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(66372).A+"",width:"1906",height:"767"})}),"\n",(0,r.jsx)(t.h2,{id:"25-examples",children:"2.5 Examples"}),"\n",(0,r.jsx)(t.h3,{id:"251-example-set-service-context-path",children:"2.5.1 Example set service context path"}),"\n",(0,r.jsxs)(t.h4,{id:"2511-refer-local-deployment-to-start-admin-and-bootstrap",children:["2.5.1.1 Refer ",(0,r.jsx)(t.a,{href:"https://shenyu.apache.org/docs/deployment/deployment-local/",children:"Local Deployment"})," to start admin and bootstrap."]}),"\n",(0,r.jsx)(t.h4,{id:"2512-refer-22-to-import-pom-and-restart-bootstrap",children:"2.5.1.2 Refer 2.2 to import pom and restart bootstrap."}),"\n",(0,r.jsx)(t.h4,{id:"2513-refer-23-to-enable-plugin",children:"2.5.1.3 Refer 2.3 to enable plugin."}),"\n",(0,r.jsx)(t.h4,{id:"2514-client-project-config-contextpath",children:"2.5.1.4 Client project config contextPath."}),"\n",(0,r.jsxs)(t.p,{children:["Client project can directly use ",(0,r.jsx)(t.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-http",children:"shenyu-examples-http"}),", and config contextPath in application.yml."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(59886).A+"",width:"2794",height:"1288"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"After the configuration is completed, and start client project, you can see that there is an additional context selector and rule configuration in shenyu-admin."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(39924).A+"",width:"1912",height:"508"})}),"\n",(0,r.jsx)(t.h4,{id:"2515-call-interface",children:"2.5.1.5 Call Interface"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(19570).A+"",width:"2232",height:"1682"})}),"\n",(0,r.jsx)(t.h3,{id:"252-example-add-prefix",children:"2.5.2 Example add prefix"}),"\n",(0,r.jsxs)(t.h4,{id:"2521-refer-local-deployment-to-start-admin-and-bootstrap",children:["2.5.2.1 Refer ",(0,r.jsx)(t.a,{href:"https://shenyu.apache.org/docs/deployment/deployment-local/",children:"Local Deployment"})," to start admin and bootstrap."]}),"\n",(0,r.jsx)(t.h4,{id:"2522-refer-22-to-import-pom-and-restart-bootstrap",children:"2.5.2.2 Refer 2.2 to import pom and restart bootstrap."}),"\n",(0,r.jsx)(t.h4,{id:"2523-refer-23-to-enable-plugin",children:"2.5.2.3 Refer 2.3 to enable plugin."}),"\n",(0,r.jsx)(t.h4,{id:"2524-client-project-config-contextpath",children:"2.5.2.4 Client project config contextPath."}),"\n",(0,r.jsxs)(t.p,{children:["For client project we can directly use ",(0,r.jsx)(t.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-http",children:"shenyu-examples-http"}),", and config contextPath in application.yml."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(59886).A+"",width:"2794",height:"1288"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"After the configuration is completed, start client project, you can see that there is an additional context selector and rule configuration in shenyu-admin."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(39924).A+"",width:"1912",height:"508"})}),"\n",(0,r.jsx)(t.h4,{id:"2525-config-addprefix",children:"2.5.2.5 Config addPrefix"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(70132).A+"",width:"1906",height:"768"})}),"\n",(0,r.jsx)(t.h4,{id:"2526-modify-the-value-of-uri-in-the-selector-and-condition-configuration-to-delete-the-addprefix-part",children:"2.5.2.6 Modify the value of uri in the selector and condition configuration to delete the addPrefix part."}),"\n",(0,r.jsx)(t.p,{children:"Since this example uses the service of the http protocol, we need to modify the divide plugin."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(86945).A+"",width:"1895",height:"817"})}),"\n",(0,r.jsx)(t.h4,{id:"2527-call-interface",children:"2.5.2.7 Call Interface"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(18931).A+"",width:"2880",height:"1668"})}),"\n",(0,r.jsx)(t.h3,{id:"253-example-rewrite-application",children:"2.5.3 Example rewrite application"}),"\n",(0,r.jsxs)(t.h4,{id:"2531-refer-local-deployment-to-start-admin-and-bootstrap",children:["2.5.3.1 Refer ",(0,r.jsx)(t.a,{href:"https://shenyu.apache.org/docs/deployment/deployment-local/",children:"Local Deployment"})," to start admin and bootstrap."]}),"\n",(0,r.jsx)(t.h4,{id:"2532-refer-22-to-import-pom-and-restart-bootstrap",children:"2.5.3.2 Refer 2.2 to import pom and restart bootstrap."}),"\n",(0,r.jsx)(t.h4,{id:"2533-refer-23-to-enable-plugin",children:"2.5.3.3 Refer 2.3 to enable plugin."}),"\n",(0,r.jsx)(t.h4,{id:"2534-run-client-projects",children:"2.5.3.4 Run client projects."}),"\n",(0,r.jsxs)(t.p,{children:["For client project we can directly use ",(0,r.jsx)(t.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-http",children:"shenyu-examples-http"})," and ",(0,r.jsx)(t.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-https",children:"shenyu-examples-https"}),"."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"After the client projects started, you can see that there are two additional context selectors and rules configuration in shenyu-admin."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(13254).A+"",width:"3414",height:"1386"})}),"\n",(0,r.jsx)(t.h4,{id:"2535-config-rewritecontextpath",children:"2.5.3.5 Config rewriteContextPath"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(67238).A+"",width:"2016",height:"1412"})}),"\n",(0,r.jsx)(t.p,{children:"Note: the percentage can adjust the rewriting ratio from 0 to 100, with a default of 100, indicating complete rewriting."}),"\n",(0,r.jsx)(t.h4,{id:"2526-call-interface",children:"2.5.2.6 Call Interface"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(46943).A+"",width:"3364",height:"1858"})}),"\n",(0,r.jsx)(t.h1,{id:"3-how-to-disable-plugin",children:"3. How to disable plugin"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["In ",(0,r.jsx)(t.code,{children:"shenyu-admin"})," --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,r.jsx)(t.code,{children:"contextPath"})," set Status disable."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(11616).A+"",width:"1912",height:"682"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},11616(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/disable-en-e92e23f9495300ceabd7f3937970e5db.png"},12337(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/procedure-en-1e938b19eab6ff11bd956e3e9641bc52.png"},13254(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/context-path-selectors-9f0e881bd1af70c10089bbcbbc5665cb.jpg"},14769(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/enable-en-93474e3fbe53b33a7870f7cc5a2990e6.png"},18931(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/invoke-interface-add-prefix-51c6dfad10bf466ae61d0bfc507a7443.png"},19570(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/invoke-interface-cde95ab27ebf6f7608fcfe075e5245f7.png"},28453(e,t,n){n.d(t,{R:()=>l,x:()=>s});var i=n(96540);const r={},a=i.createContext(r);function l(e){const t=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(a.Provider,{value:t},e.children)}},39924(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/context-path-selector-and-rule-en-73179545dae6c534b9dd2639949e1a57.png"},46943(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/invoke-interface-rewrite-context-path-2e805aabd6653039e16345f93e1d54a6.jpg"},59886(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/client-project-config-1b8ee987a5aaf08a17499f11a013f548.png"},66372(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/plugin-config-en-eb907beb602715d69ffe2df9e66b66ce.png"},67238(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/rewrite-context-path-303dcab09c0e37b2a1cb8007dc4bcda7.jpg"},70132(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/add-prefix-en-a804086aec06625788372c6a3933ff32.png"},86945(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/remove-add-prefix-en-9c8f7b7d266761d4ceb0f3ca720a5928.png"}}]);