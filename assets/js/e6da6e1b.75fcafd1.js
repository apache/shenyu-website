"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[35713],{28453(e,n,l){l.d(n,{R:()=>i,x:()=>o});var s=l(96540);const r={},t=s.createContext(r);function i(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(t.Provider,{value:n},e.children)}},35315(e,n,l){l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"code-suggestions","title":"Code Suggestions","description":"Apache ShenYu Coding Guide","source":"@site/community/1-code-suggestions.md","sourceDirName":".","slug":"/code-suggestions","permalink":"/community/code-suggestions","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/community/1-code-suggestions.md","tags":[{"inline":true,"label":"Code Suggestions","permalink":"/community/tags/code-suggestions"}],"version":"current","lastUpdatedBy":"Wweiei","lastUpdatedAt":1769164668000,"sidebarPosition":1,"frontMatter":{"title":"Code Suggestions","sidebar_position":1,"description":"Apache ShenYu Coding Guide","author":"xiaoyu","categories":"Apache ShenYu","tags":["Code Suggestions"],"date":"2019-09-22T00:00:00.000Z","cover":"/img/architecture/shenyu-framework.png"},"sidebar":"community","next":{"title":"Issue And Pull Request","permalink":"/community/issue-pr"}}');var r=l(74848),t=l(28453);const i={title:"Code Suggestions",sidebar_position:1,description:"Apache ShenYu Coding Guide",author:"xiaoyu",categories:"Apache ShenYu",tags:["Code Suggestions"],date:new Date("2019-09-22T00:00:00.000Z"),cover:"/img/architecture/shenyu-framework.png"},o=void 0,c={},d=[{value:"General",id:"general",level:2},{value:"Object",id:"object",level:2},{value:"Collection",id:"collection",level:2},{value:"List",id:"list",level:3},{value:"Map",id:"map",level:3},{value:"String",id:"string",level:2},{value:"Exception",id:"exception",level:2},{value:"Resource",id:"resource",level:2},{value:"Several methods to judge and handle Null",id:"several-methods-to-judge-and-handle-null",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"general",children:"General"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use as many ",(0,r.jsx)(n.code,{children:"lambda function"})," expressions as possible."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Method parameters must be modified with ",(0,r.jsx)(n.code,{children:"final"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Constants modified ",(0,r.jsx)(n.code,{children:"static final"})," must be named in upper case."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Methods should not have too many parameters."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Clear unused classes and methods."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Use linux line separators."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Tab size is 4 and keep indents on empty lines."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["All code passage of Checkstyle: ",(0,r.jsx)(n.a,{href:"https://github.com/apache/shenyu/blob/master/script/shenyu_checkstyle.xml",children:"https://github.com/apache/shenyu/blob/master/script/shenyu_checkstyle.xml"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["When adding a new file, you need to add the ",(0,r.jsx)(n.a,{href:"https://github.com/apache/shenyu-website/blob/57f9a6b14c27d97137275453b207232f3df53205/LICENSE#L191-L201",children:"apache protocol"})," in the header of the file."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Try not to use a third party utility class directly.  Check to see if it is included in the util package for this project"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"object",children:"Object"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use Optional transform Null."}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Optional.ofNullable(xxx).orElse(obj)"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use Objects Judgment Null Or NotNull."}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Objects.isNull(obj) OR Objects.nonNull(obj)"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"Objects.equals"})," Judgment are they equal."]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Objects.equals(obj1, obj2)"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Creater objects outside of a for loop."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Object object = null;\nfor () {\n    object = new Object();\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"collection",children:"Collection"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"must indicate initial capacity to avoid recalculate capacity."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"list",children:"List"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"LinkedList"})," when you need to add or delete elements, Else use ",(0,r.jsx)(n.code,{children:"ArrayList"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"org.apache.commons.collections4.CollectionUtils"})," Judgment Is empty Or Not empty."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"CollectionUtils.isEmpty(list) or CollectionUtils.isNotEmpty(data)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"map",children:"Map"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"ConcurrenHashMap"})," when considering concurrency of threads, Else use ",(0,r.jsx)(n.code,{children:"HashMap"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Iterate over map using the most efficient way Or use ",(0,r.jsx)(n.code,{children:"lambda function"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Set<Map.Entry<String, String>> entrySet = map.entrySet();\nIterator<Map.Entry<String, String>> iter = entrySet.iterator();\nwhile (iter.hasNext()) {\n        Map.Entry<String, String> entry = iter.next();\n      \n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"string",children:"String"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"org.apache.commons.lang3.StringUtils"})," Judgment Is empty Or Not empty."]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"StringUtils.isEmpty(list) or StringUtils.isNotEmpty(data)"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"String.join"})," should be used when string concatenation occurs."]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"String join(CharSequence delimiter, CharSequence... elements)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"exception",children:"Exception"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Do not use try...catch in a loop, it should be on the outermost layer."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"try {\n  for () {\n  }\n} catch () {\n  \n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Do not use ",(0,r.jsx)(n.code,{children:"printStackTrace()"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Please use custom exceptions or ",(0,r.jsx)(n.code,{children:"ShenyuException"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"resource",children:"Resource"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Please use ",(0,r.jsx)(n.code,{children:"try with resource"})," to close resource."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"several-methods-to-judge-and-handle-null",children:"Several methods to judge and handle Null"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Judge self if Null or not, and also need to transform self, below are some representative examples:",(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"result.setXXX(null == a ? b.getXXX() : b.getXXX(a));"}),(0,r.jsx)(n.br,{}),"\n","recommendation : ",(0,r.jsx)(n.code,{children:"Optional.ofNullable(a).map(b::getXXX).orElse(b.getXXX());"}),(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"return null == a ? b.newC() : b.newC(a.getD(), a.getE());"}),(0,r.jsx)(n.br,{}),"\n","recommendation : ",(0,r.jsx)(n.code,{children:"return Optional.ofNullable(a).map(e -> b.newC(e.getD(),e.getE())).orElse(b.newC());"}),(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"return null == a.getB() ? null : a.getB().getC();"}),(0,r.jsx)(n.br,{}),"\n","recommendation : ",(0,r.jsx)(n.code,{children:"return Optional.ofNullable(a.getB()).map(C::getD).orElse(null);"}),(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"return null == a ? new B() : C.newD(a);"}),(0,r.jsx)(n.br,{}),"\n","recommendation : ",(0,r.jsx)(n.code,{children:"return Optional.ofNullable(a).map(B::newC).orElse(new D());"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Directly compare current object with Null, below are some representative examples:",(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"public void xxx\uff08Object o\uff09{if(null == o){retrun;}}"}),(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"public boolean wasNull() {return null == currentRow;}"}),(0,r.jsx)(n.br,{}),"\n","recommendation \uff1aUse JDK8's Objects.isNull method."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Judge self if Null or not, and also need to return self related ternary operator, below are some representative examples:",(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"this.a = null == a ? new B().newC() : a;"}),(0,r.jsx)(n.br,{}),"\n","recommendation : ",(0,r.jsx)(n.code,{children:"Optional.ofNullable(a).orElse(new B().newC());"}),(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"a = null == a ? b.getC().getD() : a;"}),(0,r.jsx)(n.br,{}),"\n","recommendation : ",(0,r.jsx)(n.code,{children:"a  = Optional.ofNullable(a).orElse(b.getC().getD());"}),(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"return null == a.getB() ? c : a.getB();"}),(0,r.jsx)(n.br,{}),"\n","recommendation : ",(0,r.jsx)(n.code,{children:"return Optional.ofNullable(a.getB()).orElse(c);"}),(0,r.jsx)(n.br,{}),"\n","current :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'BigDecimal c;\nBigDecimal s;\nif (null == c) {\n  c = new BigDecimal("0");\n}\nif (null == s) {\n  s = new BigDecimal("0");\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["recommendation : ",(0,r.jsx)(n.code,{children:'c = Optional.ofNullable(c).orElse(new BigDecimal("0")); s = Optional.ofNullable(s).orElse(new BigDecimal("0"));'}),(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"return null == results.get(0) ? 0 : results.get(0);"}),(0,r.jsx)(n.br,{}),"\n","recommendation : ",(0,r.jsx)(n.code,{children:"return Optional.ofNullable(results.get(0)).orElse(0);"}),(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"return null == getA().getB() ? Collections.emptyList() : Collections.singletonList(getA().getB());"}),(0,r.jsx)(n.br,{}),"\n","recommendation : ",(0,r.jsx)(n.code,{children:"return Optional.ofNullable(getA().getB()).map(Collections::singletonList).orElse(Collections.emptyList());"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Judge self if Null or not, and also need to return self independent ternary operator, below are some representative examples:",(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"A a = null == b ? cMap.values().iterator().next() : cMap.get(d);"}),(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"return null == a ? new B() : new B(c);"}),(0,r.jsx)(n.br,{}),"\n","recommendation : No modification."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Judge collection is null or not, below are some representative examples:",(0,r.jsx)(n.br,{}),"\n","current :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"private boolean isEmpty(final List<String> xxx) {\n    return null == xxx || xxx.isEmpty();\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"recommendation : Add a collection tool class to make unified judgment."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Judge Map's value is Null or not, below are some representative examples:",(0,r.jsx)(n.br,{}),"\n","current :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"public Collection<String> getA(final String b) {\n   Collection<String> result = cMap.get(b);\n   if (null == result) {\n      result = Collections.emptySet();\n   }\n   return result;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"recommendation : Use Map.getOrDefault() method."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"public Collection<String> getA(final String b) {\n  return cMap.getOrDefault(b, Collections.emptySet());\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Judge is Null or not, if yes throw exception, else execute next step, below are some representative examples:",(0,r.jsx)(n.br,{}),"\n","current :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'private Collection<String> doXxx(final Collection<String> a, final Object<?> b) {\n  if (null == c) {\n     throw new Exception("XXX");\n  }\n  return c.doXxx(a,new Object(b.getXXX(), b.getXXX(), b.getXXX()));\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"recommendation :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'private Collection<String> doXxx(final Collection<String> a, final Object<?> b) {\n     return Optional.ofNullable(c).map(e -> e.doXxx(a,\n            new Object(b.getXXX(), b.getXXX(), b.getXXX())))\n           .orElseThrow(()-> new Exception("XXX"));\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Judge is Null or not, and return Optional wrapped object, below are some representative examples:",(0,r.jsx)(n.br,{}),"\n","current : ",(0,r.jsx)(n.code,{children:"return null == a ? Optional.empty() : Optional.ofNullable(a.getXXX());"}),(0,r.jsx)(n.br,{}),"\n","recommendation : ",(0,r.jsx)(n.code,{children:"return Optional.ofNullable(a).map(e -> e.getXXX());"})]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);