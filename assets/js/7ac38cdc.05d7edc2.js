"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[6973],{28453:(e,t,r)=>{r.d(t,{R:()=>c,x:()=>i});var s=r(96540);const a={},n=s.createContext(a);function c(e){const t=s.useContext(n);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),s.createElement(n.Provider,{value:t},e.children)}},40542:(e,t,r)=>{r.d(t,{A:()=>s});const s=r.p+"assets/images/idea-http-test-brpc-bfee0a99f617fc97c45f470f2b288265.png"},47127:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>h,frontMatter:()=>n,metadata:()=>i,toc:()=>o});var s=r(74848),a=r(28453);const n={title:"Quick start with Brpc",description:"Brpc quick start"},c=void 0,i={id:"quick-start/quick-start-brpc",title:"Quick start with Brpc",description:"Brpc quick start",source:"@site/versioned_docs/version-2.6.0/quick-start/quick-start-brpc.md",sourceDirName:"quick-start",slug:"/quick-start/quick-start-brpc",permalink:"/docs/2.6.0/quick-start/quick-start-brpc",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.6.0/quick-start/quick-start-brpc.md",tags:[],version:"2.6.0",frontMatter:{title:"Quick start with Brpc",description:"Brpc quick start"},sidebar:"tutorialSidebar",previous:{title:"Cluster Deployment",permalink:"/docs/2.6.0/deployment/deployment-cluster"},next:{title:"Quick start with Dubbo",permalink:"/docs/2.6.0/quick-start/quick-start-dubbo"}},p={},o=[{value:"Environment to prepare",id:"environment-to-prepare",level:2},{value:"Run the shenyu-examples-brpc project",id:"run-the-shenyu-examples-brpc-project",level:2},{value:"Test",id:"test",level:2}];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["This document introduces how to quickly access the Apache ShenYu gateway using Brpc. You can get the code example of this document by clicking ",(0,s.jsx)(t.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-brpc",children:"here"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"environment-to-prepare",children:"Environment to prepare"}),"\n",(0,s.jsxs)(t.p,{children:["Please refer to the deployment to select a way to start shenyu-admin. For example, start the Apache ShenYu gateway management system through ",(0,s.jsx)(t.a,{href:"../deployment/deployment-local",children:"local deployment"})," ."]}),"\n",(0,s.jsxs)(t.p,{children:["After successful startup, you need to open the Brpc plugin on in the BasicConfig ",(0,s.jsx)(t.code,{children:"->"})," Plugin."]}),"\n",(0,s.jsx)("img",{src:"/img/shenyu/quick-start/brpc/brpc_open_en.png",width:"60%",height:"50%"}),"\n",(0,s.jsx)(t.p,{children:"If you are a startup gateway by means of source, can be directly run the ShenyuBootstrapApplication of shenyu-bootstrap module."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"Note: Before starting, make sure the gateway has added dependencies."}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Import the gateway proxy plugin for ",(0,s.jsx)(t.code,{children:"Brpc"})," and add the following dependencies to the gateway's ",(0,s.jsx)(t.code,{children:"pom.xml"})," file:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-xml",children:"        \x3c!-- apache shenyu brpc plugin --\x3e\n        <dependency>\n            <groupId>org.apache.shenyu</groupId>\n            <artifactId>shenyu-spring-boot-starter-plugin-brpc</artifactId>\n            <version>${project.version}</version>\n        </dependency>\n"})}),"\n",(0,s.jsx)(t.h2,{id:"run-the-shenyu-examples-brpc-project",children:"Run the shenyu-examples-brpc project"}),"\n",(0,s.jsxs)(t.p,{children:["Download ",(0,s.jsx)(t.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-brpc",children:"shenyu-examples-brpc"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Run main method of ",(0,s.jsx)(t.code,{children:"org.apache.shenyu.examples.brpc.service.TestBrpcApplication"})," to start this project."]}),"\n",(0,s.jsx)(t.p,{children:"The following log appears when the startup is successful:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:'2023-01-11 23:09:37.593  INFO 96741 --- [or_consumer_-19] o.a.s.r.client.http.utils.RegisterUtils  : metadata client register success: {"appName":"brpc","contextPath":"/brpc","path":"/brpc/allName","rpcType":"brpc","serviceName":"org.apache.shenyu.examples.brpc.api.service.BrpcDemoService","methodName":"allName","ruleName":"/brpc/allName","rpcExt":"{\\"methodInfo\\":[{\\"methodName\\":\\"allName\\",\\"paramTypes\\":[]}]}","enabled":true,"host":"127.0.0.1","port":8005,"pluginNames":[],"registerMetaData":false,"timeMillis":1673449777487,"addPrefixed":false} \n2023-01-11 23:09:37.611  INFO 96741 --- [or_consumer_-21] o.a.s.r.client.http.utils.RegisterUtils  : metadata client register success: {"appName":"brpc","contextPath":"/brpc","path":"/brpc/userMap","rpcType":"brpc","serviceName":"org.apache.shenyu.examples.brpc.api.service.BrpcDemoService","methodName":"userMap","ruleName":"/brpc/userMap","parameterTypes":"java.lang.Long","rpcExt":"{\\"methodInfo\\":[{\\"methodName\\":\\"userMap\\",\\"paramTypes\\":[{\\"left\\":\\"java.lang.Long\\",\\"right\\":\\"userId\\"}]}]}","enabled":true,"host":"127.0.0.1","port":8005,"pluginNames":[],"registerMetaData":false,"timeMillis":1673449777488,"addPrefixed":false} \n2023-01-11 23:09:37.611  INFO 96741 --- [or_consumer_-17] o.a.s.r.client.http.utils.RegisterUtils  : uri client register success: {"appName":"brpc","contextPath":"/brpc","rpcType":"brpc","host":"127.0.0.1","port":8005} \n2023-01-11 23:09:37.612  INFO 96741 --- [or_consumer_-20] o.a.s.r.client.http.utils.RegisterUtils  : metadata client register success: {"appName":"brpc","contextPath":"/brpc","path":"/brpc/getUserByIdAndName","rpcType":"brpc","serviceName":"org.apache.shenyu.examples.brpc.api.service.BrpcDemoService","methodName":"getUserByIdAndName","ruleName":"/brpc/getUserByIdAndName","parameterTypes":"java.lang.Long,java.lang.String","rpcExt":"{\\"methodInfo\\":[{\\"methodName\\":\\"getUserByIdAndName\\",\\"paramTypes\\":[{\\"left\\":\\"java.lang.Long\\",\\"right\\":\\"userId\\"},{\\"left\\":\\"java.lang.String\\",\\"right\\":\\"name\\"}]}]}","enabled":true,"host":"127.0.0.1","port":8005,"pluginNames":[],"registerMetaData":false,"timeMillis":1673449777488,"addPrefixed":false} \n2023-01-11 23:09:37.611  INFO 96741 --- [or_consumer_-18] o.a.s.r.client.http.utils.RegisterUtils  : metadata client register success: {"appName":"brpc","contextPath":"/brpc","path":"/brpc/connect","rpcType":"brpc","serviceName":"org.apache.shenyu.examples.brpc.api.service.BrpcDemoService","methodName":"connect","ruleName":"/brpc/connect","rpcExt":"{\\"methodInfo\\":[{\\"methodName\\":\\"connect\\",\\"paramTypes\\":[]}]}","enabled":true,"host":"127.0.0.1","port":8005,"pluginNames":[],"registerMetaData":false,"timeMillis":1673449777486,"addPrefixed":false} \n2023-01-11 23:09:37.612  INFO 96741 --- [or_consumer_-22] o.a.s.r.client.http.utils.RegisterUtils  : metadata client register success: {"appName":"brpc","contextPath":"/brpc","path":"/brpc/getUser","rpcType":"brpc","serviceName":"org.apache.shenyu.examples.brpc.api.service.BrpcDemoService","methodName":"getUser","ruleName":"/brpc/getUser","parameterTypes":"java.lang.Long","rpcExt":"{\\"methodInfo\\":[{\\"methodName\\":\\"getUser\\",\\"paramTypes\\":[{\\"left\\":\\"java.lang.Long\\",\\"right\\":\\"userId\\"}]}]}","enabled":true,"host":"127.0.0.1","port":8005,"pluginNames":[],"registerMetaData":false,"timeMillis":1673449777489,"addPrefixed":false} \n\n'})}),"\n",(0,s.jsx)(t.h2,{id:"test",children:"Test"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"shenyu-examples-brpc"})," project will automatically register interface methods annotated with ",(0,s.jsx)(t.code,{children:"@ShenyuBrpcClient"})," in the Apache ShenYu gateway after successful startup."]}),"\n",(0,s.jsx)(t.p,{children:"Open PluginList -> rpc proxy -> brpc to see the list of plugin rule configurations:"}),"\n",(0,s.jsx)("img",{src:"/img/shenyu/quick-start/brpc/rule-list.png",width:"100%",height:"100%"}),"\n",(0,s.jsx)(t.p,{children:"Use IDEA HTTP Client Plugin to simulate HTTP to request your Brpc service[Shenyu proxy]:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:r(40542).A+"",width:"2964",height:"1758"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);