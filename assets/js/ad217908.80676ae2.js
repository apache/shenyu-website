"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[27007],{28453(e,t,n){n.d(t,{R:()=>r,x:()=>i});var o=n(96540);const a={},s=o.createContext(a);function r(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(s.Provider,{value:t},e.children)}},78014(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"quick-start/quick-start-motan","title":"Quick start with Motan","description":"Motan quick start","source":"@site/versioned_docs/version-2.6.1/quick-start/quick-start-motan.md","sourceDirName":"quick-start","slug":"/quick-start/quick-start-motan","permalink":"/docs/2.6.1/quick-start/quick-start-motan","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.6.1/quick-start/quick-start-motan.md","tags":[],"version":"2.6.1","frontMatter":{"title":"Quick start with Motan","description":"Motan quick start"},"sidebar":"tutorialSidebar","previous":{"title":"Quick start with Http","permalink":"/docs/2.6.1/quick-start/quick-start-http"},"next":{"title":"Quick start with Sofa","permalink":"/docs/2.6.1/quick-start/quick-start-sofa"}}');var a=n(74848),s=n(28453);const r={title:"Quick start with Motan",description:"Motan quick start"},i=void 0,c={},l=[{value:"Environment to prepare",id:"environment-to-prepare",level:2},{value:"Run the shenyu-examples-motan project",id:"run-the-shenyu-examples-motan-project",level:2},{value:"Test",id:"test",level:2}];function p(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["This document introduces how to quickly access the Apache ShenYu gateway using Motan RPC. You can get the code example of this document by clicking ",(0,a.jsx)(t.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-motan",children:"here"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"environment-to-prepare",children:"Environment to prepare"}),"\n",(0,a.jsxs)(t.p,{children:["Please refer to the deployment to select a way to start shenyu-admin. For example, start the Apache ShenYu gateway management system through ",(0,a.jsx)(t.a,{href:"../deployment/deployment-local",children:"local deployment"})," ."]}),"\n",(0,a.jsxs)(t.p,{children:["After successful startup, you need to open the Sofa plugin on in the BasicConfig ",(0,a.jsx)(t.code,{children:"->"})," Plugin."]}),"\n",(0,a.jsx)("img",{src:"/img/shenyu/quick-start/motan/motan_open_en.png",width:"60%",height:"50%"}),"\n",(0,a.jsx)(t.p,{children:"If you are a startup gateway by means of source, can be directly run the ShenyuBootstrapApplication of shenyu-bootstrap module."}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"Note: Before starting, make sure the gateway has added dependencies.\nStart up zookeeper in local."}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["Import the gateway proxy plugin for ",(0,a.jsx)(t.code,{children:"Motan"})," and add the following dependencies to the gateway's ",(0,a.jsx)(t.code,{children:"pom.xml"})," file:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-xml",children:"        \x3c!-- apache shenyu motan plugin --\x3e\n        <dependency>\n            <groupId>org.apache.shenyu</groupId>\n            <artifactId>shenyu-spring-boot-starter-plugin-motan</artifactId>\n            <version>${project.version}</version>\n        </dependency>\n\n        <dependency>\n            <groupId>com.weibo</groupId>\n            <artifactId>motan-core</artifactId>\n            <version>1.1.9</version>\n        </dependency>\n\n        <dependency>\n            <groupId>com.weibo</groupId>\n            <artifactId>motan-registry-zookeeper</artifactId>\n            <version>1.1.9</version>\n        </dependency>\n\n        <dependency>\n            <groupId>com.weibo</groupId>\n            <artifactId>motan-transport-netty4</artifactId>\n            <version>1.1.9</version>\n        </dependency>\n\n        <dependency>\n            <groupId>com.weibo</groupId>\n            <artifactId>motan-springsupport</artifactId>\n            <version>1.1.9</version>\n        </dependency>\n"})}),"\n",(0,a.jsx)(t.h2,{id:"run-the-shenyu-examples-motan-project",children:"Run the shenyu-examples-motan project"}),"\n",(0,a.jsxs)(t.p,{children:["Download ",(0,a.jsx)(t.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-motan",children:"shenyu-examples-motan"})," ."]}),"\n",(0,a.jsxs)(t.p,{children:["Run main method of ",(0,a.jsx)(t.code,{children:"org.apache.shenyu.examples.motan.service.TestMotanApplication"})," to start this project."]}),"\n",(0,a.jsx)(t.p,{children:"log info as follows after starting:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:'2021-07-18 16:46:25.388  INFO 96 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8081 (http) with context path \'\'\n2021-07-18 16:46:25.393  INFO 96 --- [           main] o.a.s.e.m.service.TestMotanApplication   : Started TestMotanApplication in 3.89 seconds (JVM running for 4.514)\n2021-07-18 16:46:25.396  INFO 96 --- [           main] info                                     : [ZookeeperRegistry] Url (null) will set to available to Registry [zookeeper://localhost:2181/default_rpc/com.weibo.api.motan.registry.RegistryService/1.0/service]\n2021-07-18 16:46:25.399  INFO 96 --- [       Thread-6] o.a.s.c.c.s.ShenyuClientShutdownHook     : hook Thread-0 will sleep 3000ms when it start\n2021-07-18 16:46:25.399  INFO 96 --- [       Thread-6] o.a.s.c.c.s.ShenyuClientShutdownHook     : hook SpringContextShutdownHook will sleep 3000ms when it start\n2021-07-18 16:46:25.445  INFO 96 --- [ntLoopGroup-3-2] info                                     : NettyChannelHandler channelActive: remote=/192.168.1.8:49740 local=/192.168.1.8:8002\n2021-07-18 16:46:25.445  INFO 96 --- [ntLoopGroup-3-1] info                                     : NettyChannelHandler channelActive: remote=/192.168.1.8:49739 local=/192.168.1.8:8002\n2021-07-18 16:46:25.925  INFO 96 --- [or_consumer_-17] o.a.s.r.client.http.utils.RegisterUtils  : motan client register success: {"appName":"motan","contextPath":"/motan","path":"/motan/hello","pathDesc":"","rpcType":"motan","serviceName":"org.apache.shenyu.examples.motan.service.MotanDemoService","methodName":"hello","ruleName":"/motan/hello","parameterTypes":"java.lang.String","rpcExt":"{\\"methodInfo\\":[{\\"methodName\\":\\"hello\\",\\"params\\":[{\\"left\\":\\"java.lang.String\\",\\"right\\":\\"name\\"}]}],\\"group\\":\\"motan-shenyu-rpc\\"}","enabled":true,"host":"192.168.220.1","port":8081,"registerMetaData":false} \n\n'})}),"\n",(0,a.jsx)(t.h2,{id:"test",children:"Test"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"shenyu-examples-motan"})," project will automatically register the ",(0,a.jsx)(t.code,{children:"@ShenyuMotanClient"})," annotated interface methods with the gateway and add selectors and rules. If not, you can manually add them."]}),"\n",(0,a.jsx)(t.p,{children:"Open PluginList -> rpc proxy -> motan to see the list of plugin rule configurations:"}),"\n",(0,a.jsx)("img",{src:"/img/shenyu/quick-start/motan/motan_service_en.png",width:"60%",height:"50%"}),"\n",(0,a.jsx)(t.p,{children:"Use PostMan to simulate HTTP to request your Motan service:"}),"\n",(0,a.jsx)("img",{src:"/img/shenyu/plugin/motan/motan_service.png",width:"60%",height:"50%"})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}}}]);