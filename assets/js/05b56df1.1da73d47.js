"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[73812],{17046:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/body-invoke-interface-d5fd9ba3d67c539595c1e69f8ddd6716.png"},19109:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/disable-en-eac55ef5d1fa2120726b27881db51082.png"},23050:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>a});var i=s(74848),r=s(28453);const l={title:"ModifyResponse Plugin",keywords:["modifyResponse"],description:"modifyResponse plugin"},d="1. Overview",o={id:"plugin-center/http-process/modifyresponse-plugin",title:"ModifyResponse Plugin",description:"modifyResponse plugin",source:"@site/versioned_docs/version-2.5.1/plugin-center/http-process/modifyresponse-plugin.md",sourceDirName:"plugin-center/http-process",slug:"/plugin-center/http-process/modifyresponse-plugin",permalink:"/docs/2.5.1/plugin-center/http-process/modifyresponse-plugin",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.5.1/plugin-center/http-process/modifyresponse-plugin.md",tags:[],version:"2.5.1",frontMatter:{title:"ModifyResponse Plugin",keywords:["modifyResponse"],description:"modifyResponse plugin"},sidebar:"tutorialSidebar",previous:{title:"ContextPath Plugin",permalink:"/docs/2.5.1/plugin-center/http-process/contextpath-plugin"},next:{title:"ParamMapping Plugin",permalink:"/docs/2.5.1/plugin-center/http-process/parammapping-plugin"}},t={},a=[{value:"1.1 Plugin Name",id:"11-plugin-name",level:2},{value:"1.2 Appropriate Scenario",id:"12-appropriate-scenario",level:2},{value:"1.3 Plugin functionality",id:"13-plugin-functionality",level:2},{value:"1.4 Plugin Code",id:"14-plugin-code",level:2},{value:"1.5 Added since which shenyu version",id:"15-added-since-which-shenyu-version",level:2},{value:"2.1 Plugin-use procedure chart",id:"21-plugin-use-procedure-chart",level:2},{value:"2.2 Import pom",id:"22-import-pom",level:2},{value:"2.3 Enable plugin",id:"23-enable-plugin",level:2},{value:"2.4 Config plugin",id:"24-config-plugin",level:2},{value:"2.5 Examples",id:"25-examples",level:2},{value:"2.5.1 Example reset HTTP response status code",id:"251-example-reset-http-response-status-code",level:3},{value:"2.5.1.1 Refer Local Deployment to start admin and bootstrap.",id:"2511-refer-local-deployment-to-start-admin-and-bootstrap",level:4},{value:"2.5.1.2 Refer 2.2 to import pom and restart bootstrap.",id:"2512-refer-22-to-import-pom-and-restart-bootstrap",level:4},{value:"2.5.1.3 Refer 2.3 to enable plugin.",id:"2513-refer-23-to-enable-plugin",level:4},{value:"2.5.1.4 Refer 2.4 to add plugin config.",id:"2514-refer-24-to-add-plugin-config",level:4},{value:"2.5.1.5 Call Interface",id:"2515-call-interface",level:4},{value:"2.5.2 Example modify HTTP response headers",id:"252-example-modify-http-response-headers",level:3},{value:"2.5.2.1 Refer Local Deployment to start admin and bootstrap.",id:"2521-refer-local-deployment-to-start-admin-and-bootstrap",level:4},{value:"2.5.2.2 Refer 2.2 to import pom and restart bootstrap.",id:"2522-refer-22-to-import-pom-and-restart-bootstrap",level:4},{value:"2.5.2.3 Refer 2.3 to enable plugin.",id:"2523-refer-23-to-enable-plugin",level:4},{value:"2.5.2.4 Refer 2.4 to add plugin config.",id:"2524-refer-24-to-add-plugin-config",level:4},{value:"2.5.2.5 Call Interface",id:"2525-call-interface",level:4},{value:"2.5.3 Example modify HTTP response body",id:"253-example-modify-http-response-body",level:3},{value:"2.5.3.1 Refer Local Deployment to start admin and bootstrap.",id:"2531-refer-local-deployment-to-start-admin-and-bootstrap",level:4},{value:"2.5.3.2 Refer 2.2 to import pom and restart bootstrap.",id:"2532-refer-22-to-import-pom-and-restart-bootstrap",level:4},{value:"2.5.3.3 Refer 2.3 to enable plugin.",id:"2533-refer-23-to-enable-plugin",level:4},{value:"2.5.3.4 Refer 2.4 to add plugin config.",id:"2534-refer-24-to-add-plugin-config",level:4},{value:"2.5.3.5 Call Interface",id:"2535-call-interface",level:4},{value:"3. How to disable plugin",id:"3-how-to-disable-plugin",level:2},{value:"4. rule parameter list",id:"4-rule-parameter-list",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"1-overview",children:"1. Overview"}),"\n",(0,i.jsx)(n.h2,{id:"11-plugin-name",children:"1.1 Plugin Name"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ModifyResponse Plugin"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"12-appropriate-scenario",children:"1.2 Appropriate Scenario"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This plugin is used for modifying HTTP response status code, response headers or response body parameters."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"13-plugin-functionality",children:"1.3 Plugin functionality"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reset HTTP response status code"}),"\n",(0,i.jsx)(n.li,{children:"Add, set, replace or remove HTTP response headers."}),"\n",(0,i.jsx)(n.li,{children:"Add, replace or remove HTTP response body(JSON) parameters."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"14-plugin-code",children:"1.4 Plugin Code"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Core module ",(0,i.jsx)(n.code,{children:"shenyu-plugin-modify-response"})]}),"\n",(0,i.jsxs)(n.li,{children:["Core class ",(0,i.jsx)(n.code,{children:"org.apache.shenyu.plugin.modify.response.ModifyResponsePlugin"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"15-added-since-which-shenyu-version",children:"1.5 Added since which shenyu version"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"2.4.0"}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"2-how-to-use-plugin",children:"2. How to use plugin"}),"\n",(0,i.jsx)(n.h2,{id:"21-plugin-use-procedure-chart",children:"2.1 Plugin-use procedure chart"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(59448).A+"",width:"258",height:"782"})}),"\n",(0,i.jsx)(n.h2,{id:"22-import-pom",children:"2.2 Import pom"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["import maven config in shenyu-bootstrap project's ",(0,i.jsx)(n.code,{children:"pom.xml"})," file."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"  <dependency>\n      <groupId>org.apache.shenyu</groupId>\n      <artifactId>shenyu-spring-boot-starter-gateway</artifactId>\n     <version>${project.version}</version>\n  </dependency>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"23-enable-plugin",children:"2.3 Enable plugin"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.code,{children:"shenyu-admin"})," --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,i.jsx)(n.code,{children:"modifyResponse"})," set Status enable."]}),"\n",(0,i.jsx)(n.li,{}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(35934).A+"",width:"1697",height:"692"})}),"\n",(0,i.jsx)(n.h2,{id:"24-config-plugin",children:"2.4 Config plugin"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Selector and rule config, please refer: ",(0,i.jsx)(n.a,{href:"../../user-guide/admin-usage/selector-and-rule",children:"Selector and rule config"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.code,{children:"shenyu-admin"})," --\x3e ",(0,i.jsx)(n.code,{children:"PluginList"})," --\x3e ",(0,i.jsx)(n.code,{children:"HttpProcess"})," --\x3e ",(0,i.jsx)(n.code,{children:"modifyResponse"}),", add selector config first\uff0cthen add rule config\uff1a","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add selector config\n",(0,i.jsx)(n.img,{src:s(23625).A+"",width:"1689",height:"743"})]}),"\n",(0,i.jsxs)(n.li,{children:["Add rule config\n",(0,i.jsx)(n.img,{src:s(54712).A+"",width:"1687",height:"790"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"25-examples",children:"2.5 Examples"}),"\n",(0,i.jsxs)(n.p,{children:["Here is an example of client project ",(0,i.jsx)(n.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-http",children:"shenyu-examples-http"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"251-example-reset-http-response-status-code",children:"2.5.1 Example reset HTTP response status code"}),"\n",(0,i.jsxs)(n.h4,{id:"2511-refer-local-deployment-to-start-admin-and-bootstrap",children:["2.5.1.1 Refer ",(0,i.jsx)(n.a,{href:"https://shenyu.apache.org/docs/deployment/deployment-local/",children:"Local Deployment"})," to start admin and bootstrap."]}),"\n",(0,i.jsx)(n.h4,{id:"2512-refer-22-to-import-pom-and-restart-bootstrap",children:"2.5.1.2 Refer 2.2 to import pom and restart bootstrap."}),"\n",(0,i.jsx)(n.h4,{id:"2513-refer-23-to-enable-plugin",children:"2.5.1.3 Refer 2.3 to enable plugin."}),"\n",(0,i.jsx)(n.h4,{id:"2514-refer-24-to-add-plugin-config",children:"2.5.1.4 Refer 2.4 to add plugin config."}),"\n",(0,i.jsx)(n.p,{children:"Add plugin config:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(93671).A+"",width:"1669",height:"787"})}),"\n",(0,i.jsx)(n.h4,{id:"2515-call-interface",children:"2.5.1.5 Call Interface"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(34058).A+"",width:"1321",height:"581"})}),"\n",(0,i.jsx)(n.h3,{id:"252-example-modify-http-response-headers",children:"2.5.2 Example modify HTTP response headers"}),"\n",(0,i.jsxs)(n.h4,{id:"2521-refer-local-deployment-to-start-admin-and-bootstrap",children:["2.5.2.1 Refer ",(0,i.jsx)(n.a,{href:"https://shenyu.apache.org/docs/deployment/deployment-local/",children:"Local Deployment"})," to start admin and bootstrap."]}),"\n",(0,i.jsx)(n.h4,{id:"2522-refer-22-to-import-pom-and-restart-bootstrap",children:"2.5.2.2 Refer 2.2 to import pom and restart bootstrap."}),"\n",(0,i.jsx)(n.h4,{id:"2523-refer-23-to-enable-plugin",children:"2.5.2.3 Refer 2.3 to enable plugin."}),"\n",(0,i.jsx)(n.h4,{id:"2524-refer-24-to-add-plugin-config",children:"2.5.2.4 Refer 2.4 to add plugin config."}),"\n",(0,i.jsx)(n.p,{children:"Add plugin config:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(53958).A+"",width:"1695",height:"954"})}),"\n",(0,i.jsx)(n.h4,{id:"2525-call-interface",children:"2.5.2.5 Call Interface"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(41075).A+"",width:"1835",height:"854"})}),"\n",(0,i.jsx)(n.h3,{id:"253-example-modify-http-response-body",children:"2.5.3 Example modify HTTP response body"}),"\n",(0,i.jsxs)(n.h4,{id:"2531-refer-local-deployment-to-start-admin-and-bootstrap",children:["2.5.3.1 Refer ",(0,i.jsx)(n.a,{href:"https://shenyu.apache.org/docs/deployment/deployment-local/",children:"Local Deployment"})," to start admin and bootstrap."]}),"\n",(0,i.jsx)(n.h4,{id:"2532-refer-22-to-import-pom-and-restart-bootstrap",children:"2.5.3.2 Refer 2.2 to import pom and restart bootstrap."}),"\n",(0,i.jsx)(n.h4,{id:"2533-refer-23-to-enable-plugin",children:"2.5.3.3 Refer 2.3 to enable plugin."}),"\n",(0,i.jsx)(n.h4,{id:"2534-refer-24-to-add-plugin-config",children:"2.5.3.4 Refer 2.4 to add plugin config."}),"\n",(0,i.jsx)(n.p,{children:"Add plugin config:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(65115).A+"",width:"1249",height:"962"})}),"\n",(0,i.jsx)(n.h4,{id:"2535-call-interface",children:"2.5.3.5 Call Interface"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(17046).A+"",width:"1184",height:"590"})}),"\n",(0,i.jsx)(n.h2,{id:"3-how-to-disable-plugin",children:"3. How to disable plugin"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.code,{children:"shenyu-admin"})," --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,i.jsx)(n.code,{children:"modifyResponse"})," set Status disable."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(19109).A+"",width:"1680",height:"695"})}),"\n",(0,i.jsx)(n.h2,{id:"4-rule-parameter-list",children:"4. rule parameter list"}),"\n",(0,i.jsx)(n.p,{children:"for modifying status code:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"statusCode"}),": reset response status code"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"for modifying response headers:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"addHeaders"}),": add response headers, ",(0,i.jsx)(n.code,{children:"k-v"})," format"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"setHeaders"}),": set response headers, ",(0,i.jsx)(n.code,{children:"k-v"})," format"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"replaceHeaderKeys"}),": replace response headers\uff0c",(0,i.jsx)(n.code,{children:"key"})," is matching to the header key that should be replacing, value is target value after replacing"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"removeHeaderKeys"}),": remove response headers\uff0c",(0,i.jsx)(n.code,{children:"key"})," is matching to the header key that should be removing"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"for modifying response body:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"addBodyKeys"}),": add response body parameters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"replaceBodyKeys"}),": replace response body parameters\uff0c",(0,i.jsx)(n.code,{children:"key"})," is matching to the body(JSON) key that should be replacing, value is target value after replacing"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"removeBodyKeys"}),": remove response body parameters\uff0c",(0,i.jsx)(n.code,{children:"key"})," is matching to the body(JSON) key that should be removing"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},23625:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/plugin-selector-config-en-c9eba64e9bd6d1d7daca6c974280c079.png"},28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>o});var i=s(96540);const r={},l=i.createContext(r);function d(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(l.Provider,{value:n},e.children)}},34058:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/status-code-invoke-interface-688a23664d58e142832432e3e8abc449.png"},35934:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/enable-en-ac2aa2d0b684f329ba5eefaadf61b30c.png"},41075:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/header-invoke-interface-1ec5514412331e6438e4b1f5b2796d6e.png"},53958:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/header-rule-config-en-6531c7d9c41f5e744c0cf88ce38cb071.png"},54712:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/plugin-rule-config-en-92ed9341ca270670294f41ffdfe520c3.png"},59448:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/procedure-en-7fc93c4eb1c76a7cf253a0a6d2c072c7.png"},65115:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/body-rule-config-en-fa57f66c274d0ab89fce27bd95317b6e.png"},93671:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/status-code-rule-config-en-3cb49cba49823843b9076ecfafcdb358.png"}}]);