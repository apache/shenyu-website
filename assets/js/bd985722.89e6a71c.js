"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[46174],{23149:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/app-proxy-startuptime-en-1696ab1f3f4b39a079d04e9cafb45bf2.png"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var i=n(96540);const o={},s=i.createContext(o);function a(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(s.Provider,{value:t},e.children)}},60658:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/apidoc-detail-en-828985abbfa6d2b36b87f819ed3f39ae.png"},69427:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/apidoc-dictionary-en-c62f7e2be1763f8bee65a1245556327b.png"},72296:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var i=n(74848),o=n(28453);const s={title:"Pull the swagger registration API document",keywords:["swagger api Interface Document Aggregation"],description:"Remotely pull swagger registration API documentation"},a=void 0,r={id:"user-guide/api-doc/swagger-apidoc",title:"Pull the swagger registration API document",description:"Remotely pull swagger registration API documentation",source:"@site/versioned_docs/version-2.7.0.3/user-guide/api-doc/swagger-apidoc.md",sourceDirName:"user-guide/api-doc",slug:"/user-guide/api-doc/swagger-apidoc",permalink:"/docs/user-guide/api-doc/swagger-apidoc",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.7.0.3/user-guide/api-doc/swagger-apidoc.md",tags:[],version:"2.7.0.3",frontMatter:{title:"Pull the swagger registration API document",keywords:["swagger api Interface Document Aggregation"],description:"Remotely pull swagger registration API documentation"},sidebar:"tutorialSidebar",previous:{title:"The client registers the API documentation",permalink:"/docs/user-guide/api-doc/shenyu-annotation-apidoc"},next:{title:"ContextPath Plugin",permalink:"/docs/plugin-center/http-process/contextpath-plugin"}},c={},d=[{value:"1. Description",id:"1-description",level:2},{value:"2. Environment Preparation",id:"2-environment-preparation",level:2},{value:"2.1 Run <code>shenyu-admin</code>",id:"21-run-shenyu-admin",level:3},{value:"2.2 Enable the global switch for remotely pulling swagger documents.",id:"22-enable-the-global-switch-for-remotely-pulling-swagger-documents",level:3},{value:"3. Run the Sample Project",id:"3-run-the-sample-project",level:2},{value:"4. Demonstration Effect",id:"4-demonstration-effect",level:2},{value:"4.1 List of API Documents",id:"41-list-of-api-documents",level:3},{value:"4.2 API Details Effect",id:"42-api-details-effect",level:3},{value:"5. How to Automatically Update API Documentation",id:"5-how-to-automatically-update-api-documentation",level:2},{value:"5.1 Restart Project",id:"51-restart-project",level:3},{value:"5.2 Modify the startup time of the proxy plugin selector.",id:"52-modify-the-startup-time-of-the-proxy-plugin-selector",level:3}];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["This article introduces how to aggregate the ",(0,i.jsx)(t.code,{children:"Swagger API documentation"})," of each backend microservice to the ",(0,i.jsx)(t.code,{children:"Apache ShenYu"})," gateway management system."]}),"\n",(0,i.jsx)(t.h2,{id:"1-description",children:"1. Description"}),"\n",(0,i.jsx)(t.p,{children:"Remotely pull swagger documents, currently only supports swagger2.0, and only supports Divide and SpringCloud proxy plug-ins."}),"\n",(0,i.jsx)(t.h2,{id:"2-environment-preparation",children:"2. Environment Preparation"}),"\n",(0,i.jsxs)(t.h3,{id:"21-run-shenyu-admin",children:["2.1 Run ",(0,i.jsx)(t.code,{children:"shenyu-admin"})]}),"\n",(0,i.jsxs)(t.p,{children:["Please refer to the ",(0,i.jsx)(t.code,{children:"deployment"})," document, choose a way to run ",(0,i.jsx)(t.code,{children:"shenyu-admin"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"22-enable-the-global-switch-for-remotely-pulling-swagger-documents",children:"2.2 Enable the global switch for remotely pulling swagger documents."}),"\n",(0,i.jsxs)(t.p,{children:["It is enabled by default. In the ",(0,i.jsx)(t.code,{children:"Apache ShenYu"})," gateway management system --\x3e BasicConfig --\x3e Dictionary, find the data whose DictionaryType is ",(0,i.jsx)(t.code,{children:"apidoc"}),", and modify the dictionary value: ",(0,i.jsx)(t.code,{children:"true"}),"."]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:["\u3010Notice\u3011DictionaryValue: ",(0,i.jsx)(t.code,{children:"true"})," means the switch is on, ",(0,i.jsx)(t.code,{children:"false"})," means it is off. If it is closed, ",(0,i.jsx)(t.code,{children:"shenyu-admin"})," will not automatically pull the swagger documents of each microservice."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"apidoc-dictionary-en",src:n(69427).A+"",width:"2800",height:"1322"})}),"\n",(0,i.jsx)(t.h2,{id:"3-run-the-sample-project",children:"3. Run the Sample Project"}),"\n",(0,i.jsxs)(t.p,{children:["3.1. Download ",(0,i.jsx)(t.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-http-swagger2",children:"shenyu-examples-http-swagger2"})]}),"\n",(0,i.jsxs)(t.p,{children:["3.2. Run ",(0,i.jsx)(t.code,{children:"org.apache.shenyu.examples.http.ShenyuTestSwaggerApplication"})," main method to start the project."]}),"\n",(0,i.jsxs)(t.p,{children:["The examples project will synchronize the service startup information to ",(0,i.jsx)(t.code,{children:"shenyu-admin"})," through the Shenyu client annotation (such as ",(0,i.jsx)(t.code,{children:"@ShenyuSpringMvcClient"}),") according to the address configured by ",(0,i.jsx)(t.code,{children:"shenyu.register.serverLists"}),", and then trigger ",(0,i.jsx)(t.code,{children:"shenyu-admin"})," to remotely pull the swagger document And complete the analysis, and finally aggregate to produce a new API document."]}),"\n",(0,i.jsx)(t.h2,{id:"4-demonstration-effect",children:"4. Demonstration Effect"}),"\n",(0,i.jsx)(t.h3,{id:"41-list-of-api-documents",children:"4.1 List of API Documents"}),"\n",(0,i.jsxs)(t.p,{children:["In ",(0,i.jsx)(t.code,{children:"Apache ShenYu"})," Gateway Management System --\x3e Document --\x3e API Document, you can see the aggregated API documents."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"apidoc-swagger-list-en",src:n(75772).A+"",width:"1874",height:"856"})}),"\n",(0,i.jsx)(t.h3,{id:"42-api-details-effect",children:"4.2 API Details Effect"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"apidoc-detail-en",src:n(60658).A+"",width:"1659",height:"955"})}),"\n",(0,i.jsx)(t.h2,{id:"5-how-to-automatically-update-api-documentation",children:"5. How to Automatically Update API Documentation"}),"\n",(0,i.jsx)(t.h3,{id:"51-restart-project",children:"5.1 Restart Project"}),"\n",(0,i.jsx)(t.p,{children:"As in the example above, an automatic update of the API docs is triggered by starting the project."}),"\n",(0,i.jsx)(t.h3,{id:"52-modify-the-startup-time-of-the-proxy-plugin-selector",children:"5.2 Modify the startup time of the proxy plugin selector."}),"\n",(0,i.jsx)(t.p,{children:"In the PlugiList --\x3e Proxy --\x3e selector, find the target service, and then modify the startup time."}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.p,{children:"Note: The startup time of the new setting must not be earlier than the original startup time, otherwise the API document will not be automatically pulled and refreshed."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"app-proxy-startuptime-en",src:n(23149).A+"",width:"1598",height:"901"})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},75772:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/apidoc-swagger-list-en-1eb2c525a7c0e2ab6a955d91b42982c3.png"}}]);