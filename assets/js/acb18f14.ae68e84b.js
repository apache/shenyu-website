"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[99961],{28453(e,t,n){n.d(t,{R:()=>c,x:()=>r});var a=n(96540);const i={},s=a.createContext(i);function c(e){const t=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),a.createElement(s.Provider,{value:t},e.children)}},35759(e,t,n){n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"design/meta-data","title":"MetaData Concept Design","description":"MetaData Concept Design","source":"@site/versioned_docs/version-2.3.0-Legacy/design/meta-data.md","sourceDirName":"design","slug":"/design/meta-data","permalink":"/docs/2.3.0-Legacy/design/meta-data","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.3.0-Legacy/design/meta-data.md","tags":[],"version":"2.3.0-Legacy","frontMatter":{"title":"MetaData Concept Design","keywords":["soul"],"description":"MetaData Concept Design"},"sidebar":"tutorialSidebar","previous":{"title":"Data Synchronization Design","permalink":"/docs/2.3.0-Legacy/design/data-sync"},"next":{"title":"Dict Management","permalink":"/docs/2.3.0-Legacy/admin/dictionary-management"}}');var i=n(74848),s=n(28453);const c={title:"MetaData Concept Design",keywords:["soul"],description:"MetaData Concept Design"},r=void 0,o={},d=[{value:"Description",id:"description",level:2},{value:"Technical Solutions",id:"technical-solutions",level:2},{value:"MetaData Storage",id:"metadata-storage",level:2}];function l(e){const t={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"This article mainly explains the concept,design of metadata and how to connect in the soul gateway."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"technical-solutions",children:"Technical Solutions"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Add a new table in the database,and data can synchronize to the JVM memory of gateway according to the data synchronization scheme."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Table Structure:"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"CREATE TABLE  IF NOT EXISTS `meta_data` (\n  `id` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'id',\n  `app_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'application name',\n  `path` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'path,not repeatable',\n  `path_desc` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'path description',\n  `rpc_type` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'rpc type',\n  `service_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT 'service name',\n  `method_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT 'method name',\n  `parameter_types` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT 'multiple parameter types, split by comma',\n  `rpc_ext` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT 'rpc extension information,json format',\n  `date_created` datetime(0) NOT NULL COMMENT 'create date',\n  `date_updated` datetime(0) NOT NULL ON UPDATE CURRENT_TIMESTAMP(0) COMMENT 'update date',\n  `enabled` tinyint(4) NOT NULL DEFAULT 0 COMMENT 'enable status',\n  PRIMARY KEY (`id`) USING BTREE\n) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;\n\n"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Metadata design as below,the most important is using it in dubbo's generalization call."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Pay attention to the field ",(0,i.jsx)(t.code,{children:"path"}),",we will match specific data according to your field path during requesting gateway,and then carry out the follow-up process."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Pay attention to the field ",(0,i.jsx)(t.code,{children:"rpc_ext"}),",if it is a dubbo service interface and service interface has group and version field,this field exists."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"dubbo field structure as below,then we store json format string."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"   public static class RpcExt {  \n      private String group;\n      private String version;\n      private String loadbalance;\n      private Integer retries;\n      private Integer timeout;\n   }\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"metadata-storage",children:"MetaData Storage"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"A dubbo interface corresponds to a meta data."}),"\n",(0,i.jsxs)(t.li,{children:["SpringCloud protocol, only store one record, path: ",(0,i.jsx)(t.code,{children:"/contextPath/**"}),"."]}),"\n",(0,i.jsx)(t.li,{children:"Http service, no data."}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);