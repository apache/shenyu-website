"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[429],{426(e,t,n){n.d(t,{A:()=>l});const l=n.p+"assets/images/logging-option-topic-bea02b4cebee0533b5aa8ddd438d1eb9.png"},7818(e,t,n){n.d(t,{A:()=>l});const l=n.p+"assets/images/logging-config-en-2d08ddb2fde45effd73f6de8dcf9677c.png"},13116(e,t,n){n.d(t,{A:()=>l});const l=n.p+"assets/images/logging-config-7d106f4fbe790030983a05d502a4279d.png"},25648(e,t,n){n.d(t,{A:()=>l});const l=n.p+"assets/images/logging-kafka-arch-86d15893445535929a2c02c5c9f2d181.jpg"},26716(e,t,n){n.d(t,{A:()=>l});const l=n.p+"assets/images/log-rule-en-ba4ee123192df9f3790a4383c0805c80.png"},28453(e,t,n){n.d(t,{R:()=>r,x:()=>d});var l=n(96540);const i={},s=l.createContext(i);function r(e){const t=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),l.createElement(s.Provider,{value:t},e.children)}},33507(e,t,n){n.d(t,{A:()=>l});const l=n.p+"assets/images/logging-config-cn-38036184d6385744163b25162b0fe581.png"},36211(e,t,n){n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>g,frontMatter:()=>r,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"plugin-center/observability/logging-kafka","title":"Logging-Kafka Plugin","description":"Logging-Kafka Plugin","source":"@site/versioned_docs/version-2.5.1/plugin-center/observability/logging-kafka.md","sourceDirName":"plugin-center/observability","slug":"/plugin-center/observability/logging-kafka","permalink":"/docs/2.5.1/plugin-center/observability/logging-kafka","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.5.1/plugin-center/observability/logging-kafka.md","tags":[],"version":"2.5.1","frontMatter":{"title":"Logging-Kafka Plugin","keywords":["Logging","kafka"],"description":"Logging-Kafka Plugin"},"sidebar":"tutorialSidebar","previous":{"title":"Logging-ElasticSearch Plugin","permalink":"/docs/2.5.1/plugin-center/observability/logging-elasticsearch"},"next":{"title":"Logging Plugin","permalink":"/docs/2.5.1/plugin-center/observability/logging-plugin"}}');var i=n(74848),s=n(28453);const r={title:"Logging-Kafka Plugin",keywords:["Logging","kafka"],description:"Logging-Kafka Plugin"},d="1. Overview",o={},c=[{value:"1.1 Plugin Name",id:"11-plugin-name",level:2},{value:"1.2 Appropriate Scenario",id:"12-appropriate-scenario",level:2},{value:"1.3 Plugin functionality",id:"13-plugin-functionality",level:2},{value:"1.4 Plugin code",id:"14-plugin-code",level:2},{value:"1.5 Added Since Which shenyu version",id:"15-added-since-which-shenyu-version",level:2},{value:"1.6 Technical Solutions",id:"16-technical-solutions",level:2},{value:"2.1 Plugin-use procedure chart",id:"21-plugin-use-procedure-chart",level:2},{value:"2.2 Import pom",id:"22-import-pom",level:2},{value:"2.3 Enable plugin",id:"23-enable-plugin",level:2},{value:"2.4 Config plugin",id:"24-config-plugin",level:2},{value:"2.4.1 Open the plugin and configure kafka, configure it as follows.",id:"241-open-the-plugin-and-configure-kafka-configure-it-as-follows",level:3},{value:"2.4.2 Configuring Selectors and Rulers",id:"242-configuring-selectors-and-rulers",level:3},{value:"2.5 Logging Info",id:"25-logging-info",level:2},{value:"2.6 Examples",id:"26-examples",level:2},{value:"2.6.1 Collect Http Log by Kafka",id:"261-collect-http-log-by-kafka",level:3},{value:"2.6.1.1 Plugin Configuration",id:"2611-plugin-configuration",level:4},{value:"2.6.1.2 Selector Configuration",id:"2612-selector-configuration",level:4},{value:"2.6.1.3 Rule Configuration",id:"2613-rule-configuration",level:4},{value:"2.6.1.4 Request Service",id:"2614-request-service",level:4},{value:"2.6.1.5 Consumption and display of Logging",id:"2615-consumption-and-display-of-logging",level:4}];function a(e){const t={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"1-overview",children:"1. Overview"})}),"\n",(0,i.jsx)(t.h2,{id:"11-plugin-name",children:"1.1 Plugin Name"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Logging-Kafka Plugin"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"12-appropriate-scenario",children:"1.2 Appropriate Scenario"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"collect http request log to Kafka, consume Kafka message to another application and analysis."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"13-plugin-functionality",children:"1.3 Plugin functionality"}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"Apache ShenYu"})," The gateway receives requests from the client, forwards them to the server, and returns the server results to the client. The gateway can record the details of each request\uff0c",(0,i.jsx)(t.br,{}),"\n","The list includes: request time, request parameters, request path, response result, response status code, time consumption, upstream IP, exception information waiting.",(0,i.jsx)(t.br,{}),"\n","The Logging-Kafka plugin is a plugin that records access logs and sends them to the Kafka cluster."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"14-plugin-code",children:"1.4 Plugin code"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Core Module ",(0,i.jsx)(t.code,{children:"shenyu-plugin-logging-kafka"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Core Class ",(0,i.jsx)(t.code,{children:"org.apache.shenyu.plugin.logging.kafka.LoggingKafkaPlugin"})]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Core Claas ",(0,i.jsx)(t.code,{children:"org.apache.shenyu.plugin.logging.kafka.client.KafkaLogCollectClient"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"15-added-since-which-shenyu-version",children:"1.5 Added Since Which shenyu version"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Since ShenYu 2.5.0"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"16-technical-solutions",children:"1.6 Technical Solutions"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Architecture Diagram"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(25648).A+"",width:"1348",height:"454"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Full asynchronous collection and delivery of ",(0,i.jsx)(t.code,{children:"Logging"})," inside the ",(0,i.jsx)(t.code,{children:"Apache ShenYu"})," gateway"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Logging platform by consuming the logs in the ",(0,i.jsx)(t.code,{children:"Kafka"})," cluster for repository, and then using ",(0,i.jsx)(t.code,{children:"Grafana"}),", ",(0,i.jsx)(t.code,{children:"Kibana"})," or other visualization platform to display"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.h1,{id:"2-how-to-use-plugin",children:"2. How to use plugin"}),"\n",(0,i.jsx)(t.h2,{id:"21-plugin-use-procedure-chart",children:"2.1 Plugin-use procedure chart"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(64786).A+"",width:"353",height:"593"})}),"\n",(0,i.jsx)(t.h2,{id:"22-import-pom",children:"2.2 Import pom"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Add the ",(0,i.jsx)(t.code,{children:"Logging-Kafka"})," dependency to the gateway's ",(0,i.jsx)(t.code,{children:"pom.xml"})," file."]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-xml",children:"\x3c!--shenyu logging-kafka plugin start--\x3e\n<dependency>\n    <groupId>org.apache.shenyu</groupId>\n    <artifactId>shenyu-spring-boot-starter-plugin-logging-kafka</artifactId>\n    <version>${project.version}</version>\n</dependency>\n\x3c!--shenyu logging-kafka plugin end--\x3e\n"})}),"\n",(0,i.jsx)(t.h2,{id:"23-enable-plugin",children:"2.3 Enable plugin"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["In ",(0,i.jsx)(t.code,{children:"shenyu-admin"})," --\x3e Basic Configuration --\x3e Plugin Management --\x3e ",(0,i.jsx)(t.code,{children:"loggingKafka"}),", configure the kafka parameter and set it to on."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"24-config-plugin",children:"2.4 Config plugin"}),"\n",(0,i.jsx)(t.h3,{id:"241-open-the-plugin-and-configure-kafka-configure-it-as-follows",children:"2.4.1 Open the plugin and configure kafka, configure it as follows."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(7818).A+"",width:"2559",height:"1143"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"The individual configuration items are described as follows:"}),"\n"]}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"}}),(0,i.jsx)(t.th,{style:{textAlign:"left"}}),(0,i.jsx)(t.th,{style:{textAlign:"left"}}),(0,i.jsx)(t.th,{style:{textAlign:"left"}})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"config-item"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"type"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"description"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"remarks"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"topic"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"String"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Message Queue Topics"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"must"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"namesrvAddr"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"String"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Message queue nameserver address"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"must"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"sampleRate"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"String"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Sampling rate, range 0~1, 0: off, 0.01: acquisition 1%, 1: acquisition 100%"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Optional, default 1, all collection"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"compressAlg"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"String"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Compression algorithm, no compression by default, currently supports LZ4 compression"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Optional, no compression by default"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"maxResponseBody"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Ingeter"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Maximum response size, above the threshold no response will be collected"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Optional, default 512KB"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"maxRequestBody"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Ingeter"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Maximum request body size, above the threshold no request body will be collected"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Optional, default 512KB"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:'Except for topic, namesrvAddr, all others are optional, in most cases only these 3 items need to be configured. The default group id is "shenyu-access-logging"'}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,i.jsx)(t.h3,{id:"242-configuring-selectors-and-rulers",children:"2.4.2 Configuring Selectors and Rulers"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["For detailed configuration of selectors and rules, please refer to: ",(0,i.jsx)(t.a,{href:"../../user-guide/admin-usage/selector-and-rule",children:"Selector and rule management"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["In addition sometimes a large gateway cluster corresponds to multiple applications (business), different applications (business) corresponds to different topics, related to isolation,",(0,i.jsx)(t.br,{}),"\n","then you can configure different topics (optional) and sampling rate (optional) by selector, the meaning of the configuration items as shown in the table above.",(0,i.jsx)(t.br,{}),"\n","The operation is shown below:\n",(0,i.jsx)(t.img,{src:n(13116).A+"",width:"2539",height:"1133"})]}),"\n",(0,i.jsx)(t.h2,{id:"25-logging-info",children:"2.5 Logging Info"}),"\n",(0,i.jsx)(t.p,{children:"collect request info as follows"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Field Name"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Meaning"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Remarks"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"clientIp"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Client IP"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"timeLocal"}),(0,i.jsxs)(t.td,{style:{textAlign:"center"},children:["Request time string, format: yyyy-MM-dd HH:mm",":ss",".SSS"]}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"method"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"request method (different rpc type is not the same, http class for: get, post wait, rpc class for the interface name)"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"requestHeader"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Request header (json format)"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"responseHeader"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Response header (json format)"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"queryParams"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Request query parameters"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"requestBody"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Request Body (body of binary type will not be captured)"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"requestUri"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Request uri"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"responseBody"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Response body"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"responseContentLength"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Response body size"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"rpcType"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"rpc type"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"status"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"response status"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"upstreamIp"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Upstream (program providing the service) IP"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"upstreamResponseTime"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Time taken by the upstream (program providing the service) to respond to the request (ms ms)"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"userAgent"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Requested user agent"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"host"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"The requested host"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"module"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Requested modules"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"path"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"The requested path"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"traceId"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:"Requested Link Tracking ID"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Need to access link tracking plugins, such as skywalking,zipkin"}),(0,i.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"26-examples",children:"2.6 Examples"}),"\n",(0,i.jsx)(t.h3,{id:"261-collect-http-log-by-kafka",children:"2.6.1 Collect Http Log by Kafka"}),"\n",(0,i.jsx)(t.h4,{id:"2611-plugin-configuration",children:"2.6.1.1 Plugin Configuration"}),"\n",(0,i.jsx)(t.p,{children:"Open the plugin and configure kafka, configure it as follows."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(33507).A+"",width:"2736",height:"1526"})}),"\n",(0,i.jsx)(t.h4,{id:"2612-selector-configuration",children:"2.6.1.2 Selector Configuration"}),"\n",(0,i.jsxs)(t.p,{children:["For detailed configuration of selectors and rules, please refer to: ",(0,i.jsx)(t.a,{href:"../../user-guide/admin-usage/selector-and-rule",children:"Selector and rule management"}),"\u3002"]}),"\n",(0,i.jsxs)(t.p,{children:["In addition sometimes a large gateway cluster corresponds to multiple applications (business), different applications (business) corresponds to different topics, related to isolation,",(0,i.jsx)(t.br,{}),"\n","then you can configure different topics (optional) and samplingf rate (optional) by selector, the meaning of the configuration items as shown in the table above.",(0,i.jsx)(t.br,{}),"\n","The operation is shown below:\n",(0,i.jsx)(t.img,{src:n(426).A+"",width:"2736",height:"1504"})]}),"\n",(0,i.jsx)(t.h4,{id:"2613-rule-configuration",children:"2.6.1.3 Rule Configuration"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(26716).A+"",width:"2734",height:"1522"})}),"\n",(0,i.jsx)(t.h4,{id:"2614-request-service",children:"2.6.1.4 Request Service"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(69983).A+"",width:"618",height:"512"})}),"\n",(0,i.jsx)(t.h4,{id:"2615-consumption-and-display-of-logging",children:"2.6.1.5 Consumption and display of Logging"}),"\n",(0,i.jsxs)(t.p,{children:["As each logging platform has differences, such as storage available clickhouse, ElasticSearch, etc., visualization has self-developed or open source Grafana, Kibana, etc..",(0,i.jsx)(t.br,{}),"\n","Logging-Kafka plugin uses Kafka to decouple production and consumption, while outputting logs in json format,\nconsumption and visualization require users to choose different technology stacks to achieve their own situation.="]}),"\n",(0,i.jsx)(t.h1,{id:"3-how-to-disable-plugin",children:"3. How to disable plugin"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["In ",(0,i.jsx)(t.code,{children:"shenyu-admin"})," --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,i.jsx)(t.code,{children:"loggingKafka"})," set Status disable."]}),"\n"]})]})}function g(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},64786(e,t,n){n.d(t,{A:()=>l});const l=n.p+"assets/images/loggingConsole-use-en-64a3c389309209c07d4ae4602e0e3895.png"},69983(e,t,n){n.d(t,{A:()=>l});const l=n.p+"assets/images/call-service-ceeafb89bf58792af70883bdaedbcb93.png"}}]);