<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2.7.0 docs-doc-page docs-doc-id-user-guide/discovery/discovery-mode" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Discovery | Apache ShenYu</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://shenyu.apache.org/docs/2.7.0/user-guide/discovery/discovery-mode"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.7.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.7.0"><meta data-rh="true" name="docsearch:version" content="2.7.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.7.0"><meta data-rh="true" property="og:title" content="Discovery | Apache ShenYu"><meta data-rh="true" name="description" content="Discovery"><meta data-rh="true" property="og:description" content="Discovery"><meta data-rh="true" name="keywords" content="Discovery"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://shenyu.apache.org/docs/2.7.0/user-guide/discovery/discovery-mode"><link data-rh="true" rel="alternate" href="https://shenyu.apache.org/docs/2.7.0/user-guide/discovery/discovery-mode" hreflang="en"><link data-rh="true" rel="alternate" href="https://shenyu.apache.org/zh/docs/2.7.0/user-guide/discovery/discovery-mode" hreflang="zh"><link data-rh="true" rel="alternate" href="https://shenyu.apache.org/docs/2.7.0/user-guide/discovery/discovery-mode" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Discovery","item":"https://shenyu.apache.org/docs/2.7.0/user-guide/discovery/discovery-mode"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache ShenYu RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache ShenYu Atom Feed">












<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="Apache ShenYu RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="Apache ShenYu Atom Feed">

<script src="/js/error-suppression.js"></script><link rel="stylesheet" href="/assets/css/styles.5a6c781d.css">
<script src="/assets/js/runtime~main.3f865a33.js" defer="defer"></script>
<script src="/assets/js/main.b9df4dd9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Apache ShenYu Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-light.svg" alt="Apache ShenYu Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/download">Download</a><a class="navbar__item navbar__link" href="/document">Docs</a><a class="navbar__item navbar__link" href="/community/contributor-guide">Community</a><a class="navbar__item navbar__link" href="/team">Team</a><a class="navbar__item navbar__link" href="/event">Event</a><a class="navbar__item navbar__link" href="/news">News</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/users">Users</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/policies/privacy.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><a href="https://github.com/apache/shenyu" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/2.7.0/user-guide/discovery/discovery-mode" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/2.7.0/user-guide/discovery/discovery-mode" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/2.7.0/"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.7.0/design/database-design"><span title="Design" class="categoryLinkLabel_W154">Design</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.7.0/deployment/deployment-before"><span title="Deployment" class="categoryLinkLabel_W154">Deployment</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.7.0/quick-start/quick-start-dubbo"><span title="Quick Start" class="categoryLinkLabel_W154">Quick Start</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/2.7.0/user-guide/admin-usage/api-document"><span title="User Guide" class="categoryLinkLabel_W154">User Guide</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/2.7.0/user-guide/admin-usage/api-document"><span title="Admin Usage" class="categoryLinkLabel_W154">Admin Usage</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/2.7.0/user-guide/property-config/admin-property-config"><span title="Property Config" class="categoryLinkLabel_W154">Property Config</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/2.7.0/user-guide/sdk-usage/shenyu-sdk-consul"><span title="Shenyu-Sdk Usage" class="categoryLinkLabel_W154">Shenyu-Sdk Usage</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/2.7.0/user-guide/discovery/discovery-mode"><span title="Discovery" class="categoryLinkLabel_W154">Discovery</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.7.0/user-guide/discovery/discovery-mode"><span title="Discovery" class="linkLabel_WmDU">Discovery</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/2.7.0/user-guide/proxy/dubbo-proxy"><span title="Quick Connect to Your Service" class="categoryLinkLabel_W154">Quick Connect to Your Service</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/2.7.0/user-guide/kubernetes-controller/build-deploy"><span title="Kubernetes Controller" class="categoryLinkLabel_W154">Kubernetes Controller</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/2.7.0/user-guide/api-doc/shenyu-annotation-apidoc"><span title="API Document Aggregation" class="categoryLinkLabel_W154">API Document Aggregation</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.7.0/plugin-center/http-process/contextpath-plugin"><span title="Plugin Center" class="categoryLinkLabel_W154">Plugin Center</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/2.7.0/developer/spi/custom-load-balance"><span title="Developer" class="categoryLinkLabel_W154">Developer</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/2.7.0/benchmark-test/"><span title="Benchmark Test" class="linkLabel_WmDU">Benchmark Test</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache ShenYu<!-- --> <b>2.7.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/user-guide/discovery/discovery-mode">latest version</a></b> (<!-- -->2.7.0.3<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">User Guide</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Discovery</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Discovery</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.7.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Discovery</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-overview">1. Overview<a href="#1-overview" class="hash-link" aria-label="Direct link to 1. Overview" title="Direct link to 1. Overview" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="11-module-name">1.1 Module Name<a href="#11-module-name" class="hash-link" aria-label="Direct link to 1.1 Module Name" title="Direct link to 1.1 Module Name" translate="no">​</a></h3>
<p>Discovery</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="12-design">1.2 Design<a href="#12-design" class="hash-link" aria-label="Direct link to 1.2 Design" title="Direct link to 1.2 Design" translate="no">​</a></h3>
<ul>
<li class="">Module Design Diagram</li>
</ul>
<p><img decoding="async" loading="lazy" alt="discovery-design.png" src="/assets/images/discovery-design-3081f14fec1ef9322d39bd1b998f42a3.png" width="1005" height="638" class="img_ev3q"></p>
<ul>
<li class="">Database Design</li>
</ul>
<p><img decoding="async" loading="lazy" alt="db-design.png" src="/assets/images/db-design-ace76c69c809afe5bf47464fc1b0209c.png" width="494" height="412" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="13-module-functionality">1.3 Module Functionality<a href="#13-module-functionality" class="hash-link" aria-label="Direct link to 1.3 Module Functionality" title="Direct link to 1.3 Module Functionality" translate="no">​</a></h3>
<p>The Discovery module endows the ShenYu Gateway with the ability to actively perceive and respond to changes in the list of services being proxied.
By actively listening to the admin service of the Discovery Gateway, the ShenYu Gateway can promptly track changes in the services being proxied.
This functionality is designed to be flexible and can be configured at either <strong>the selector level or the plugin level</strong>, as needed.
Currently, plugins that have incorporated the Discovery feature include TCP, Divide, Websocket and gRPC plugins.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="14-listening-mode">1.4 Listening Mode<a href="#14-listening-mode" class="hash-link" aria-label="Direct link to 1.4 Listening Mode" title="Direct link to 1.4 Listening Mode" translate="no">​</a></h3>
<p>LOCAL, ZOOKEEPER, NACOS, EUREKA, ETCD</p>
<ul>
<li class="">LOCAL Mode: Primarily relies on manual maintenance of the upstream list and pushing it to the gateway.</li>
<li class="">ZOOKEEPER Mode: Monitors changes in ephemeral nodes under a specified node in ZooKeeper to obtain data.</li>
<li class="">NACOS Mode: Listens for changes in instances under a specified service name in Nacos to obtain data.</li>
<li class="">EUREKA Mode: Listens for changes in instances under a specified service name in Eureka to obtain data.</li>
<li class="">ETCD Mode: Obtains data by monitoring changes in key-value pairs under specified nodes in etcd.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="15-scope-of-effect">1.5 Scope of Effect<a href="#15-scope-of-effect" class="hash-link" aria-label="Direct link to 1.5 Scope of Effect" title="Direct link to 1.5 Scope of Effect" translate="no">​</a></h3>
<ul>
<li class="">Plugin Level: Impacts the entire plugin,
and all selectors under that plugin will default to the current listening mode.</li>
<li class="">Selector Level: Applies to the current selector,
allowing different selectors under the same plugin to use different listening modes.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-usage">2. Usage<a href="#2-usage" class="hash-link" aria-label="Direct link to 2. Usage" title="Direct link to 2. Usage" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="21-plugin-level-configuration">2.1 Plugin-Level Configuration<a href="#21-plugin-level-configuration" class="hash-link" aria-label="Direct link to 2.1 Plugin-Level Configuration" title="Direct link to 2.1 Plugin-Level Configuration" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="211-service-discovery-configuration">2.1.1 Service Discovery Configuration<a href="#211-service-discovery-configuration" class="hash-link" aria-label="Direct link to 2.1.1 Service Discovery Configuration" title="Direct link to 2.1.1 Service Discovery Configuration" translate="no">​</a></h4>
<ul>
<li class="">In plugins that support the Discovery module (currently, only the TCP plugin supports plugin-level discovery
configuration on the admin console page; other plugins can configure plugin-level discovery through shenyu-client,
as described in the &quot;Using Shenyu-client&quot; section below), click on <code>Discovery Configuration</code>. In the popup form,
select the desired listening mode and fill in the service discovery name, registration server URL, registry configuration parameters, etc.:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="config-discovery-plugin-en.png" src="/assets/images/config-discovery-plugin-en-03817c824ab97b6f6144141cfbb5750f.png" width="3004" height="1640" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="config-discovery-plugin-modal-en.png" src="/assets/images/config-discovery-plugin-modal-en-5922e43048c244e8dcd8b3eab8ad8d9b.png" width="3018" height="1646" class="img_ev3q"></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="212-usage-within-selectors">2.1.2 Usage within Selectors<a href="#212-usage-within-selectors" class="hash-link" aria-label="Direct link to 2.1.2 Usage within Selectors" title="Direct link to 2.1.2 Usage within Selectors" translate="no">​</a></h4>
<ul>
<li class="">
<p>To add a new selector, click on <code>Add Selector</code>. In the new selector page, you will notice that the <code>Type</code> field enforces the previously configured plugin-level listening mode,
indicating that the added selector will also adopt the same configuration.
At this point, simply input the desired <code>ListeningNode</code>:</p>
<p><img decoding="async" loading="lazy" alt="add-selector-under-plugin-discovery-en.png" src="/assets/images/add-selector-under-plugin-discovery-en-bdd4aaafdff4e9cce7a2df86d5472e85.png" width="3010" height="1644" class="img_ev3q"></p>
</li>
<li class="">
<p>The <code>Handler</code> here refers to ShenYu&#x27;s specified JSON format for transmitting upstream registration data,
as shown below:</p>
<ul>
<li class="">url: URL of the upstream</li>
<li class="">protocol: communication protocol of the upstream</li>
<li class="">status: status of the upstream node (0 for healthy, 1 for unhealthy)</li>
<li class="">weight: Used for load balancing calculations</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1::6379&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;protocol&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tcp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;weight&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>If your service alias does not match ShenYu&#x27;s defined JSON format,
you can perform alias mapping in <code>Handler</code>.
For example, as shown in the above image,
if you need to change <code>status</code> to &quot;healthy&quot; while keeping other keys unchanged,
follow these steps: create a new alias, map <code>status</code> to <code>healthy</code>,
and retain the original JSON keys&#x27; format.</p>
</li>
<li class="">
<p>Configure the remaining properties for the selector according to the specific plugin&#x27;s documentation.</p>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="22-selector-level-configuration">2.2 Selector-Level Configuration<a href="#22-selector-level-configuration" class="hash-link" aria-label="Direct link to 2.2 Selector-Level Configuration" title="Direct link to 2.2 Selector-Level Configuration" translate="no">​</a></h3>
<ul>
<li class="">In plugins that support the Discovery module, click on <code>Add Selector</code>.
In the <code>Discovery Config</code> tab, configure the fields such as type,
listening node, server URL list, and registry properties.
This configuration only applies to the current selector and must be reconfigured each time a new selector is added.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="add-selector-en.png" src="/assets/images/add-selector-en-f69527e00c21591f8f22a3c8c46c1dbb.png" width="2826" height="1458" class="img_ev3q"></p>
<ul>
<li class="">For the Divide, gRPC, and Websocket plugins,
the <code>Import Background Discovery Config</code> function on the selector creation page
allows you to import and use the backend configuration if the service connecting to the ShenYu Gateway
was configured with shenyu-discovery-related properties (see usage with shenyu-client).
As shown in the following image, click <code>Import Background Discovery Config</code> to view the backend configuration:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="config-import-en.png" src="/assets/images/config-import-en-520151b4311fdd295879ae00da086657.png" width="2820" height="1454" class="img_ev3q"></p>
<ul>
<li class="">If you confirm the import, clicking the <code>Import</code> button in the backend configuration popup will automatically populate the form with the backend service discovery properties.
At this point, you only need to configure the listening node:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="after-import-en.png" src="/assets/images/after-import-en-1080a3e988b4efde089dddc3366ec4d0.png" width="2826" height="1458" class="img_ev3q"></p>
<blockquote>
<p><strong>Note</strong>: If you confirm importing the backend configuration,
the backend service discovery properties will be automatically filled in the form and will continue to use the previous discovery object.
In this case, modifying service discovery properties in the form will be ineffective, and the backend configuration will be retained.</p>
</blockquote>
<ul>
<li class="">If you choose the LOCAL mode, there is no need to connect to a registry, and users must manually maintain the upstream list.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-configuration-in-different-modes">3. Configuration in Different Modes<a href="#3-configuration-in-different-modes" class="hash-link" aria-label="Direct link to 3. Configuration in Different Modes" title="Direct link to 3. Configuration in Different Modes" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="31-local-mode">3.1 Local Mode<a href="#31-local-mode" class="hash-link" aria-label="Direct link to 3.1 Local Mode" title="Direct link to 3.1 Local Mode" translate="no">​</a></h3>
<ul>
<li class="">Local mode only supports configuration at the <strong>selector level</strong>.
There is no need to connect to a registry, and users must manually maintain the upstream list.
This list is an editable table. Click the <code>Edit</code> button for each row in the table to modify each parameter of the upstream:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="local-selector-en.png" src="/assets/images/local-selector-en-94c6799b40684d6d04f8fc1cd8943fd2.png" width="2818" height="1456" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="32-zookeepernacoseurekaetcd-modes">3.2 ZooKeeper/Nacos/Eureka/Etcd Modes<a href="#32-zookeepernacoseurekaetcd-modes" class="hash-link" aria-label="Direct link to 3.2 ZooKeeper/Nacos/Eureka/Etcd Modes" title="Direct link to 3.2 ZooKeeper/Nacos/Eureka/Etcd Modes" translate="no">​</a></h3>
<ul>
<li class="">In the ZooKeeper/Nacos/Eureka/Etcd modes, service discovery configuration is supported at both the plugin level and the selector level.</li>
<li class="">For each registry property under these modes, taking ZooKeeper as an example, users can go to <code>shenyu-admin</code> --&gt; <code>BasicConfig</code> --&gt; <code>Dictionary</code>,
search for the dictionary name &quot;zookeeper&quot;, and edit the dictionary values corresponding to the default properties
(<strong>Note</strong>: You cannot modify the dictionary type and dictionary name).</li>
<li class="">In these modes, the gateway dynamically retrieves service instance information from the registry. Additions, removals, modifications,
and other changes to service instances will be displayed in real-time in the upstream list.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="zk_dict_en.png" src="/assets/images/zk_dict_en-fd86f5888a94e38c84a97588ff295e79.png" width="1834" height="859" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-using-shenyu-client">4. Using Shenyu-client<a href="#4-using-shenyu-client" class="hash-link" aria-label="Direct link to 4. Using Shenyu-client" title="Direct link to 4. Using Shenyu-client" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="41-introduction">4.1 Introduction<a href="#41-introduction" class="hash-link" aria-label="Direct link to 4.1 Introduction" title="Direct link to 4.1 Introduction" translate="no">​</a></h3>
<ul>
<li class="">To use Shenyu-client, you need to depend on the corresponding mode&#x27;s registry middleware: ZooKeeper, Nacos, Etcd, Eureka.
These modes can automatically detect service up and down events through ShenYu Admin.</li>
<li class="">Additionally, if you are using the local mode, you will need to manually maintain the upstream list.</li>
<li class="">For detailed instructions on using Shenyu-client, refer to the Shenyu-client module documentation.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="42-local-mode-example">4.2 Local Mode Example<a href="#42-local-mode-example" class="hash-link" aria-label="Direct link to 4.2 Local Mode Example" title="Direct link to 4.2 Local Mode Example" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="421-using-shenyu-client">4.2.1 Using Shenyu-client<a href="#421-using-shenyu-client" class="hash-link" aria-label="Direct link to 4.2.1 Using Shenyu-client" title="Direct link to 4.2.1 Using Shenyu-client" translate="no">​</a></h4>
<ul>
<li class="">Shenyu-client defaults to the Local mode, so there is no need for any special discovery configuration.
It will automatically register the current service.</li>
<li class="">For services that are automatically registered, you can manually add, modify,
or delete them in the upstream list on the page:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="local-selector-en.png" src="/assets/images/local-selector-en-94c6799b40684d6d04f8fc1cd8943fd2.png" width="2818" height="1456" class="img_ev3q"></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="422-without-using-shenyu-client">4.2.2 Without Using Shenyu-client<a href="#422-without-using-shenyu-client" class="hash-link" aria-label="Direct link to 4.2.2 Without Using Shenyu-client" title="Direct link to 4.2.2 Without Using Shenyu-client" translate="no">​</a></h4>
<ul>
<li class="">If you are not using Shenyu-client, you can manually add, modify,
or delete service information on the <code>Discovery Config</code> tab under <code>Add Selector</code>:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="add-selector-local-en.png" src="/assets/images/add-selector-local-en-a27bc0cf61e1caca2e35bf405bf14079.png" width="3024" height="1648" class="img_ev3q"></p>
<ul>
<li class="">Configure other selector information:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="add-selector-basic-en.png" src="/assets/images/add-selector-basic-en-13721a2c3d5b2ff3eb923d6022249766.png" width="2808" height="1446" class="img_ev3q"></p>
<ul>
<li class="">Configure rules:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="rule-en.png" src="/assets/images/rule-en-95ac5e751ee513a5e2f1f6df880bf892.png" width="2828" height="1456" class="img_ev3q"></p>
<ul>
<li class="">Test Connection</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl http://localhost:9195/http/hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello! I&#x27;m Shenyu-Gateway System. Welcome!% </span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="42-zookeeper-mode-example">4.2 Zookeeper Mode Example<a href="#42-zookeeper-mode-example" class="hash-link" aria-label="Direct link to 4.2 Zookeeper Mode Example" title="Direct link to 4.2 Zookeeper Mode Example" translate="no">​</a></h3>
<p>(Taking the Divide plugin as an example)</p>
<ul>
<li class="">Add Dependencies</li>
</ul>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.shenyu</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shenyu-discovery-zookeeper</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${project.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.shenyu</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shenyu-spring-boot-starter-client-http</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<ul>
<li class="">Add the Following Configuration in application.yml</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">shenyu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">discovery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> zookeeper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">serverList</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">your.zookeeper.ip</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">your.zookeeper.port</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">registerPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /shenyu/discovery/demo_http_common</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">props</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">baseSleepTimeMilliseconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">maxRetries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">maxSleepTimeMilliseconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">connectionTimeoutMilliseconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">sessionTimeoutMilliseconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><br></span></code></pre></div></div>
<ul>
<li class="">Start the shenyu-examples-http service.</li>
<li class="">Once the service registration is successful,
you can view the list of automatically registered service instances on the selector page:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="zk-selector-en.png" src="/assets/images/zk-selector-en-7d96c81ae13fa7c6e837c5adf35d28d7.png" width="3024" height="1646" class="img_ev3q"></p>
<ul>
<li class="">Users can click on <code>Edit</code> in the service instance list to edit the service instance information
(Note that in non-Local mode, the URL is maintained by the registry and cannot be manually edited):</li>
</ul>
<p><img decoding="async" loading="lazy" alt="edit-zk-upstream-en.png" src="/assets/images/edit-zk-upstream-en-003302d02022263db95f1e68110f441f.png" width="2996" height="1650" class="img_ev3q"></p>
<ul>
<li class="">Test Connection</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl http://localhost:9195/http/hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello! I&#x27;m Shenyu-Gateway System. Welcome!% </span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="43-etcd-mode-example">4.3 Etcd Mode Example<a href="#43-etcd-mode-example" class="hash-link" aria-label="Direct link to 4.3 Etcd Mode Example" title="Direct link to 4.3 Etcd Mode Example" translate="no">​</a></h3>
<ul>
<li class="">Add Dependencies</li>
</ul>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.shenyu</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shenyu-discovery-etcd</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${project.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.shenyu</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shenyu-spring-boot-starter-client-http</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<ul>
<li class="">Add the Following Configuration in application.yml</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">shenyu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">discovery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> etcd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">serverList</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">your.etcd.host</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">your.etcd.port</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">registerPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /shenyu/test/http_common</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">props</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">etcdTimeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">etcdTTL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><br></span></code></pre></div></div>
<ul>
<li class="">
<p>Start the shenyu-examples-http service. Similarly, on the selector page,
you can see the list of automatically registered service instances and edit them as needed:
<img decoding="async" loading="lazy" alt="etcd-selector-en.png" src="/assets/images/etcd-selector-en-32149574a23a9f958f3c51f5a4e17800.png" width="3024" height="1650" class="img_ev3q"></p>
</li>
<li class="">
<p>Test Connection</p>
</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl http://localhost:9195/http/hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello! I&#x27;m Shenyu-Gateway System. Welcome!% </span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="44-eureka-mode-example">4.4 Eureka Mode Example<a href="#44-eureka-mode-example" class="hash-link" aria-label="Direct link to 4.4 Eureka Mode Example" title="Direct link to 4.4 Eureka Mode Example" translate="no">​</a></h3>
<ul>
<li class="">Add Dependencies</li>
</ul>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.shenyu</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shenyu-discovery-eureka</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${project.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.shenyu</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shenyu-spring-boot-starter-client-http</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<ul>
<li class="">Add the Following Configuration in application.yml
(in this context, <code>registerPath</code> can be understood as the name of the service to be monitored):</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">shenyu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">discovery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eureka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">serverList</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">your.eureka.host</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">your.eureka.port</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/eureka</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">registerPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> shenyu_discovery_demo_http_common</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">props</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">eurekaClientRefreshInterval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">eurekaClientRegistryFetchIntervalSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre></div></div>
<ul>
<li class="">Start the shenyu-examples-http service. Similarly, on the selector page,
you can see the list of automatically registered service instances and edit them as needed:</li>
</ul>
<p><img decoding="async" loading="lazy" alt="eureka-selector-en.png" src="/assets/images/eureka-selector-en-438b997614fcd24234dc72ee81d35be6.png" width="3024" height="1648" class="img_ev3q"></p>
<ul>
<li class="">Test Connection</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl http://localhost:9195/http/hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello! I&#x27;m Shenyu-Gateway System. Welcome!% </span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="45-nacos-mode-example">4.5 Nacos Mode Example<a href="#45-nacos-mode-example" class="hash-link" aria-label="Direct link to 4.5 Nacos Mode Example" title="Direct link to 4.5 Nacos Mode Example" translate="no">​</a></h3>
<ul>
<li class="">Add Dependencies</li>
</ul>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.shenyu</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shenyu-discovery-eureka</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${project.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.shenyu</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">shenyu-spring-boot-starter-client-http</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependencies</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<ul>
<li class="">Add the Following Configuration in application.yml
(Here, <code>registerPath</code> can also be understood as the name of the service to be monitored.)</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">shenyu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">discovery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nacos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">serverList</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">your.nacos.host</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">your.nacos.port</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">registerPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> shenyu_discovery_demo_http_common</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">props</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">groupName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SHENYU_GROUP</span><br></span></code></pre></div></div>
<ul>
<li class="">Start the shenyu-examples-http service. Similarly, on the selector page,
you can view the list of automatically registered service instances and edit them as needed.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="nacos-selector-en.png" src="/assets/images/nacos-selector-en-848290702d46c73d029d688e3c3c1a03.png" width="3022" height="1648" class="img_ev3q"></p>
<ul>
<li class="">Test Connection</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl http://localhost:9195/http/hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello! I&#x27;m Shenyu-Gateway System. Welcome!% </span><br></span></code></pre></div></div>
<blockquote>
<p><strong>Note</strong>：Configuring service discovery using Shenyu-client essentially configures service discovery at the plugin level.
Under the same service discovery mode, there is, in fact, only one discovery object
(meaning you can only configure the same set of type, server URL, and service discovery parameters), while multiple listening nodes can be configured.</p>
</blockquote>
<p><img decoding="async" loading="lazy" alt="ws-selector-en.png" src="/assets/images/ws-selector-en-0646fe75699ac938f415edfc2f5fcc09.png" width="2992" height="1648" class="img_ev3q"></p>
<blockquote>
<p><strong>Note</strong>：In the Divide and gRPC plugins, you can modify the protocol by configuring the protocol in the application.yml file.
The default protocol for the Websocket plugin is &#x27;ws&#x27;.</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-considerations">5. Considerations<a href="#5-considerations" class="hash-link" aria-label="Direct link to 5. Considerations" title="Direct link to 5. Considerations" translate="no">​</a></h2>
<ul>
<li class="">In local mode, you can manually modify all parameters of the upstream on the service list page.</li>
<li class="">In non-local modes, you can manually modify parameters other than URL and start time.</li>
<li class="">Manually changing the status (open/close) and weight of service instances only affects the current plugin.</li>
<li class="">For the same plugin, when configuring discovery-related parameters through Shenyu-client in the backend, it essentially configures service discovery at the plugin level. Although you can manually add selectors on the console page to configure selector-level service discovery, in reality, there is only one discovery object (meaning you can only configure the same set of type, server URL, and service discovery parameters), while multiple listening nodes can be configured.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="6-test-report">6. Test Report<a href="#6-test-report" class="hash-link" aria-label="Direct link to 6. Test Report" title="Direct link to 6. Test Report" translate="no">​</a></h2>
<p><a href="https://www.yuque.com/eureca/pgotw1/hkqkk5laubspgwl3#UojLR" target="_blank" rel="noopener noreferrer" class="">Test Report</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.7.0/user-guide/discovery/discovery-mode.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/2.7.0/user-guide/sdk-usage/shenyu-sdk-zookeeper"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using Zookeeper with Shenyu-SDK</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/2.7.0/user-guide/proxy/dubbo-proxy"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Dubbo Proxy</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-overview" class="table-of-contents__link toc-highlight">1. Overview</a><ul><li><a href="#11-module-name" class="table-of-contents__link toc-highlight">1.1 Module Name</a></li><li><a href="#12-design" class="table-of-contents__link toc-highlight">1.2 Design</a></li><li><a href="#13-module-functionality" class="table-of-contents__link toc-highlight">1.3 Module Functionality</a></li><li><a href="#14-listening-mode" class="table-of-contents__link toc-highlight">1.4 Listening Mode</a></li><li><a href="#15-scope-of-effect" class="table-of-contents__link toc-highlight">1.5 Scope of Effect</a></li></ul></li><li><a href="#2-usage" class="table-of-contents__link toc-highlight">2. Usage</a><ul><li><a href="#21-plugin-level-configuration" class="table-of-contents__link toc-highlight">2.1 Plugin-Level Configuration</a></li><li><a href="#22-selector-level-configuration" class="table-of-contents__link toc-highlight">2.2 Selector-Level Configuration</a></li></ul></li><li><a href="#3-configuration-in-different-modes" class="table-of-contents__link toc-highlight">3. Configuration in Different Modes</a><ul><li><a href="#31-local-mode" class="table-of-contents__link toc-highlight">3.1 Local Mode</a></li><li><a href="#32-zookeepernacoseurekaetcd-modes" class="table-of-contents__link toc-highlight">3.2 ZooKeeper/Nacos/Eureka/Etcd Modes</a></li></ul></li><li><a href="#4-using-shenyu-client" class="table-of-contents__link toc-highlight">4. Using Shenyu-client</a><ul><li><a href="#41-introduction" class="table-of-contents__link toc-highlight">4.1 Introduction</a></li><li><a href="#42-local-mode-example" class="table-of-contents__link toc-highlight">4.2 Local Mode Example</a></li><li><a href="#42-zookeeper-mode-example" class="table-of-contents__link toc-highlight">4.2 Zookeeper Mode Example</a></li><li><a href="#43-etcd-mode-example" class="table-of-contents__link toc-highlight">4.3 Etcd Mode Example</a></li><li><a href="#44-eureka-mode-example" class="table-of-contents__link toc-highlight">4.4 Eureka Mode Example</a></li><li><a href="#45-nacos-mode-example" class="table-of-contents__link toc-highlight">4.5 Nacos Mode Example</a></li></ul></li><li><a href="#5-considerations" class="table-of-contents__link toc-highlight">5. Considerations</a></li><li><a href="#6-test-report" class="table-of-contents__link toc-highlight">6. Test Report</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>