"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[57973],{6633(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"user-guide/proxy/tars-proxy","title":"Tars Proxy","description":"Tars Proxy","source":"@site/versioned_docs/version-2.7.0.2/user-guide/proxy/tars-proxy.md","sourceDirName":"user-guide/proxy","slug":"/user-guide/proxy/tars-proxy","permalink":"/docs/2.7.0.2/user-guide/proxy/tars-proxy","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.7.0.2/user-guide/proxy/tars-proxy.md","tags":[],"version":"2.7.0.2","frontMatter":{"title":"Tars Proxy","description":"Tars Proxy"},"sidebar":"tutorialSidebar","previous":{"title":"Spring Cloud Proxy","permalink":"/docs/2.7.0.2/user-guide/proxy/spring-cloud-proxy"},"next":{"title":"Websocket Proxy","permalink":"/docs/2.7.0.2/user-guide/proxy/websocket-proxy"}}');var t=s(74848),a=s(28453);const i={title:"Tars Proxy",description:"Tars Proxy"},o=void 0,c={},l=[{value:"Add tars plugin in gateway",id:"add-tars-plugin-in-gateway",level:2},{value:"Tars service access gateway",id:"tars-service-access-gateway",level:2},{value:"User Request",id:"user-request",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["This document is intended to help the ",(0,t.jsx)(n.code,{children:"Tars"})," service access the ",(0,t.jsx)(n.code,{children:"Apache ShenYu"})," gateway. The ",(0,t.jsx)(n.code,{children:"Apache ShenYu"})," gateway uses the ",(0,t.jsx)(n.code,{children:"tars"})," plugin to handle ",(0,t.jsx)(n.code,{children:"tars"})," service."]}),"\n",(0,t.jsxs)(n.p,{children:["Before the connection, start ",(0,t.jsx)(n.code,{children:"shenyu-admin"})," correctly, start ",(0,t.jsx)(n.code,{children:"tars"})," plugin, and add related dependencies on the gateway and ",(0,t.jsx)(n.code,{children:"tars"})," application client. Refer to the previous ",(0,t.jsx)(n.a,{href:"../../quick-start/quick-start-tars",children:"Quick start with Tars"})," ."]}),"\n",(0,t.jsxs)(n.p,{children:["For details about client access configuration, see ",(0,t.jsx)(n.a,{href:"/docs/2.7.0.2/user-guide/property-config/register-center-access",children:"Application Client Access Config"})," ."]}),"\n",(0,t.jsxs)(n.p,{children:["For details about data synchronization configurations, see ",(0,t.jsx)(n.a,{href:"/docs/2.7.0.2/user-guide/property-config/use-data-sync",children:"Data Synchronization Config"}),")."]}),"\n",(0,t.jsx)(n.h2,{id:"add-tars-plugin-in-gateway",children:"Add tars plugin in gateway"}),"\n",(0,t.jsxs)(n.p,{children:["Add the following dependencies to the gateway's ",(0,t.jsx)(n.code,{children:"pom.xml"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"        \x3c!-- apache shenyu tars plugin start--\x3e\n        <dependency>\n            <groupId>org.apache.shenyu</groupId>\n            <artifactId>shenyu-spring-boot-starter-plugin-tars</artifactId>\n            <version>${project.version}</version>\n        </dependency>\n\n        <dependency>\n            <groupId>com.tencent.tars</groupId>\n            <artifactId>tars-client</artifactId>\n            <version>1.7.2</version>\n        </dependency>\n        \x3c!-- apache shenyu tars plugin end--\x3e\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Restart your gateway service."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"tars-service-access-gateway",children:"Tars service access gateway"}),"\n",(0,t.jsxs)(n.p,{children:["Please refer to\uff1a ",(0,t.jsx)(n.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-tars",children:"shenyu-examples-tars"})]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In the microservice built by ",(0,t.jsx)(n.code,{children:"Tars"}),", add the following dependencies:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"        <dependency>\n            <groupId>org.apache.shenyu</groupId>\n            <artifactId>shenyu-spring-boot-starter-client-tars</artifactId>\n            <version>${shenyu.version}</version>\n        </dependency>\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Add the following configuration to the ",(0,t.jsx)(n.code,{children:"application.yaml"})," configuration file:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"shenyu:\n  register:\n    registerType: http #zookeeper #etcd #nacos #consul\n    serverLists: http://localhost:9095 #localhost:2181 #http://localhost:2379 #localhost:8848\n    props:\n      username: admin\n      password: 123456\n  client:\n    tars:\n      props:\n        contextPath: /tars\n        appName: tars\n        port: 21715\n        host: 192.168.41.103\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.code,{children:"@ShenyuTarsService"})," Annotation on the tars service interface implementation class and ",(0,t.jsx)(n.code,{children:"@ShenyuTarsClient"})," on the method, start your service provider, and register successfully. In the background management system, enter PluginList -> rpc proxy -> tars, you will see the automatic registration of selectors and rules information."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'    @TarsServant("HelloObj")\n    @ShenyuTarsService(serviceName = "ShenyuExampleServer.ShenyuExampleApp.HelloObj")\n    public class HelloServantImpl implements HelloServant {\n        @Override\n        @ShenyuTarsClient(path = "/hello", desc = "hello")\n        public String hello(int no, String name) {\n            return String.format("hello no=%s, name=%s, time=%s", no, name, System.currentTimeMillis());\n        }\n    \n        @Override\n        @ShenyuTarsClient(path = "/helloInt", desc = "helloInt")\n        public int helloInt(int no, String name) {\n            return 1;\n        }\n    }\n\n'})}),"\n",(0,t.jsx)(n.h2,{id:"user-request",children:"User Request"}),"\n",(0,t.jsxs)(n.p,{children:["You can request your tars service by Http. The ",(0,t.jsx)(n.code,{children:"Apache ShenYu"})," gateway needs to have a route prefix which is the ",(0,t.jsx)(n.code,{children:"contextPath"})," configured by the access gateway. For example: ",(0,t.jsx)(n.code,{children:"http://localhost:9195/tars/hello"})," ."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453(e,n,s){s.d(n,{R:()=>i,x:()=>o});var r=s(96540);const t={},a=r.createContext(t);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);