"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[38427],{15680:(e,n,r)=>{r.d(n,{xA:()=>c,yg:()=>h});var t=r(96540);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach(function(n){a(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=t.createContext({}),p=function(e){var n=t.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},c=function(e){var n=p(e.components);return t.createElement(s.Provider,{value:n},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef(function(e,n){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(r),d=a,h=u["".concat(s,".").concat(d)]||u[d]||g[d]||o;return r?t.createElement(h,i(i({ref:n},c),{},{components:r})):t.createElement(h,i({ref:n},c))});function h(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=r[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}d.displayName="MDXCreateElement"},65712:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/Mcp-server-register-en-daa12f6fee06542c61e64f8e6c587268.png"},74405:(e,n,r)=>{r.r(n),r.d(n,{contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var t=r(58168),a=(r(96540),r(15680));const o={title:"McpServer Plugin Source Code Analysis",author:"yusiheng",author_title:"Apache ShenYu Contributor",author_url:"https://github.com/478320",tags:["plugin","mcp","Apache ShenYu"]},i=void 0,l={permalink:"/blog/Plugin-SourceCode-Analysis-Mcp-Server-Plugin",editUrl:"https://github.com/apache/shenyu-website/edit/main/blog/Plugin-SourceCode-Analysis-Mcp-Server-Plugin.md",source:"@site/blog/Plugin-SourceCode-Analysis-Mcp-Server-Plugin.md",title:"McpServer Plugin Source Code Analysis",description:"In the Shenyu gateway, when you start this plugin, Shenyu becomes a fully-featured McpServer.",date:"2025-11-12T02:54:20.894Z",formattedDate:"November 12, 2025",tags:[{label:"plugin",permalink:"/blog/tags/plugin"},{label:"mcp",permalink:"/blog/tags/mcp"},{label:"Apache ShenYu",permalink:"/blog/tags/apache-shen-yu"}],readingTime:10.305,truncated:!1,prevItem:{title:"Code Analysis For Dubbo Plugin",permalink:"/blog/Plugin-SourceCode-Analysis-Dubbo-Plugin"},nextItem:{title:"Apollo Data Synchronization Source Code Analysis",permalink:"/blog/DataSync-SourceCode-Analysis-Apollo-Data-Sync"}},s=[{value:"Introduction",id:"introduction",children:[]},{value:"1. Service Registration",id:"1-service-registration",children:[]},{value:"2. Plugin Execution",id:"2-plugin-execution",children:[]},{value:"3. Tool Invocation",id:"3-tool-invocation",children:[]},{value:"4. Summary",id:"4-summary",children:[]}],p={toc:s},c="wrapper";function u({components:e,...n}){return(0,a.yg)(c,(0,t.A)({},p,n,{components:e,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"In the Shenyu gateway, when you start this plugin, Shenyu becomes a fully-featured McpServer.",(0,a.yg)("br",{parentName:"p"}),"\n","You can easily register a service as a tool within the Shenyu gateway by simple configuration and use the extended functions the gateway offers."),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"This article is based on version ",(0,a.yg)("inlineCode",{parentName:"p"},"shenyu-2.7.0.2"),". Here, I will track the Shenyu Mcp plugin chain and analyze the source code of its SSE communication.")),(0,a.yg)("h3",{id:"introduction"},"Introduction"),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"The Shenyu gateway's Mcp plugin is built on top of the spring-ai-mcp extension. To better understand how the Mcp plugin works, I\u2019ll briefly introduce how some official Mcp Java classes collaborate within its JDK.")),(0,a.yg)("p",null,"I want to start by introducing three key official Mcp Java classes:"),(0,a.yg)("blockquote",null,(0,a.yg)("ol",{parentName:"blockquote"},(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"McpServer"),(0,a.yg)("br",{parentName:"li"}),"This class manages resources like tools, Resource, promote, etc."),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"TransportProvider"),(0,a.yg)("br",{parentName:"li"}),"Provides corresponding communication methods based on client-server communication protocols."),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Session"),(0,a.yg)("br",{parentName:"li"}),"Handles request data, response data, and notifications, offers some basic methods and corresponding handlers, and executes tool queries and calls here."))),(0,a.yg)("h3",{id:"1-service-registration"},"1. Service Registration"),(0,a.yg)("p",null,"In Shenyu Admin, after filling in endpoint and tool information for the McpServer plugin, this info is automatically registered into Shenyu bootstrap.",(0,a.yg)("br",{parentName:"p"}),"\n","You can refer to the official ",(0,a.yg)("a",{parentName:"p",href:"https://shenyu.incubator.apache.org/blog/DataSync-SourceCode-Analysis-WebSocket-Data-Sync"},"websocket data sync source code")," for details."),(0,a.yg)("p",null,"Shenyu bootstrap receives the data synced from admin in the ",(0,a.yg)("inlineCode",{parentName:"p"},"handler()")," method of ",(0,a.yg)("inlineCode",{parentName:"p"},"McpServerPluginDataHandler"),"."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"handlerSelector()")," receives URL data and creates McpServer."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"handlerRule()")," receives tool info and registers tools.")),(0,a.yg)("p",null,"These two methods together form the service registration part of the Shenyu Mcp plugin. Below, I will analyze these two methods in detail."),(0,a.yg)("h4",{id:"11-transport-and-mcpserver-registration"},"1.1 Transport and McpServer Registration"),(0,a.yg)("p",null,"Let\u2019s analyze the ",(0,a.yg)("inlineCode",{parentName:"p"},"handlerSelector()")," method, which handles McpServer registration."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"What ",(0,a.yg)("inlineCode",{parentName:"li"},"handlerSelector()")," does:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},"public class McpServerPluginDataHandler implements PluginDataHandler {\n    @Override\n    public void handlerSelector(final SelectorData selectorData) {\n        // Get URI\n        String uri = selectorData.getConditionList().stream()\n                .filter(condition -> Constants.URI.equals(condition.getParamType()))\n                .map(ConditionData::getParamValue)\n                .findFirst()\n                .orElse(null);\n        \n        // Build McpServer\n        ShenyuMcpServer shenyuMcpServer = GsonUtils.getInstance().fromJson(Objects.isNull(selectorData.getHandle()) ? DEFAULT_MESSAGE_ENDPOINT : selectorData.getHandle(), ShenyuMcpServer.class);\n        shenyuMcpServer.setPath(path);\n        // Cache shenyuMcpServer\n        CACHED_SERVER.get().cachedHandle(\n                selectorData.getId(),\n                shenyuMcpServer);\n        String messageEndpoint = shenyuMcpServer.getMessageEndpoint();\n        // Try to get or register transportProvider\n        shenyuMcpServerManager.getOrCreateMcpServerTransport(uri, messageEndpoint);\n    }\n    \n}\n")),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},(0,a.yg)("inlineCode",{parentName:"p"},"ShenyuMcpServerManager")," is the management center of McpServer in Shenyu. It not only stores ",(0,a.yg)("inlineCode",{parentName:"p"},"McpAsyncServer"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"CompositeTransportProvider"),", etc., but also contains methods to register Transport and McpServer.")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"The ",(0,a.yg)("inlineCode",{parentName:"li"},"getOrCreateMcpServerTransport()")," method works as follows:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},"@Component\npublic class ShenyuMcpServerManager {\n    public ShenyuSseServerTransportProvider getOrCreateMcpServerTransport(final String uri, final String messageEndPoint) {\n        // Remove /streamablehttp and /message suffixes\n        String normalizedPath = processPath(uri);\n        return getOrCreateTransport(normalizedPath, SSE_PROTOCOL,\n                () -> createSseTransport(normalizedPath, messageEndPoint));\n    }\n    \n    private <T> T getOrCreateTransport(final String normalizedPath, final String protocol,\n                                       final java.util.function.Supplier<T> transportFactory) {\n        // Get composite Transport instance\n        CompositeTransportProvider compositeTransport = getOrCreateCompositeTransport(normalizedPath);\n\n        T transport = switch (protocol) {\n            case SSE_PROTOCOL -> (T) compositeTransport.getSseTransport();\n            case STREAMABLE_HTTP_PROTOCOL -> (T) compositeTransport.getStreamableHttpTransport();\n            default -> null;\n        };\n        // If instance is missing in cache, create a new one\n        if (Objects.isNull(transport)) {\n            // Call createSseTransport() to create and store a new transport\n            transport = transportFactory.get();\n            // Create McpAsyncServer and register the transport\n            addTransportToSharedServer(normalizedPath, protocol, transport);\n        }\n\n        return transport;\n    }\n}\n")),(0,a.yg)("h5",{id:"111-transport-registration"},"1.1.1 Transport Registration"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"createSseTransport()")," method",(0,a.yg)("blockquote",{parentName:"li"},(0,a.yg)("p",{parentName:"blockquote"},"This method is called within ",(0,a.yg)("inlineCode",{parentName:"p"},"getOrCreateMcpServerTransport()")," and is used to create a Transport")))),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},"@Component\npublic class ShenyuMcpServerManager {\n    private ShenyuSseServerTransportProvider createSseTransport(final String normalizedPath, final String messageEndPoint) {\n        String messageEndpoint = normalizedPath + messageEndPoint;\n        ShenyuSseServerTransportProvider transportProvider = ShenyuSseServerTransportProvider.builder()\n                .objectMapper(objectMapper)\n                .sseEndpoint(normalizedPath)\n                .messageEndpoint(messageEndpoint)\n                .build();\n        // Register the two functions of transportProvider to the Manager's routeMap\n        registerRoutes(normalizedPath, messageEndpoint, transportProvider::handleSseConnection, transportProvider::handleMessage);\n        return transportProvider;\n    }\n}\n")),(0,a.yg)("h5",{id:"112-mcpserver-registration"},"1.1.2 McpServer Registration"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"addTransportToSharedServer()")," method",(0,a.yg)("blockquote",{parentName:"li"},(0,a.yg)("p",{parentName:"blockquote"},"This method is called within ",(0,a.yg)("inlineCode",{parentName:"p"},"getOrCreateMcpServerTransport()")," and is used to create and save McpServer")))),(0,a.yg)("p",null,"This method creates a new McpServer, stores it in ",(0,a.yg)("inlineCode",{parentName:"p"},"sharedServerMap"),", and saves the TransportProvider obtained above into ",(0,a.yg)("inlineCode",{parentName:"p"},"compositeTransportMap"),"."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},'@Component\npublic class ShenyuMcpServerManager {\n    private void addTransportToSharedServer(final String normalizedPath, final String protocol, final Object transportProvider) {\n        // Get or create and register McpServer\n        getOrCreateSharedServer(normalizedPath);\n\n        // Save the new transport protocol into compositeTransportMap\n        compositeTransport.addTransport(protocol, transportProvider);\n        \n    }\n\n    private McpAsyncServer getOrCreateSharedServer(final String normalizedPath) {\n        return sharedServerMap.computeIfAbsent(normalizedPath, path -> {\n            // Get transport protocols\n            CompositeTransportProvider compositeTransport = getOrCreateCompositeTransport(path);\n\n            // Select server capabilities\n            var capabilities = McpSchema.ServerCapabilities.builder()\n                    .tools(true)\n                    .logging()\n                    .build();\n\n            // Create and store McpServer\n            McpAsyncServer server = McpServer\n                    .async(compositeTransport)\n                    .serverInfo("MCP Shenyu Server (Multi-Protocol)", "1.0.0")\n                    .capabilities(capabilities)\n                    .tools(Lists.newArrayList())\n                    .build();\n            \n            return server;\n        });\n    }\n}\n')),(0,a.yg)("h4",{id:"12-tools-registration"},"1.2 Tools Registration"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"handlerRule()")," method works as follows:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Captures the tool configuration info users fill in for the Tool, all used to build the tool"),(0,a.yg)("li",{parentName:"ol"},"Deserializes to create ",(0,a.yg)("inlineCode",{parentName:"li"},"ShenyuMcpServerTool")," and obtains tool info")),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"Note: ",(0,a.yg)("inlineCode",{parentName:"p"},"ShenyuMcpServerTool")," is also a Shenyu-side object for storing tool info, unrelated by inheritance to ",(0,a.yg)("inlineCode",{parentName:"p"},"McpServerTool"))),(0,a.yg)("ol",{start:3},(0,a.yg)("li",{parentName:"ol"},"Calls ",(0,a.yg)("inlineCode",{parentName:"li"},"addTool()")," method to create the tool using this info and registers the tool to the matching McpServer based on SelectorId")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},"public class McpServerPluginDataHandler implements PluginDataHandler {\n    @Override\n    public void handlerRule(final RuleData ruleData) {\n        Optional.ofNullable(ruleData.getHandle()).ifPresent(s -> {\n            // Deserialize a new ShenyuMcpServerTool\n            ShenyuMcpServerTool mcpServerTool = GsonUtils.getInstance().fromJson(s, ShenyuMcpServerTool.class);\n            // Cache mcpServerTool\n            CACHED_TOOL.get().cachedHandle(CacheKeyUtils.INST.getKey(ruleData), mcpServerTool);\n            // Build MCP schema\n            List<McpServerToolParameter> parameters = mcpServerTool.getParameters();\n            String inputSchema = JsonSchemaUtil.createParameterSchema(parameters);\n            ShenyuMcpServer server = CACHED_SERVER.get().obtainHandle(ruleData.getSelectorId());\n            if (Objects.nonNull(server)) {\n                // Save tool info into Manager's sharedServerMap\n                shenyuMcpServerManager.addTool(server.getPath(),\n                        StringUtils.isBlank(mcpServerTool.getName()) ? ruleData.getName()\n                                : mcpServerTool.getName(),\n                        mcpServerTool.getDescription(),\n                        mcpServerTool.getRequestConfig(),\n                        inputSchema);\n            }\n        });\n    }\n}\n")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"addTool()")," method",(0,a.yg)("blockquote",{parentName:"li"},(0,a.yg)("p",{parentName:"blockquote"},"This method is called by ",(0,a.yg)("inlineCode",{parentName:"p"},"handlerRule()")," to add a new tool")))),(0,a.yg)("p",null,"This method performs:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Converts the previous tool info into a ",(0,a.yg)("inlineCode",{parentName:"p"},"shenyuToolDefinition")," object")),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Creates a ",(0,a.yg)("inlineCode",{parentName:"p"},"ShenyuToolCallback")," object using the converted ",(0,a.yg)("inlineCode",{parentName:"p"},"shenyuToolDefinition")),(0,a.yg)("blockquote",{parentName:"li"},(0,a.yg)("p",{parentName:"blockquote"},(0,a.yg)("inlineCode",{parentName:"p"},"ShenyuToolCallback")," overrides the ",(0,a.yg)("inlineCode",{parentName:"p"},"call()")," method of ",(0,a.yg)("inlineCode",{parentName:"p"},"ToolCallBack")," and registers this overridden method to ",(0,a.yg)("inlineCode",{parentName:"p"},"AsyncToolSpecification"),", so calling the tool's ",(0,a.yg)("inlineCode",{parentName:"p"},"call()")," will actually invoke this overridden method"))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Converts ",(0,a.yg)("inlineCode",{parentName:"p"},"ShenyuToolCallback")," to ",(0,a.yg)("inlineCode",{parentName:"p"},"AsyncToolSpecification")," and registers it to the corresponding McpServer"))),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},"public class McpServerPluginDataHandler implements PluginDataHandler {\n    public void addTool(final String serverPath, final String name, final String description,\n                        final String requestTemplate, final String inputSchema) {\n        String normalizedPath = normalizeServerPath(serverPath);\n        // Build Definition object\n        ToolDefinition shenyuToolDefinition = ShenyuToolDefinition.builder()\n                .name(name)\n                .description(description)\n                .requestConfig(requestTemplate)\n                .inputSchema(inputSchema)\n                .build();\n        \n        ShenyuToolCallback shenyuToolCallback = new ShenyuToolCallback(shenyuToolDefinition);\n\n        // Get previously registered McpServer and register the Tool\n        McpAsyncServer sharedServer = sharedServerMap.get(normalizedPath);\n        for (AsyncToolSpecification asyncToolSpecification : McpToolUtils.toAsyncToolSpecifications(shenyuToolCallback)) {\n            sharedServer.addTool(asyncToolSpecification).block();\n        }        \n    }\n}\n")),(0,a.yg)("p",null,"With this, service registration analysis is complete."),(0,a.yg)("p",null,"Service registration overview diagram",(0,a.yg)("br",{parentName:"p"}),"\n",(0,a.yg)("img",{src:r(65712).A})),(0,a.yg)("h3",{id:"2-plugin-execution"},"2. Plugin Execution"),(0,a.yg)("p",null,"Clients will send two types of messages with ",(0,a.yg)("inlineCode",{parentName:"p"},"/sse")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"/message")," suffixes. These messages are captured by the Shenyu McpServer plugin, which handles them differently. When receiving ",(0,a.yg)("inlineCode",{parentName:"p"},"/sse")," messages, the plugin creates and saves a session object, then returns a session id for ",(0,a.yg)("inlineCode",{parentName:"p"},"/message")," usage. When receiving ",(0,a.yg)("inlineCode",{parentName:"p"},"/message")," messages, the plugin executes methods based on the method info carried by the ",(0,a.yg)("inlineCode",{parentName:"p"},"/message")," message, such as fetching work lists, tool invocation, and resource lists."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"doExecute()")," method works as follows:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Matches the path and checks if the Mcp plugin registered it"),(0,a.yg)("li",{parentName:"ol"},"Calls ",(0,a.yg)("inlineCode",{parentName:"li"},"routeByProtocol()")," to choose the appropriate handling plan based on the request protocol")),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"This article focuses on the SSE request mode, so we enter the ",(0,a.yg)("inlineCode",{parentName:"p"},"handleSseRequest()")," method")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},"public class McpServerPlugin extends AbstractShenyuPlugin {\n    @Override\n    protected Mono<Void> doExecute(final ServerWebExchange exchange,\n                                   final ShenyuPluginChain chain,\n                                   final SelectorData selector,\n                                   final RuleData rule) {\n        final String uri = exchange.getRequest().getURI().getRawPath();\n        // Check if Mcp plugin registered this route; if not, continue chain without handling\n        if (!shenyuMcpServerManager.canRoute(uri)) {\n            return chain.execute(exchange);\n        }\n        final ServerRequest request = ServerRequest.create(exchange, messageReaders);\n        // Choose handling method based on URI protocol\n        return routeByProtocol(exchange, chain, request, selector, uri);\n    }\n\n    private Mono<Void> routeByProtocol(final ServerWebExchange exchange,\n                                       final ShenyuPluginChain chain,\n                                       final ServerRequest request,\n                                       final SelectorData selector,\n                                       final String uri) {\n\n        if (isStreamableHttpProtocol(uri)) {\n            return handleStreamableHttpRequest(exchange, chain, request, uri);\n        } else if (isSseProtocol(uri)) {\n            // Handle SSE requests\n            return handleSseRequest(exchange, chain, request, selector, uri);\n        } \n    }\n}\n")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"handleSseRequest()")," method",(0,a.yg)("blockquote",{parentName:"li"},(0,a.yg)("p",{parentName:"blockquote"},"Called by ",(0,a.yg)("inlineCode",{parentName:"p"},"routeByProtocol()")," to determine if the client wants to create a session or call a tool based on URI suffix")))),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},"public class McpServerPlugin extends AbstractShenyuPlugin {\n    private Mono<Void> handleSseRequest(final ServerWebExchange exchange,\n                                        final ShenyuPluginChain chain,\n                                        final ServerRequest request,\n                                        final SelectorData selector,\n                                        final String uri) {\n        ShenyuMcpServer server = McpServerPluginDataHandler.CACHED_SERVER.get().obtainHandle(selector.getId());\n        String messageEndpoint = server.getMessageEndpoint();\n        // Get the transport provider\n        ShenyuSseServerTransportProvider transportProvider\n                = shenyuMcpServerManager.getOrCreateMcpServerTransport(uri, messageEndpoint);\n        // Determine if the request is an SSE connection or a message call\n        if (uri.endsWith(messageEndpoint)) {\n            setupSessionContext(exchange, chain);\n            return handleMessageEndpoint(exchange, transportProvider, request);\n        } else {\n            return handleSseEndpoint(exchange, transportProvider, request);\n        }\n    }\n}\n")),(0,a.yg)("h4",{id:"21-client-sends-sse-request"},"2.1 Client Sends SSE Request"),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"If the client sends a request ending with ",(0,a.yg)("inlineCode",{parentName:"p"},"/sse"),", the ",(0,a.yg)("inlineCode",{parentName:"p"},"handleSseEndpoint()")," method is executed")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"handleSseEndpoint()")," mainly does:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Sets SSE request headers"),(0,a.yg)("li",{parentName:"ol"},"Calls ",(0,a.yg)("inlineCode",{parentName:"li"},"ShenyuSseServerTransportProvider.createSseFlux()")," to create the SSE stream")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},"public class McpServerPlugin extends AbstractShenyuPlugin {\n    private Mono<Void> handleSseEndpoint(final ServerWebExchange exchange,\n                                         final ShenyuSseServerTransportProvider transportProvider,\n                                         final ServerRequest request) {\n        // Configure SSE request headers\n        configureSseHeaders(exchange);\n\n        // Create SSE stream\n        return exchange.getResponse()\n                .writeWith(transportProvider\n                        .createSseFlux(request));\n    }\n}\n")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"createSseFlux()")," method",(0,a.yg)("blockquote",{parentName:"li"},(0,a.yg)("p",{parentName:"blockquote"},"Called by ",(0,a.yg)("inlineCode",{parentName:"p"},"handleSseEndpoint()"),"; mainly used to create and save a session"),(0,a.yg)("ol",{parentName:"blockquote"},(0,a.yg)("li",{parentName:"ol"},"Creates session; the session factory registers a series of handlers, which are the objects actually executing tool calls"),(0,a.yg)("li",{parentName:"ol"},"Saves the session for reuse"),(0,a.yg)("li",{parentName:"ol"},"Sends the session id as a parameter of the endpoint URL back to the client, to be used when calling the message endpoint"))))),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},'public class ShenyuSseServerTransportProvider implements McpServerTransportProvider {\n    public Flux<ServerSentEvent<?>> createSseFlux(final ServerRequest request) {\n        return Flux.<ServerSentEvent<?>>create(sink -> {\n                    WebFluxMcpSessionTransport sessionTransport = new WebFluxMcpSessionTransport(sink);\n                    // Create McpServerSession and temporarily store plugin chain info\n                    McpServerSession session = sessionFactory.create(sessionTransport);\n                    String sessionId = session.getId();\n                    sessions.put(sessionId, session);\n\n                    // Send session id info back to client\n                    String endpointUrl = this.baseUrl + this.messageEndpoint + "?sessionId=" + sessionId;\n                    ServerSentEvent<String> endpointEvent = ServerSentEvent.<String>builder()\n                            .event(ENDPOINT_EVENT_TYPE)\n                            .data(endpointUrl)\n                            .build();\n                }).doOnSubscribe(subscription -> LOGGER.info("SSE Flux subscribed"))\n                .doOnRequest(n -> LOGGER.debug("SSE Flux requested {} items", n));\n    }\n}\n')),(0,a.yg)("h4",{id:"22-client-sends-message-request"},"2.2 Client Sends Message Request"),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"If the client sends a request ending with ",(0,a.yg)("inlineCode",{parentName:"p"},"/message"),", the current ",(0,a.yg)("inlineCode",{parentName:"p"},"ShenyuPluginChain")," info is saved into the session, and ",(0,a.yg)("inlineCode",{parentName:"p"},"handleMessageEndpoint()")," is called.",(0,a.yg)("br",{parentName:"p"}),"\n","Subsequent tool calls continue executing this plugin chain, so plugins after the Mcp plugin will affect tool requests.")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"handleMessageEndpoint()")," method, calls ",(0,a.yg)("inlineCode",{parentName:"li"},"ShenyuSseServerTransportProvider.handleMessageEndpoint()")," to process")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"if (uri.endsWith(messageEndpoint)) {\n       setupSessionContext(exchange, chain);\n       return handleMessageEndpoint(exchange, transportProvider, request);\n} \n")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},"public class McpServerPlugin extends AbstractShenyuPlugin {\n    private Mono<Void> handleMessageEndpoint(final ServerWebExchange exchange,\n                                             final ShenyuSseServerTransportProvider transportProvider,\n                                             final ServerRequest request) {\n        // Handle message requests\n        return transportProvider.handleMessageEndpoint(request)\n                .flatMap(result -> {\n                    return exchange.getResponse()\n                            .writeWith(Mono.just(exchange.getResponse().bufferFactory().wrap(responseBody.getBytes())));\n                });\n    }\n}\n")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"handleMessageEndpoint()")," method",(0,a.yg)("blockquote",{parentName:"li"},(0,a.yg)("p",{parentName:"blockquote"},"Called by ",(0,a.yg)("inlineCode",{parentName:"p"},"McpServerPlugin.handleMessageEndpoint()"),", hands over the request to the session for processing")))),(0,a.yg)("p",null,"The session's ",(0,a.yg)("inlineCode",{parentName:"p"},"handler()")," method performs different actions depending on the message.",(0,a.yg)("br",{parentName:"p"}),"\n","For example, when the method in the message is ",(0,a.yg)("inlineCode",{parentName:"p"},'"tools/call"'),", the tool invocation handler executes the ",(0,a.yg)("inlineCode",{parentName:"p"},"call()")," method to call the tool.",(0,a.yg)("br",{parentName:"p"}),"\n","The related source is omitted here."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},'public class ShenyuSseServerTransportProvider implements McpServerTransportProvider {\n    public Mono<MessageHandlingResult> handleMessageEndpoint(final ServerRequest request) {\n        // Get session\n        String sessionId = request.queryParam("sessionId").get();\n        McpServerSession session = sessions.get(sessionId);\n        return request.bodyToMono(String.class)\n                .flatMap(body -> {\n                    McpSchema.JSONRPCMessage message = McpSchema.deserializeJsonRpcMessage(objectMapper, body);\n                    return session.handle(message);\n                });\n    }\n}\n')),(0,a.yg)("p",null,"At this point, the Shenyu Mcp Plugin service invocation source code analysis is complete."),(0,a.yg)("p",null,"Process flow overview",(0,a.yg)("br",{parentName:"p"}),"\n",(0,a.yg)("img",{src:r(83758).A})),(0,a.yg)("h3",{id:"3-tool-invocation"},"3. Tool Invocation"),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"If the client sends a message to invoke a tool, the session will use the tool invocation handler to execute the tool\u2019s ",(0,a.yg)("inlineCode",{parentName:"p"},"call()")," method.",(0,a.yg)("br",{parentName:"p"}),"\n","From service registration, we know the tool call actually runs the ",(0,a.yg)("inlineCode",{parentName:"p"},"call()")," method of ",(0,a.yg)("inlineCode",{parentName:"p"},"ShenyuToolCallback"),".")),(0,a.yg)("p",null,"Therefore, the tool invocation executes the following:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"call()")," method mainly does:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Gets session id"),(0,a.yg)("li",{parentName:"ol"},"Gets ",(0,a.yg)("inlineCode",{parentName:"li"},"requestTemplate"),", the extra configuration provided by Shenyu"),(0,a.yg)("li",{parentName:"ol"},"Gets the previously stored Shenyu plugin chain and passes the tool call info to the chain for continued execution"),(0,a.yg)("li",{parentName:"ol"},"Asynchronously waits for the tool response")),(0,a.yg)("p",null,"After the plugin chain completes, the tool call request is actually sent to the service hosting the tool."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-java"},"public class ShenyuToolCallback implements ToolCallback {\n    @NonNull\n    @Override\n    public String call(@NonNull final String input, final ToolContext toolContext) {\n        // Extract sessionId from MCP request\n        final McpSyncServerExchange mcpExchange = extractMcpExchange(toolContext);\n        final String sessionId = extractSessionId(mcpExchange);\n        // Extract requestTemplate info\n        final String configStr = extractRequestConfig(shenyuTool);\n\n        // Get the previously stored plugin chain by sessionId\n        final ServerWebExchange originExchange = getOriginExchange(sessionId);\n        final ShenyuPluginChain chain = getPluginChain(originExchange);\n        \n        // Execute the tool call\n        return executeToolCall(originExchange, chain, sessionId, configStr, input);\n    }\n\n    private String executeToolCall(final ServerWebExchange originExchange,\n                                   final ShenyuPluginChain chain,\n                                   final String sessionId,\n                                   final String configStr,\n                                   final String input) {\n\n        final CompletableFuture<String> responseFuture = new CompletableFuture<>();\n        final ServerWebExchange decoratedExchange = buildDecoratedExchange(\n                originExchange, responseFuture, sessionId, configStr, input);\n        // Execute plugin chain, call the actual tool\n        chain.execute(decoratedExchange)\n                .subscribe();\n\n        // Wait for response\n        final String result = responseFuture.get(DEFAULT_TIMEOUT_SECONDS, TimeUnit.SECONDS);\n        return result;\n    }\n}\n")),(0,a.yg)("p",null,"This concludes the Shenyu MCP Plugin tool invocation analysis."),(0,a.yg)("p",null,(0,a.yg)("img",{src:r(81784).A})),(0,a.yg)("hr",null),(0,a.yg)("h3",{id:"4-summary"},"4. Summary"),(0,a.yg)("p",null,"This article analyzed the source code from Mcp service registration, through Mcp plugin service invocation, to tool invocation.",(0,a.yg)("br",{parentName:"p"}),"\n","The McpServer plugin makes Shenyu a powerful and centralized McpServer."),(0,a.yg)("hr",null))}u.isMDXComponent=!0},81784:(e,n,r)=>{r.d(n,{A:()=>t});const t="data:image/png;base64,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"},83758:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/Mcp-server-execute-en-29cfc2484b94d6221407e4063d52ad29.png"}}]);