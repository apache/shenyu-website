"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[92148],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var o=t(96540);const r={},s=o.createContext(r);function a(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:n},e.children)}},89463:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var o=t(74848),r=t(28453);const s={title:"Motan Proxy",description:"Motan Proxy"},a=void 0,i={id:"user-guide/proxy/motan-proxy",title:"Motan Proxy",description:"Motan Proxy",source:"@site/versioned_docs/version-2.5.0/user-guide/proxy/motan-proxy.md",sourceDirName:"user-guide/proxy",slug:"/user-guide/proxy/motan-proxy",permalink:"/docs/2.5.0/user-guide/proxy/motan-proxy",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.5.0/user-guide/proxy/motan-proxy.md",tags:[],version:"2.5.0",frontMatter:{title:"Motan Proxy",description:"Motan Proxy"},sidebar:"tutorialSidebar",previous:{title:"Http Proxy",permalink:"/docs/2.5.0/user-guide/proxy/http-proxy"},next:{title:"Sofa Proxy",permalink:"/docs/2.5.0/user-guide/proxy/sofa-rpc-proxy"}},c={},d=[{value:"Add motan plugin in gateway",id:"add-motan-plugin-in-gateway",level:2},{value:"Motan service access gateway",id:"motan-service-access-gateway",level:2},{value:"User Request",id:"user-request",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["This document is intended to help the ",(0,o.jsx)(n.code,{children:"Motan"})," service access the ",(0,o.jsx)(n.code,{children:"Apache ShenYu"})," gateway. The ",(0,o.jsx)(n.code,{children:"Apache ShenYu"})," gateway uses the ",(0,o.jsx)(n.code,{children:"Motan"})," plugin to handle ",(0,o.jsx)(n.code,{children:"motan"})," service."]}),"\n",(0,o.jsxs)(n.p,{children:["Before the connection, start ",(0,o.jsx)(n.code,{children:"shenyu-admin"})," correctly, start ",(0,o.jsx)(n.code,{children:"Motan"})," plugin, and add related dependencies on the gateway and ",(0,o.jsx)(n.code,{children:"Motan"})," application client. Refer to the previous ",(0,o.jsx)(n.a,{href:"../../quick-start/quick-start-motan",children:"Quick start with Motan"})," ."]}),"\n",(0,o.jsxs)(n.p,{children:["For details about client access configuration, see ",(0,o.jsx)(n.a,{href:"/docs/2.5.0/user-guide/property-config/register-center-access",children:"Application Client Access Config"})," ."]}),"\n",(0,o.jsxs)(n.p,{children:["For details about data synchronization configurations, see ",(0,o.jsx)(n.a,{href:"/docs/2.5.0/user-guide/property-config/use-data-sync",children:"Data Synchronization Config"})," ."]}),"\n",(0,o.jsx)(n.h2,{id:"add-motan-plugin-in-gateway",children:"Add motan plugin in gateway"}),"\n",(0,o.jsxs)(n.p,{children:["Add the following dependencies to the gateway's ",(0,o.jsx)(n.code,{children:"pom.xml"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"        \x3c!-- apache shenyu motan plugin --\x3e\n        <dependency>\n            <groupId>org.apache.shenyu</groupId>\n            <artifactId>shenyu-spring-boot-starter-plugin-motan</artifactId>\n            <version>${project.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>com.weibo</groupId>\n            <artifactId>motan-core</artifactId>\n            <version>1.1.9</version>\n        </dependency>\n        <dependency>\n            <groupId>com.weibo</groupId>\n            <artifactId>motan-registry-zookeeper</artifactId>\n            <version>1.1.9</version>\n        </dependency>\n        <dependency>\n            <groupId>com.weibo</groupId>\n            <artifactId>motan-transport-netty4</artifactId>\n            <version>1.1.9</version>\n        </dependency>\n        <dependency>\n            <groupId>com.weibo</groupId>\n            <artifactId>motan-springsupport</artifactId>\n            <version>1.1.9</version>\n        </dependency>\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Restart your gateway service."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"motan-service-access-gateway",children:"Motan service access gateway"}),"\n",(0,o.jsxs)(n.p,{children:["Please refer to: ",(0,o.jsx)(n.a,{href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-motan",children:"shenyu-examples-motan"})]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["In the microservice built by ",(0,o.jsx)(n.code,{children:"Motan"}),", add the following dependencies:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"        <dependency>\n            <groupId>org.apache.shenyu</groupId>\n            <artifactId>shenyu-spring-boot-starter-client-motan</artifactId>\n            <version>${shenyu.version}</version>\n        </dependency>\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["Add the following configuration to the ",(0,o.jsx)(n.code,{children:"application.yaml"})," configuration file:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"shenyu:\n  register:\n    registerType: http #zookeeper #etcd #nacos #consul\n    serverLists: http://localhost:9095 #localhost:2181 #http://localhost:2379 #localhost:8848\n    props:\n      username: admin\n      password: 123456\n  client:\n    motan:\n      props:\n        contextPath: /motan\n        ipAndPort: motan\n        appName: motan\n        port: 8081\n      package-path: org.apache.shenyu.examples.motan.service\n      basicServiceConfig:\n        exportPort: 8002\nmotan:\n  registry:\n    protocol: zookeeper\n    address: 127.0.0.1:2181\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:["Add ",(0,o.jsx)(n.code,{children:"@ShenyuMotanClient"})," annotation to the method of ",(0,o.jsx)(n.code,{children:"Motan"})," service interface implementation class, start your service provider, after successful registration, go to PluginList -> rpc proxy -> motan in the background management system, you will see automatic registration of selectors and rules information."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@MotanService(export = "demoMotan:8002")\npublic class MotanDemoServiceImpl implements MotanDemoService {\n    @Override\n    @ShenyuMotanClient(path = "/hello")\n    public String hello(String name) {\n        return "hello " + name;\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"user-request",children:"User Request"}),"\n",(0,o.jsxs)(n.p,{children:["You can request your ",(0,o.jsx)(n.code,{children:"motan"})," service by Http. The ",(0,o.jsx)(n.code,{children:"Apache ShenYu"})," gateway needs to have a route prefix which is the ",(0,o.jsx)(n.code,{children:"contextPath"})," configured by the access gateway. For example: ",(0,o.jsx)(n.code,{children:"http://localhost:9195/motan/hello"})," ."]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);