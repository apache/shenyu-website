"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[70861],{16479:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/jwt-plugin-close_zh-09625cd1385e03717b29bd8a024de3b4.jpg"},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var t=i(96540);const s={},d=t.createContext(s);function l(e){const n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(d.Provider,{value:n},e.children)}},56013:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/jwt-plugin-config-zh-f77209aec1ded1e1745a2ffef014e44e.jpg"},65104:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>a,frontMatter:()=>d,metadata:()=>c,toc:()=>h});var t=i(74848),s=i(28453);const d={title:"JWT\u63d2\u4ef6",keywords:["JWT"],description:"JWT\u63d2\u4ef6"},l=void 0,c={id:"plugin-center/security/jwt-plugin",title:"JWT\u63d2\u4ef6",description:"JWT\u63d2\u4ef6",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.5.0/plugin-center/security/jwt-plugin.md",sourceDirName:"plugin-center/security",slug:"/plugin-center/security/jwt-plugin",permalink:"/zh/docs/2.5.0/plugin-center/security/jwt-plugin",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/shenyu-website/edit/main/i18n/zh/docusaurus-plugin-content-docs/version-2.5.0/plugin-center/security/jwt-plugin.md",tags:[],version:"2.5.0",frontMatter:{title:"JWT\u63d2\u4ef6",keywords:["JWT"],description:"JWT\u63d2\u4ef6"},sidebar:"tutorialSidebar",previous:{title:"CryptorResponse \u63d2\u4ef6",permalink:"/zh/docs/2.5.0/plugin-center/security/cryptor-response-plugin"},next:{title:"OAuth2\u63d2\u4ef6",permalink:"/zh/docs/2.5.0/plugin-center/security/oauth2-plugin"}},r={},h=[{value:"title: JWT\u63d2\u4ef6\nkeywords: [&quot;JWT&quot;]\ndescription: JWT\u63d2\u4ef6",id:"title-jwt\u63d2\u4ef6keywords-jwtdescription-jwt\u63d2\u4ef6",level:2},{value:"1.1 \u63d2\u4ef6\u540d\u79f0",id:"11-\u63d2\u4ef6\u540d\u79f0",level:2},{value:"1.2 \u9002\u7528\u573a\u666f",id:"12-\u9002\u7528\u573a\u666f",level:2},{value:"1.3 \u63d2\u4ef6\u529f\u80fd",id:"13-\u63d2\u4ef6\u529f\u80fd",level:2},{value:"1.4 \u63d2\u4ef6\u4ee3\u7801",id:"14-\u63d2\u4ef6\u4ee3\u7801",level:2},{value:"1.5 \u6dfb\u52a0\u81ea\u54ea\u4e2aShenYu\u7248\u672c",id:"15-\u6dfb\u52a0\u81ea\u54ea\u4e2ashenyu\u7248\u672c",level:2},{value:"2.1 \u63d2\u4ef6\u4f7f\u7528\u6d41\u7a0b\u56fe",id:"21-\u63d2\u4ef6\u4f7f\u7528\u6d41\u7a0b\u56fe",level:2},{value:"2.2 \u5bfc\u5165pom",id:"22-\u5bfc\u5165pom",level:2},{value:"2.3 \u542f\u7528\u63d2\u4ef6",id:"23-\u542f\u7528\u63d2\u4ef6",level:2},{value:"2.4 \u914d\u7f6e\u63d2\u4ef6",id:"24-\u914d\u7f6e\u63d2\u4ef6",level:2},{value:"2.4.1 Config plugin in ShenYu-Admin",id:"241-config-plugin-in-shenyu-admin",level:3},{value:"2.4.2 Selector config",id:"242-selector-config",level:3},{value:"2.4.3 Rule Config",id:"243-rule-config",level:3},{value:"2.5 \u793a\u4f8b",id:"25-\u793a\u4f8b",level:2},{value:"2.5.1 \u4f7f\u7528jwt\u63d2\u4ef6\u8fdb\u884c\u6743\u9650\u8ba4\u8bc1",id:"251-\u4f7f\u7528jwt\u63d2\u4ef6\u8fdb\u884c\u6743\u9650\u8ba4\u8bc1",level:3},{value:"2.5.1.1 \u914d\u7f6ejwt\u63d2\u4ef6",id:"2511-\u914d\u7f6ejwt\u63d2\u4ef6",level:4},{value:"2.5.1.2 \u914d\u7f6e\u9009\u62e9\u5668",id:"2512-\u914d\u7f6e\u9009\u62e9\u5668",level:4},{value:"2.5.1.3 \u914d\u7f6e\u89c4\u5219",id:"2513-\u914d\u7f6e\u89c4\u5219",level:4},{value:"2.5.1.4 \u5728\u7f51\u9875\u4e2d\u751f\u6210jwt token",id:"2514-\u5728\u7f51\u9875\u4e2d\u751f\u6210jwt-token",level:4},{value:"2.5.1.5 \u4f7f\u7528Java\u4ee3\u7801\u751f\u6210jwt token",id:"2515-\u4f7f\u7528java\u4ee3\u7801\u751f\u6210jwt-token",level:4},{value:"2.5.1.6 \u8bf7\u6c42\u670d\u52a1",id:"2516-\u8bf7\u6c42\u670d\u52a1",level:4},{value:"2.5.1.6.1 \u4f7f\u7528token\u65b9\u5f0f\u8bf7\u6c42\u670d\u52a1",id:"25161-\u4f7f\u7528token\u65b9\u5f0f\u8bf7\u6c42\u670d\u52a1",level:5},{value:"2.5.1.6.2 \u4f7f\u7528\u8ba4\u8bc1\u65b9\u5f0f\u8bf7\u6c42\u670d\u52a1",id:"25162-\u4f7f\u7528\u8ba4\u8bc1\u65b9\u5f0f\u8bf7\u6c42\u670d\u52a1",level:5},{value:"2.5.1.7 \u9a8c\u8bc1\u8bf7\u6c42\u7ed3\u679c",id:"2517-\u9a8c\u8bc1\u8bf7\u6c42\u7ed3\u679c",level:4}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"title-jwt\u63d2\u4ef6keywords-jwtdescription-jwt\u63d2\u4ef6",children:'title: JWT\u63d2\u4ef6\nkeywords: ["JWT"]\ndescription: JWT\u63d2\u4ef6'}),"\n",(0,t.jsx)(n.h1,{id:"1\u6982\u8ff0",children:"1.\u6982\u8ff0"}),"\n",(0,t.jsx)(n.h2,{id:"11-\u63d2\u4ef6\u540d\u79f0",children:"1.1 \u63d2\u4ef6\u540d\u79f0"}),"\n",(0,t.jsxs)(n.p,{children:["* ",(0,t.jsx)(n.code,{children:"jwt"})," \u63d2\u4ef6"]}),"\n",(0,t.jsx)(n.h2,{id:"12-\u9002\u7528\u573a\u666f",children:"1.2 \u9002\u7528\u573a\u666f"}),"\n",(0,t.jsx)(n.p,{children:"* \u9700\u8981\u5728\u7f51\u5173\u7edf\u4e00\u9274\u6743\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"13-\u63d2\u4ef6\u529f\u80fd",children:"1.3 \u63d2\u4ef6\u529f\u80fd"}),"\n",(0,t.jsxs)(n.p,{children:["* ",(0,t.jsx)(n.code,{children:"jwt"})," \u63d2\u4ef6\uff0c\u662f\u9488\u5bf9 ",(0,t.jsx)(n.code,{children:"http"})," \u8bf7\u6c42\u5934\u7684 ",(0,t.jsx)(n.code,{children:"token"}),"\u5c5e\u6027\u6216\u8005\u662f ",(0,t.jsx)(n.code,{children:"authorization"})," \u5c5e\u6027\u643a\u5e26\u503c\u8fdb\u884c\u9274\u6743\u5224\u65ad\uff0c\u517c\u5bb9 ",(0,t.jsx)(n.code,{children:"OAuth2.0"})," \u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"14-\u63d2\u4ef6\u4ee3\u7801",children:"1.4 \u63d2\u4ef6\u4ee3\u7801"}),"\n",(0,t.jsxs)(n.p,{children:["* \u6838\u5fc3\u6a21\u5757\u4e3a ",(0,t.jsx)(n.code,{children:"shenyu-plugin-jwt"}),".\n* \u6838\u5fc3\u7c7b\u4e3a ",(0,t.jsx)(n.code,{children:"org.apache.shenyu.plugin.jwt.JwtPlugin"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"15-\u6dfb\u52a0\u81ea\u54ea\u4e2ashenyu\u7248\u672c",children:"1.5 \u6dfb\u52a0\u81ea\u54ea\u4e2aShenYu\u7248\u672c"}),"\n",(0,t.jsx)(n.p,{children:"* \u81ea\u4ece ShenYu 2.4.0"}),"\n",(0,t.jsx)(n.h1,{id:"2\u5982\u4f55\u4f7f\u7528\u63d2\u4ef6",children:"2.\u5982\u4f55\u4f7f\u7528\u63d2\u4ef6"}),"\n",(0,t.jsx)(n.h2,{id:"21-\u63d2\u4ef6\u4f7f\u7528\u6d41\u7a0b\u56fe",children:"2.1 \u63d2\u4ef6\u4f7f\u7528\u6d41\u7a0b\u56fe"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(96216).A+"",width:"343",height:"964"})}),"\n",(0,t.jsx)(n.h2,{id:"22-\u5bfc\u5165pom",children:"2.2 \u5bfc\u5165pom"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.apache.shenyu</groupId>\n    <artifactId>shenyu-spring-boot-starter-plugin-jwt</artifactId>\n    <version>${project.version}</version>\n</dependency>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"23-\u542f\u7528\u63d2\u4ef6",children:"2.3 \u542f\u7528\u63d2\u4ef6"}),"\n",(0,t.jsxs)(n.p,{children:["- \u5728 ",(0,t.jsx)(n.code,{children:"shenyu-admin"})," \u57fa\u7840\u914d\u7f6e --\x3e \u63d2\u4ef6\u7ba1\u7406 --\x3e ",(0,t.jsx)(n.code,{children:"jwt"})," \uff0c\u8bbe\u7f6e\u4e3a\u5f00\u542f\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"24-\u914d\u7f6e\u63d2\u4ef6",children:"2.4 \u914d\u7f6e\u63d2\u4ef6"}),"\n",(0,t.jsx)(n.h3,{id:"241-config-plugin-in-shenyu-admin",children:"2.4.1 Config plugin in ShenYu-Admin"}),"\n",(0,t.jsxs)(n.p,{children:["* \u5728ShenYu-Admin\u914d\u7f6ejwt\u63d2\u4ef6\u7684\u79c1\u94a5\uff0c\u8be5\u79c1\u94a5\u5fc5\u987b\u5927\u4e8e256\u4f4d \u3002\n* ",(0,t.jsx)(n.code,{children:"secretKey"})," : \u8be5\u79c1\u94a5\u4e3a\u4f7f\u7528jwt\u65f6\u751f\u6210token\uff0c\u5e76\u4e14\u4ed6\u662f\u5fc5\u987b\u7684\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(56013).A+"",width:"2256",height:"1279"})}),"\n",(0,t.jsx)(n.h3,{id:"242-selector-config",children:"2.4.2 Selector config"}),"\n",(0,t.jsxs)(n.p,{children:["* \u63d2\u4ef6\u9009\u62e9\u5668\u548c\u89c4\u5219\u7684\u914d\u7f6e\u8bf7\u67e5\u770b: ",(0,t.jsx)(n.a,{href:"/zh/docs/2.5.0/user-guide/admin-usage/selector-and-rule",children:"\u63d2\u4ef6\u548c\u89c4\u5219\u914d\u7f6e"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"243-rule-config",children:"2.4.3 Rule Config"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(87034).A+"",width:"2256",height:"1279"})}),"\n",(0,t.jsx)(n.p,{children:"* convert\u662fjwt\u7684\u8f6c\u5316\n* jwtVal: jwt \u8bf7\u6c42\u4f53\u7684\u540d\u79f0\n* headerVal: jwt\u8bf7\u6c42\u5934\u7684\u540d\u79f0"}),"\n",(0,t.jsx)(n.h2,{id:"25-\u793a\u4f8b",children:"2.5 \u793a\u4f8b"}),"\n",(0,t.jsx)(n.h3,{id:"251-\u4f7f\u7528jwt\u63d2\u4ef6\u8fdb\u884c\u6743\u9650\u8ba4\u8bc1",children:"2.5.1 \u4f7f\u7528jwt\u63d2\u4ef6\u8fdb\u884c\u6743\u9650\u8ba4\u8bc1"}),"\n",(0,t.jsx)(n.h4,{id:"2511-\u914d\u7f6ejwt\u63d2\u4ef6",children:"2.5.1.1 \u914d\u7f6ejwt\u63d2\u4ef6"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(56013).A+"",width:"2256",height:"1279"})}),"\n",(0,t.jsx)(n.h4,{id:"2512-\u914d\u7f6e\u9009\u62e9\u5668",children:"2.5.1.2 \u914d\u7f6e\u9009\u62e9\u5668"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(91099).A+"",width:"2256",height:"1279"})}),"\n",(0,t.jsx)(n.h4,{id:"2513-\u914d\u7f6e\u89c4\u5219",children:"2.5.1.3 \u914d\u7f6e\u89c4\u5219"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(87034).A+"",width:"2256",height:"1279"})}),"\n",(0,t.jsx)(n.h4,{id:"2514-\u5728\u7f51\u9875\u4e2d\u751f\u6210jwt-token",children:"2.5.1.4 \u5728\u7f51\u9875\u4e2d\u751f\u6210jwt token"}),"\n",(0,t.jsxs)(n.p,{children:["* \u5728\u4f60\u7684\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 ",(0,t.jsx)(n.code,{children:"https://jwt.io/"})," \uff0c \u5e76\u4e14\u586b\u5145\u5bf9\u5e94\u7684\u53c2\u6570 \u3002\n* \u5728 ",(0,t.jsx)(n.code,{children:"https://jwt.io/"})," \u7684\u9875\u9762\u914d\u7f6ejwt\u8bf7\u6c42\u5934\u3002\n* \u5728 ",(0,t.jsx)(n.code,{children:"https://jwt.io/"})," \u7684\u9875\u9762\u914d\u7f6ejwt\u53c2\u6570\u4f53\u3002\n* \u5728 ",(0,t.jsx)(n.code,{children:"https://jwt.io/"})," \u7684\u9875\u9762\u914d\u7f6ejwt\u7b7e\u540d\u53c2\u6570\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(65790).A+"",width:"2230",height:"1279"})}),"\n",(0,t.jsx)(n.h4,{id:"2515-\u4f7f\u7528java\u4ee3\u7801\u751f\u6210jwt-token",children:"2.5.1.5 \u4f7f\u7528Java\u4ee3\u7801\u751f\u6210jwt token"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public final class JwtPluginTest {\n    \n  public void generateJwtCode() {\n    final String secreteKey = "shenyu-test-shenyu-test-shenyu-test";\n    Map<String, String> map = new HashMap<>();\n    map.put("id", "1");\n    map.put("name", "xiaoming");\n    Date date = new Date();\n    date.setTime(1655524800000L);\n    String token = Jwts.builder()\n            .setIssuedAt(date)\n            .setExpiration(new Date())\n            .setClaims(map)\n            .signWith(Keys.hmacShaKeyFor(secreteKey.getBytes(StandardCharsets.UTF_8)), SignatureAlgorithm.HS256)\n            .compact();\n    System.out.println(token);\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"2516-\u8bf7\u6c42\u670d\u52a1",children:"2.5.1.6 \u8bf7\u6c42\u670d\u52a1"}),"\n",(0,t.jsx)(n.h5,{id:"25161-\u4f7f\u7528token\u65b9\u5f0f\u8bf7\u6c42\u670d\u52a1",children:"2.5.1.6.1 \u4f7f\u7528token\u65b9\u5f0f\u8bf7\u6c42\u670d\u52a1"}),"\n",(0,t.jsxs)(n.p,{children:["* \u5728\u4f60\u7684\u8bf7\u6c42\u5934\u4e2d\u9644\u5e26 ",(0,t.jsx)(n.code,{children:"token: eyJhbGciOiJIUzI1NiJ9.eyJuYW1lIjoieGlhb21pbmciLCJpZCI6IjEifQ.LdRzGlB49alhq204chwF7pf3C0z8ZpuowPvoQdJmSRw"})," \u5b57\u6bb5\u5e76\u53d1\u8d77\u8bf7\u6c42\u3002"]}),"\n",(0,t.jsx)(n.h5,{id:"25162-\u4f7f\u7528\u8ba4\u8bc1\u65b9\u5f0f\u8bf7\u6c42\u670d\u52a1",children:"2.5.1.6.2 \u4f7f\u7528\u8ba4\u8bc1\u65b9\u5f0f\u8bf7\u6c42\u670d\u52a1"}),"\n",(0,t.jsxs)(n.p,{children:["* \u5728\u4f60\u7684\u8bf7\u6c42\u5934\u4e2d\u9644\u5e26 ",(0,t.jsx)(n.code,{children:"Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJuYW1lIjoieGlhb21pbmciLCJpZCI6IjEifQ.LdRzGlB49alhq204chwF7pf3C0z8ZpuowPvoQdJmSRw"})," \u5e76\u53d1\u8d77\u8bf7\u6c42\u3002"]}),"\n",(0,t.jsx)(n.h4,{id:"2517-\u9a8c\u8bc1\u8bf7\u6c42\u7ed3\u679c",children:"2.5.1.7 \u9a8c\u8bc1\u8bf7\u6c42\u7ed3\u679c"}),"\n",(0,t.jsx)(n.p,{children:"* \u9519\u8bef\u7684\u7b7e\u540d"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n  "code": 401,\n  "message": "Illegal authorization"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"* \u6b63\u786e\u7684\u7b7e\u540d"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n  "id": "123",\n  "name": "hello world save order"\n}\n'})}),"\n",(0,t.jsx)(n.h1,{id:"3\u5982\u4f55\u7981\u7528\u63d2\u4ef6",children:"3.\u5982\u4f55\u7981\u7528\u63d2\u4ef6"}),"\n",(0,t.jsxs)(n.p,{children:["* \u5728 ",(0,t.jsx)(n.code,{children:"shenyu-admin"})," \u57fa\u7840\u914d\u7f6e --\x3e \u63d2\u4ef6\u7ba1\u7406 --\x3e ",(0,t.jsx)(n.code,{children:"jwt"})," \uff0c\u8bbe\u7f6e\u4e3a\u5173\u95ed\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(16479).A+"",width:"2256",height:"1279"})})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},65790:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/jwt-web-428e7d369c17035e0daa838740150227.jpg"},87034:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/jwt-plugin-rule-handle-zh-e8d40c60cf5983defb2df663ae232169.jpg"},91099:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/jwt-plugin-selector-config-zh-aecfd911948d5d06a0003f1dfc0cdda2.jpg"},96216:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/plugin_use_zh-cf88744e5c4b7cc85accbcf32af6e1a3.jpg"}}]);