"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[38475],{28453(e,n,s){s.d(n,{R:()=>t,x:()=>d});var r=s(96540);const o={},c=r.createContext(o);function t(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(c.Provider,{value:n},e.children)}},72294(e,n,s){s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>l,frontMatter:()=>t,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"deployment/deployment-docker","title":"Docker\u90e8\u7f72","description":"docker\u90e8\u7f72","source":"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.4.2/deployment/deployment-docker.md","sourceDirName":"deployment","slug":"/deployment/deployment-docker","permalink":"/zh/docs/2.4.2/deployment/deployment-docker","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/i18n/zh/docusaurus-plugin-content-docs/version-2.4.2/deployment/deployment-docker.md","tags":[],"version":"2.4.2","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Docker\u90e8\u7f72","keywords":["Docker","\u90e8\u7f72"],"description":"docker\u90e8\u7f72"},"sidebar":"tutorialSidebar","previous":{"title":"Docker-compose \u90e8\u7f72","permalink":"/zh/docs/2.4.2/deployment/deployment-docker-compose"},"next":{"title":"K8s\u90e8\u7f72","permalink":"/zh/docs/2.4.2/deployment/deployment-k8s"}}');var o=s(74848),c=s(28453);const t={sidebar_position:3,title:"Docker\u90e8\u7f72",keywords:["Docker","\u90e8\u7f72"],description:"docker\u90e8\u7f72"},d=void 0,i={},a=[{value:"\u542f\u52a8Apache ShenYu Admin",id:"\u542f\u52a8apache-shenyu-admin",level:3},{value:"\u542f\u52a8Apache ShenYu Bootstrap",id:"\u542f\u52a8apache-shenyu-bootstrap",level:3},{value:"\u542f\u52a8 ShenYu Bootstrap \u7684\u540c\u65f6\uff0c\u542f\u52a8 ShenYu Agent",id:"\u542f\u52a8-shenyu-bootstrap-\u7684\u540c\u65f6\u542f\u52a8-shenyu-agent",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["\u672c\u6587\u4ecb\u7ecd\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"docker"})," \u6765\u90e8\u7f72 ",(0,o.jsx)(n.code,{children:"Apache ShenYu"})," \u7f51\u5173\u3002"]}),"\n",(0,o.jsx)(n.h3,{id:"\u542f\u52a8apache-shenyu-admin",children:"\u542f\u52a8Apache ShenYu Admin"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"docker pull apache/shenyu-admin:2.4.2\ndocker network create shenyu\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"h2"})," \u6765\u5b58\u50a8\u540e\u53f0\u6570\u636e\uff1a"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"docker run -d -p 9095:9095 --net shenyu apache/shenyu-admin:2.4.2\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"MySQL"})," \u6765\u5b58\u50a8\u540e\u53f0\u6570\u636e,\u5c06 ",(0,o.jsx)(n.a,{href:"https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.18/mysql-connector-java-8.0.18.jar",children:"mysql-connector.jar"})," \u62f7\u8d1d\u5230 ",(0,o.jsx)(n.code,{children:"/${your_work_dir}/ext-lib"}),"\uff1a"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'docker run -v /${your_work_dir}/ext-lib:/opt/shenyu-admin/ext-lib -e "SPRING_PROFILES_ACTIVE=mysql" -e "spring.datasource.url=jdbc:mysql://${your_ip_port}/shenyu?useUnicode=true&characterEncoding=utf-8&useSSL=false" -e "spring.datasource.username=${your_username}" -e "spring.datasource.password=${your_password}" -d -p 9095:9095 --net shenyu apache/shenyu-admin:2.4.2\n'})}),"\n",(0,o.jsxs)(n.p,{children:["\u53e6\u5916\u4e00\u79cd\u65b9\u5f0f, \u4ece ",(0,o.jsx)(n.a,{href:"https://github.com/apache/incubator-shenyu/blob/master/shenyu-admin/src/main/resources/",children:"\u914d\u7f6e\u6587\u4ef6\u5730\u5740"})," \u4e2d\u628a ",(0,o.jsx)(n.code,{children:"application.yml"}),"\u3001",(0,o.jsx)(n.code,{children:"application-mysql.yml"}),"\u914d\u7f6e\u653e\u5230",(0,o.jsx)(n.code,{children:"${your_work_dir}/conf"})," \uff0c \u7136\u540e\u6267\u884c\u4ee5\u4e0b\u8bed\u53e5\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"docker run -v ${your_work_dir}/conf:/opt/shenyu-admin/conf -v /${your_work_dir}/ext-lib:/opt/shenyu-admin/ext-lib -d -p 9095:9095 --net shenyu apache/shenyu-admin:2.4.2\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"PostgreSql"})," \u6765\u5b58\u50a8\u540e\u53f0\u6570\u636e, \u6267\u884c\u4ee5\u4e0b\u8bed\u53e5\uff1a"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'docker run -e "SPRING_PROFILES_ACTIVE=pg" -e "spring.datasource.url=jdbc:postgresql://${your_ip_port}/shenyu?useUnicode=true&characterEncoding=utf-8&useSSL=false" -e "spring.datasource.username=${your_username}" -e "spring.datasource.password=${your_password}" -d -p 9095:9095 --net shenyu apache/shenyu-admin:2.4.2\n'})}),"\n",(0,o.jsxs)(n.p,{children:["\u53e6\u5916\u4e00\u79cd\u65b9\u5f0f, \u4ece ",(0,o.jsx)(n.a,{href:"https://github.com/apache/incubator-shenyu/blob/master/shenyu-admin/src/main/resources/",children:"\u914d\u7f6e\u6587\u4ef6\u5730\u5740"})," \u4e2d\u628a ",(0,o.jsx)(n.code,{children:"application.yml"}),"\u3001",(0,o.jsx)(n.code,{children:"application-pg.yml"}),"\u914d\u7f6e\u653e\u5230",(0,o.jsx)(n.code,{children:"${your_work_dir}/conf"})," \uff0c \u7136\u540e\u6267\u884c\u4ee5\u4e0b\u8bed\u53e5\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"docker run -v ${your_work_dir}/conf:/opt/shenyu-admin/conf -d -p 9095:9095 --net shenyu apache/shenyu-admin:2.4.2\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u542f\u52a8apache-shenyu-bootstrap",children:"\u542f\u52a8Apache ShenYu Bootstrap"}),"\n",(0,o.jsxs)(n.p,{children:["\u5bbf\u4e3b\u673a\u4e2d\uff0cbootstrap\u7684",(0,o.jsx)(n.a,{href:"https://github.com/apache/incubator-shenyu/tree/master/shenyu-bootstrap/src/main/resources",children:"\u914d\u7f6e\u6587\u4ef6"}),"\u6240\u5728\u76ee\u5f55\u8bb0\u4e3a ",(0,o.jsx)(n.code,{children:"$BOOTSTRAP_CONF"}),"\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"docker network create shenyu\ndocker pull apache/shenyu-bootstrap:2.4.2\ndocker run -d \\\n  -p 9195:9195 \\  -v $BOOTSTRAP_CONF:/opt/shenyu-bootstrap/conf \\\n  apache/shenyu-bootstrap:2.4.2\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u542f\u52a8-shenyu-bootstrap-\u7684\u540c\u65f6\u542f\u52a8-shenyu-agent",children:"\u542f\u52a8 ShenYu Bootstrap \u7684\u540c\u65f6\uff0c\u542f\u52a8 ShenYu Agent"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"2.4.2\u7248\u672c\u5f00\u59cb\u652f\u6301shenyu-agent"}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["agent\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e ",(0,o.jsx)(n.a,{href:"https://github.com/apache/incubator-shenyu/tree/master/shenyu-dist/shenyu-agent-dist/src/main/resources/conf",children:"shenyu-dist/shenyu-agent-dist/src/main/resources/conf/"})," \uff0c\u7f16\u8f91\u597d ",(0,o.jsx)(n.code,{children:"shenyu-agent.yaml"})," \u548c ",(0,o.jsx)(n.code,{children:"tracing-point.yaml"})," \u540e\uff0c\u5c06\u8fd9\u4e24\u4e2a\u6587\u4ef6\u653e\u5728\u540c\u4e00\u76ee\u5f55\u4e0b\uff0c\u8bb0\u4e3a ",(0,o.jsx)(n.code,{children:"$AGENT_CONF"}),"\u3002"]}),"\n",(0,o.jsxs)(n.p,{children:["\u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u8003 ",(0,o.jsx)(n.a,{href:"/zh/docs/2.4.2/user-guide/observability/",children:"\u53ef\u89c2\u6d4b\u6027"})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u62c9\u53d6docker\u955c\u50cf\u5e76\u542f\u52a8"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["\u9644\u5e26\u53c2\u6570 ",(0,o.jsx)(n.code,{children:"agent"})," \u8868\u793a\u542f\u52a8 ",(0,o.jsx)(n.code,{children:"shenyu-agent"}),"\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"docker run -d \\\n  -p 9195:9195 \\\n  -v $BOOTSTRAP_CONF:/opt/shenyu-bootstrap/conf \\\n  --name shenyu-bootstrap \\\n  --net shenyu \\\n  --env SHENYU_SYNC_WEBSOCKET_URLS=ws://shenyu-admin:9095/websocket \\\n  apache/shenyu-bootstrap:${current.version}\n"})})]})}function l(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}}}]);