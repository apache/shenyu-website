"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[22998],{2609(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/springcloud_metadata_en-3dba84d698af7567e3ad9db0c68e0484.png"},21610(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"plugin-center/proxy/spring-cloud-plugin","title":"Spring Cloud Plugin","description":"SpringCloud Plugin","source":"@site/versioned_docs/version-2.6.1/plugin-center/proxy/spring-cloud-plugin.md","sourceDirName":"plugin-center/proxy","slug":"/plugin-center/proxy/spring-cloud-plugin","permalink":"/docs/2.6.1/plugin-center/proxy/spring-cloud-plugin","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.6.1/plugin-center/proxy/spring-cloud-plugin.md","tags":[],"version":"2.6.1","frontMatter":{"title":"Spring Cloud Plugin","keywords":["SpringCloud"],"description":"SpringCloud Plugin"},"sidebar":"tutorialSidebar","previous":{"title":"Sofa Plugin","permalink":"/docs/2.6.1/plugin-center/proxy/sofa-plugin"},"next":{"title":"Tars Plugin","permalink":"/docs/2.6.1/plugin-center/proxy/tars-plugin"}}');var r=i(74848),l=i(28453);const c={title:"Spring Cloud Plugin",keywords:["SpringCloud"],description:"SpringCloud Plugin"},d="1. Overview",o={},a=[{value:"1.1 Plugin Name",id:"11-plugin-name",level:2},{value:"1.2 Appropriate Scenario",id:"12-appropriate-scenario",level:2},{value:"1.3 Plugin functionality",id:"13-plugin-functionality",level:2},{value:"1.4 Plugin code",id:"14-plugin-code",level:2},{value:"1.5 Added Since Which shenyu version",id:"15-added-since-which-shenyu-version",level:2},{value:"2.1 Plugin-use procedure chart",id:"21-plugin-use-procedure-chart",level:2},{value:"2.2 Import pom",id:"22-import-pom",level:2},{value:"2.3 Config SpringCloud in ShenYu-Boostrap",id:"23-config-springcloud-in-shenyu-boostrap",level:2},{value:"2.3.1 Config SpringCloud Registry With Eureka",id:"231-config-springcloud-registry-with-eureka",level:3},{value:"2.3.2 Config SpringCloud Registry With Nacos",id:"232-config-springcloud-registry-with-nacos",level:3},{value:"2.3.3 Config SpringCloud LoadBalancer",id:"233-config-springcloud-loadbalancer",level:3},{value:"2.4 Enable plugin",id:"24-enable-plugin",level:2},{value:"2.5 Config plugin",id:"25-config-plugin",level:2},{value:"2.5.1 Plugin config",id:"251-plugin-config",level:3},{value:"2.5.2 Selector And Gray Config",id:"252-selector-and-gray-config",level:3},{value:"2.5.3 Rule Config",id:"253-rule-config",level:3},{value:"2.5.4 SpringCloud ServiceInstance Cache Config",id:"254-springcloud-serviceinstance-cache-config",level:3},{value:"2.6 Examples",id:"26-examples",level:2},{value:"2.6.1 Use ShenYu Request SpringCloud Service",id:"261-use-shenyu-request-springcloud-service",level:3},{value:"2.6.1.1 Preparation",id:"2611-preparation",level:4},{value:"2.6.1.2 Plugin Config",id:"2612-plugin-config",level:4},{value:"2.6.1.3 Selector Config",id:"2613-selector-config",level:4},{value:"2.6.1.4 Rule Config",id:"2614-rule-config",level:4},{value:"2.6.1.5 Request SpringCloud Service and Check Result",id:"2615-request-springcloud-service-and-check-result",level:4},{value:"2.6.2 Use ShenYu Request Unregistered SpringCloud Service",id:"262-use-shenyu-request-unregistered-springcloud-service",level:3},{value:"2.6.2.1 Preparation",id:"2621-preparation",level:4},{value:"2.6.2.2 Plugin Config",id:"2622-plugin-config",level:4},{value:"2.6.2.3 Selector Config",id:"2623-selector-config",level:4},{value:"2.6.2.4 Rule Config",id:"2624-rule-config",level:4},{value:"2.6.2.5 Access Unregistered Services Through Configuration",id:"2625-access-unregistered-services-through-configuration",level:4},{value:"2.6.2.5.1 use the field <code>rpc_type</code> in http request header",id:"26251-use-the-field-rpc_type-in-http-request-header",level:5},{value:"2.6.2.5.2 add meta_data in ShenYu Admin",id:"26252-add-meta_data-in-shenyu-admin",level:5},{value:"2.6.2.6 Request SpringCloud Service and Check Result",id:"2626-request-springcloud-service-and-check-result",level:4}];function t(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"1-overview",children:"1. Overview"})}),"\n",(0,r.jsx)(n.h2,{id:"11-plugin-name",children:"1.1 Plugin Name"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"SpringCloud Plugin"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"12-appropriate-scenario",children:"1.2 Appropriate Scenario"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"transform http to springcloud"}),"\n",(0,r.jsx)(n.li,{children:"springcloud gray flow control"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"13-plugin-functionality",children:"1.3 Plugin functionality"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"transform http protocol into springCloud protocol."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"14-plugin-code",children:"1.4 Plugin code"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Core Module ",(0,r.jsx)(n.code,{children:"shenyu-plugin-springcloud"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Core Class ",(0,r.jsx)(n.code,{children:"org.apache.shenyu.plugin.springcloud.SpringCloudPlugin"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"15-added-since-which-shenyu-version",children:"1.5 Added Since Which shenyu version"}),"\n",(0,r.jsx)(n.p,{children:"Since ShenYu 2.4.0"}),"\n",(0,r.jsx)(n.h1,{id:"2-how-to-use-plugin",children:"2. How to use plugin"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Add related dependencies and enable plugin, please refer to: ",(0,r.jsx)(n.a,{href:"../../quick-start/quick-start-springcloud",children:"Quick start with Spring Cloud"})," ."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Spring Cloud"})," client access, please refer to: ",(0,r.jsx)(n.a,{href:"/docs/2.6.1/user-guide/proxy/spring-cloud-proxy",children:"Spring Cloud Proxy"})," ."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"21-plugin-use-procedure-chart",children:"2.1 Plugin-use procedure chart"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(36867).A+"",width:"343",height:"964"})}),"\n",(0,r.jsx)(n.h2,{id:"22-import-pom",children:"2.2 Import pom"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Eureka Registry"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<dependency>\n  <groupId>org.apache.shenyu</groupId>\n  <artifactId>shenyu-spring-boot-starter-plugin-springcloud</artifactId>\n  <version>${project.version}</version>\n</dependency>\n\n<dependency>\n  <groupId>org.springframework.cloud</groupId>\n  <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n  <version>${eureka-client.version}</version>\n</dependency>\n\n<dependency>\n  <groupId>org.springframework.cloud</groupId>\n  <artifactId>spring-cloud-commons</artifactId>\n  <version>${spring-cloud-commons.version}</version>\n</dependency>\n\n<dependency>\n  <groupId>org.apache.shenyu</groupId>\n  <artifactId>shenyu-spring-boot-starter-plugin-httpclient</artifactId>\n  <version>${project.version}</version>\n</dependency>\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Nacos Registry"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<dependency>\n  <groupId>org.apache.shenyu</groupId>\n  <artifactId>shenyu-spring-boot-starter-plugin-springcloud</artifactId>\n  <version>${project.version}</version>\n</dependency>\n\n<dependency>\n  <groupId>com.alibaba.cloud</groupId>\n  <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n  <version>${nacos-discovery.version}</version>\n</dependency>\n\n<dependency>\n  <groupId>org.springframework.cloud</groupId>\n  <artifactId>spring-cloud-commons</artifactId>\n  <version>${spring-cloud-commons.version}</version>\n</dependency>\n\n<dependency>\n  <groupId>org.apache.shenyu</groupId>\n  <artifactId>shenyu-spring-boot-starter-plugin-httpclient</artifactId>\n  <version>${project.version}</version>\n</dependency>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"23-config-springcloud-in-shenyu-boostrap",children:"2.3 Config SpringCloud in ShenYu-Boostrap"}),"\n",(0,r.jsx)(n.h3,{id:"231-config-springcloud-registry-with-eureka",children:"2.3.1 Config SpringCloud Registry With Eureka"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    discovery:\n      enabled: true\n\neureka:\n  client:\n    enabled: true\n    serviceUrl:\n      defaultZone: http://localhost:8761/eureka/\n  instance:\n    prefer-ip-address: true\n"})}),"\n",(0,r.jsx)(n.h3,{id:"232-config-springcloud-registry-with-nacos",children:"2.3.2 Config SpringCloud Registry With Nacos"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    discovery:\n      enabled: true\n    nacos:\n      discovery:\n        server-addr: 127.0.0.1:8848 # Spring Cloud Alibaba Dubbo use this.\n        enabled: true\n        namespace: ShenyuRegisterCenter\n"})}),"\n",(0,r.jsx)(n.h3,{id:"233-config-springcloud-loadbalancer",children:"2.3.3 Config SpringCloud LoadBalancer"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Notice"})}),"\n",(0,r.jsxs)(n.p,{children:["After ShenYu 2.5.0(include), ShenYu use ",(0,r.jsx)(n.code,{children:"shenyu-loadbalancer"})," as loadbalancer client, you just config loadbalance in springcloud plugin rule.\nif you don't config loadbalance, springcloud plugin will use ",(0,r.jsx)(n.code,{children:"roundRobin"})," algorithm."]}),"\n",(0,r.jsxs)(n.p,{children:["Before ShenYu 2.4.3(include), ShenYu use ",(0,r.jsx)(n.code,{children:"Ribbon"})," as loadbalancer client, you must config loadbalancer as follows."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    loadbalancer:\n      ribbon:\n        enabled: true\n"})}),"\n",(0,r.jsx)(n.h2,{id:"24-enable-plugin",children:"2.4 Enable plugin"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In shenyu-admin --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,r.jsx)(n.code,{children:"springCloud"})," set Status enabled."]}),"\n"]}),"\n",(0,r.jsx)("img",{src:"/img/shenyu/quick-start/springcloud/springcloud_open_en.png",width:"60%",height:"50%"}),"\n",(0,r.jsx)(n.h2,{id:"25-config-plugin",children:"2.5 Config plugin"}),"\n",(0,r.jsx)(n.h3,{id:"251-plugin-config",children:"2.5.1 Plugin config"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"you must config springcloud registry and set springcloud plugin enabled."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"252-selector-and-gray-config",children:"2.5.2 Selector And Gray Config"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(62509).A+"",width:"2256",height:"1279"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Gray routing"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["if you want to user gray route in springCloud-plugin, you can click the ",(0,r.jsx)(n.code,{children:"gray"})," button."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(43115).A+"",width:"2256",height:"1279"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Gray level publishing can customize and control the traffic proportion of new version applications when publishing new version applications, gradually complete the full launch of new version applications, maximize the business risk caused by new version publishing, reduce the impact surface caused by faults, and support rapid roll back."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"when the gray is open,Gateway load balancing will select one node from the current node list for routing and you can modify node weights to change the weight of nodes in the load balancing algorithm."}),"\n",(0,r.jsx)("img",{src:"/img/shenyu/plugin/springcloud/gray.png",width:"80%",height:"80%"}),"\n",(0,r.jsxs)(n.p,{children:["It should be noted that,if your business instance not use the client jar of ",(0,r.jsx)(n.code,{children:"shenyu-client-springcloud"}),", You should add gray node information manually on this selector page."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"serviceId"}),": your springcloud service id"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"gray"}),"\uff1aenable gray routing."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"protocol"}),": protocol default is 'http://'."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"upstreamUrl"}),": the server instance host, ip",":port","."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"weight"}),": the server instance and participate in load balancing calculation."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"status"}),": true: the server is available\uff0cfalse: the server is unavailable."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"timestamp"}),": the server's start time."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"warmup"}),": the server's warm up time and and participate in load balancing calculation."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"253-rule-config",children:"2.5.3 Rule Config"}),"\n",(0,r.jsxs)(n.p,{children:["Rule Handler, the ",(0,r.jsx)(n.code,{children:"handle"})," field, can be performed by the gateway after the final matching of traffic. For more information, please refer to ",(0,r.jsx)(n.a,{href:"../../user-guide/admin-usage/plugin-handle-explanation",children:"Plugin handle management"})," in Plugin Config."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["use ",(0,r.jsx)(n.code,{children:"shenyu-client-springcloud"})," rule config"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(32234).A+"",width:"2256",height:"1279"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"details\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"timeout"}),"\uff1aset time out."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"loadbalance"}),"\uff1aloadbalance algorithm,there are three options: ",(0,r.jsx)(n.code,{children:"roundRobin"}),",",(0,r.jsx)(n.code,{children:"random"}),",",(0,r.jsx)(n.code,{children:"hash"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["not use ",(0,r.jsx)(n.code,{children:"shenyu-client-springcloud"})," rule config"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(89937).A+"",width:"2190",height:"1116"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"details\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"path"}),"\uff1arequest path."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"timeout"}),"\uff1aset time out."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"254-springcloud-serviceinstance-cache-config",children:"2.5.4 SpringCloud ServiceInstance Cache Config"}),"\n",(0,r.jsxs)(n.p,{children:["you can config springcloud serviceInstance cache in ",(0,r.jsx)(n.code,{children:"shenyu-bootstrap.yml"})," as follows."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"shenyu:\n  springCloudCache:\n    enabled: false\n"})}),"\n",(0,r.jsx)(n.p,{children:"this config will help you get serviceInstance from springcloud registry every heartbeat time(listen to spring cloud heartbeat event)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["when you use nacos or eureka as registry, you can config springcloud serviceInstance cache to ",(0,r.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["when you use zookeeper or consul as registry, you can config springcloud serviceInstance cache to ",(0,r.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"26-examples",children:"2.6 Examples"}),"\n",(0,r.jsx)(n.h3,{id:"261-use-shenyu-request-springcloud-service",children:"2.6.1 Use ShenYu Request SpringCloud Service"}),"\n",(0,r.jsx)(n.h4,{id:"2611-preparation",children:"2.6.1.1 Preparation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Start ",(0,r.jsx)(n.code,{children:"Eureka"})," or ",(0,r.jsx)(n.code,{children:"Nacos"})," Registry, if you use eureka, start ",(0,r.jsx)(n.code,{children:"shenyu-examples-eureka"})," in ",(0,r.jsx)(n.code,{children:"shenyu-example"})]}),"\n",(0,r.jsxs)(n.li,{children:["Start ",(0,r.jsx)(n.code,{children:"ShenYu Admin"})," application"]}),"\n",(0,r.jsxs)(n.li,{children:["Start ",(0,r.jsx)(n.code,{children:"shenyu-examples-springcloud"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"2612-plugin-config",children:"2.6.1.2 Plugin Config"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In shenyu-admin --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,r.jsx)(n.code,{children:"springCloud"})," set Status enabled."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Config SpringCloud Registry in ",(0,r.jsx)(n.code,{children:"ShenYu Bootstrap"}),", please read [2.3 Config SpringCloud in ShenYu-Boostrap](#2.3 Config SpringCloud in ShenYu-Boostrap)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"2613-selector-config",children:"2.6.1.3 Selector Config"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(62509).A+"",width:"2256",height:"1279"})}),"\n",(0,r.jsxs)(n.p,{children:["if your want to use gray flow and the gray flow have registered to ",(0,r.jsx)(n.code,{children:"ShenyYu"}),", you must config gray upstream as follows."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(43115).A+"",width:"2256",height:"1279"})}),"\n",(0,r.jsx)(n.h4,{id:"2614-rule-config",children:"2.6.1.4 Rule Config"}),"\n",(0,r.jsxs)(n.p,{children:["if you use ",(0,r.jsx)(n.code,{children:"shenyu-client-springcloud"})," register service to ",(0,r.jsx)(n.code,{children:"ShenYu"}),", you don't config rule, if you want to change rule config,\nplease read [2.5.3 Rule Config](#2.5.3 Rule Config)"]}),"\n",(0,r.jsx)(n.h4,{id:"2615-request-springcloud-service-and-check-result",children:"2.6.1.5 Request SpringCloud Service and Check Result"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(90871).A+"",width:"1636",height:"970"})}),"\n",(0,r.jsx)(n.h3,{id:"262-use-shenyu-request-unregistered-springcloud-service",children:"2.6.2 Use ShenYu Request Unregistered SpringCloud Service"}),"\n",(0,r.jsx)(n.h4,{id:"2621-preparation",children:"2.6.2.1 Preparation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Start ",(0,r.jsx)(n.code,{children:"Eureka"})," or ",(0,r.jsx)(n.code,{children:"Nacos"})," Registry, if you use eureka, start ",(0,r.jsx)(n.code,{children:"shenyu-examples-eureka"})," in ",(0,r.jsx)(n.code,{children:"shenyu-example"})]}),"\n",(0,r.jsxs)(n.li,{children:["Start ",(0,r.jsx)(n.code,{children:"ShenYu Admin"})," application"]}),"\n",(0,r.jsxs)(n.li,{children:["Start ",(0,r.jsx)(n.code,{children:"shenyu-examples-springcloud"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"2622-plugin-config",children:"2.6.2.2 Plugin Config"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In shenyu-admin --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,r.jsx)(n.code,{children:"springCloud"})," set Status enabled."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Config SpringCloud Registry in ",(0,r.jsx)(n.code,{children:"ShenYu Bootstrap"}),", please read [2.3 Config SpringCloud in ShenYu-Boostrap](#2.3 Config SpringCloud in ShenYu-Boostrap)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"2623-selector-config",children:"2.6.2.3 Selector Config"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(62509).A+"",width:"2256",height:"1279"})}),"\n",(0,r.jsxs)(n.p,{children:["if your want to use gray flow and the gray flow unregister to ",(0,r.jsx)(n.code,{children:"ShenyYu"}),", you must config gray upstream as follows."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(43115).A+"",width:"2256",height:"1279"})}),"\n",(0,r.jsx)(n.h4,{id:"2624-rule-config",children:"2.6.2.4 Rule Config"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(89937).A+"",width:"2190",height:"1116"})}),"\n",(0,r.jsxs)(n.p,{children:["you must config ",(0,r.jsx)(n.code,{children:"path"})," in rule config, ",(0,r.jsx)(n.code,{children:"path"})," is your service uri, for example: ",(0,r.jsx)(n.code,{children:"/springcloud/new/feature/gateway/not"}),",\n",(0,r.jsx)(n.code,{children:"timeout"})," is your service allow timeout."]}),"\n",(0,r.jsx)(n.h4,{id:"2625-access-unregistered-services-through-configuration",children:"2.6.2.5 Access Unregistered Services Through Configuration"}),"\n",(0,r.jsxs)(n.h5,{id:"26251-use-the-field-rpc_type-in-http-request-header",children:["2.6.2.5.1 use the field ",(0,r.jsx)(n.code,{children:"rpc_type"})," in http request header"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"### shengyu getway proxy not support\nPOST http://localhost:9195/springcloud/new/feature/gateway/not\nAccept: application/json\nContent-Type: application/json\nrpc_type: springCloud\n"})}),"\n",(0,r.jsx)(n.h5,{id:"26252-add-meta_data-in-shenyu-admin",children:"2.6.2.5.2 add meta_data in ShenYu Admin"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(2609).A+"",width:"2256",height:"1279"})}),"\n",(0,r.jsx)(n.h4,{id:"2626-request-springcloud-service-and-check-result",children:"2.6.2.6 Request SpringCloud Service and Check Result"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:i(46767).A+"",width:"1784",height:"957"})}),"\n",(0,r.jsx)(n.h1,{id:"3-how-to-disable-plugin",children:"3. How to disable plugin"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In ",(0,r.jsx)(n.code,{children:"shenyu-admin"})," --\x3e BasicConfig --\x3e Plugin --\x3e ",(0,r.jsx)(n.code,{children:"springCloud"})," set Status disable."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},28453(e,n,i){i.d(n,{R:()=>c,x:()=>d});var s=i(96540);const r={},l=s.createContext(r);function c(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(l.Provider,{value:n},e.children)}},32234(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/rule_en_2-accf682c14590865cbcdcb39b6d58b54.png"},36867(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/plugin_use_en-8b5661551cdf92fdabc9cb2e7947cffc.jpg"},43115(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/gray_en_2-a6f62d441d0d0b41452abdc8962eb544.png"},46767(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/springcloud-request-unregistered-9a6e941b32cd45ac1789f4c5ef115529.png"},62509(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/selector_en_2-ee54c943437d9b25d6014ebf6fd2ef4e.png"},89937(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/rule_en-ac80ec4eabec57e3005aca1b5c9fa3c1.png"},90871(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/springcloud-request-a2b6b014e19f9de790a62f353723071b.png"}}]);