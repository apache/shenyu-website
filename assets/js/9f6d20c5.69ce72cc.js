"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[42930],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>d});var s=i(96540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}},79267:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/data_permission-f382375f134eeb359e481ee2cd43482d.png"},82832:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/shenyu-db-0847449c4fb817f83e61abad7125ae4a.png"},89224:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/shenyu-permission-db-90c870eefea0da663079cdf6638c7ce7.png"},93956:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>o});var s=i(74848),t=i(28453);const r={sidebar_position:1,title:"Admin Database Design",keywords:["db"],description:"ShenYu Admin Database Design"},a=void 0,d={id:"design/database-design",title:"Admin Database Design",description:"ShenYu Admin Database Design",source:"@site/versioned_docs/version-2.5.0/design/database-design.md",sourceDirName:"design",slug:"/design/database-design",permalink:"/docs/2.5.0/design/database-design",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.5.0/design/database-design.md",tags:[],version:"2.5.0",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Admin Database Design",keywords:["db"],description:"ShenYu Admin Database Design"},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/2.5.0/"},next:{title:"Data Sync Design",permalink:"/docs/2.5.0/design/data-sync"}},l={},o=[{value:"Plugin, Selector And Rule",id:"plugin-selector-and-rule",level:2},{value:"Resource Permission",id:"resource-permission",level:2},{value:"Data Permission",id:"data-permission",level:2},{value:"Meta Data",id:"meta-data",level:2},{value:"Dictionary Management",id:"dictionary-management",level:2}];function c(e){const n={code:"code",h2:"h2",img:"img",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Apache Shenyu Admin is the management system of the gateway, which can manage all plugins, selectors and rules visually, set users, roles and resources."}),"\n",(0,s.jsx)(n.h2,{id:"plugin-selector-and-rule",children:"Plugin, Selector And Rule"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Plugin: ShenYu uses the plugin design idea to realize the hot plug of the plugin, which is easy to expand. Built-in rich plugins, including RPC proxy, circuit breaker and current limiting, authority and certification, monitoring, and more."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Selector: Each plugin can set multiple selectors to carry out preliminary filtering of traffic."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Rule: Multiple rules can be set per selector for more fine-grained control of flow."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The Database Table UML Diagram:"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(82832).A+"",width:"2790",height:"1914"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Detailed design:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"One plugin corresponds to multiple selectors,one selector corresponds to multiple rules."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"One selector corresponds to multiple match conditions,one rule corresponds to multiple match conditions."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Each rule handles differently in corresponding plugin according to field handler,field handler is a kind of data of JSON string type.You can view detail during the use of shenyu-admin."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"resource-permission",children:"Resource Permission"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The resource are the menus and buttons in the shenyu-admin console."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Resource Permission use database to store user name,role,resource data and relationship."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The Resource Permission Table UML Diagram:\n",(0,s.jsx)(n.img,{src:i(89224).A+"",width:"2790",height:"1914"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Detailed design:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"one user corresponds to multiple role,one role corresponds to multiple resources."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"data-permission",children:"Data Permission"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Data Permission use database to store the relationship between users, selectors and rules."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The Data Permission Table UML Diagram:\n",(0,s.jsx)(n.img,{alt:"data permission uml",src:i(79267).A+"",width:"1031",height:"707"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Detailed design:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The most important table is ",(0,s.jsx)(n.code,{children:"data_permission"}),", where a user corresponds to multiple data permissions."]}),"\n",(0,s.jsxs)(n.li,{children:["The field ",(0,s.jsx)(n.code,{children:"data_type"})," distinguishes between different types of data, which corresponds to the following: 0 -> selector, 1 -> rule."]}),"\n",(0,s.jsxs)(n.li,{children:["The field ",(0,s.jsx)(n.code,{children:"data_id"})," holds the primary key id of the corresponding type."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"meta-data",children:"Meta Data"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Metadata is used for generic invoke by gateway."}),"\n",(0,s.jsx)(n.li,{children:"For each interface method, there is one piece of metadata."}),"\n",(0,s.jsx)(n.li,{children:"The Database Table UML Diagram:"}),"\n"]}),"\n",(0,s.jsx)("img",{src:"/img/shenyu/db/mata_data_table.png",width:"30%",height:"30%"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Detailed design\uff1a","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"path"}),": When the gateway is requested, a piece of data will be matched according to ",(0,s.jsx)(n.code,{children:"path"}),", and then the subsequent process will be carried out."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"rpc_ext"}),": Used to hold extended information for the RPC proxy.\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"dictionary-management",children:"Dictionary Management"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Dictionary management is used to maintain and manage public data dictionaries."}),"\n",(0,s.jsx)(n.li,{children:"The Database Table UML Diagram:"}),"\n"]}),"\n",(0,s.jsx)("img",{src:"/img/shenyu/db/shenyu_dict.png",width:"30%",height:"30%"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);