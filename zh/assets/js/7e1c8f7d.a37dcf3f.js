"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[48916],{28453(e,n,s){s.d(n,{R:()=>r,x:()=>l});var i=s(96540);const c={},d=i.createContext(c);function r(e){const n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),i.createElement(d.Provider,{value:n},e.children)}},50007(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>a,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"deployment/deployment-cluster","title":"\u96c6\u7fa4\u90e8\u7f72","description":"\u96c6\u7fa4\u90e8\u7f72","source":"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.4.1/deployment/deployment-cluster.md","sourceDirName":"deployment","slug":"/deployment/deployment-cluster","permalink":"/zh/docs/2.4.1/deployment/deployment-cluster","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/i18n/zh/docusaurus-plugin-content-docs/version-2.4.1/deployment/deployment-cluster.md","tags":[],"version":"2.4.1","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"\u96c6\u7fa4\u90e8\u7f72","keywords":["\u7f51\u5173\u96c6\u7fa4","\u96c6\u7fa4\u90e8\u7f72"],"description":"\u96c6\u7fa4\u90e8\u7f72"},"sidebar":"tutorialSidebar","previous":{"title":"\u81ea\u5b9a\u4e49\u90e8\u7f72","permalink":"/zh/docs/2.4.1/deployment/deployment-custom"},"next":{"title":"Dubbo\u5feb\u901f\u5f00\u59cb","permalink":"/zh/docs/2.4.1/quick-start/quick-start-dubbo"}}');var c=s(74848),d=s(28453);const r={sidebar_position:7,title:"\u96c6\u7fa4\u90e8\u7f72",keywords:["\u7f51\u5173\u96c6\u7fa4","\u96c6\u7fa4\u90e8\u7f72"],description:"\u96c6\u7fa4\u90e8\u7f72"},l=void 0,t={},o=[{value:"\u73af\u5883\u51c6\u5907",id:"\u73af\u5883\u51c6\u5907",level:3},{value:"\u542f\u52a8 Apache ShenYu Admin",id:"\u542f\u52a8-apache-shenyu-admin",level:3},{value:"\u542f\u52a8 Apache ShenYu Boostrap",id:"\u542f\u52a8-apache-shenyu-boostrap",level:3},{value:"\u542f\u52a8 Nginx",id:"\u542f\u52a8-nginx",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.p,{children:["\u6587\u672c\u662f\u4ecb\u7ecd\u5728\u96c6\u7fa4\u73af\u5883\u4e2d\u5feb\u901f\u90e8\u7f72",(0,c.jsx)(n.code,{children:"ShenYu"}),"\u7f51\u5173\u3002"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:["\u5728\u9605\u8bfb\u672c\u6587\u6863\u65f6\uff0c\u4f60\u53ef\u4ee5\u5148\u9605\u8bfb",(0,c.jsx)(n.a,{href:"/zh/docs/2.4.1/deployment/deployment-package",children:"\u4e8c\u8fdb\u5236\u5305\u90e8\u7f72"}),"\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u73af\u5883\u51c6\u5907",children:"\u73af\u5883\u51c6\u5907"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u81f3\u5c11\u51c6\u5907\u4e24\u53f0\u5df2\u7ecf\u5b89\u88c5\u4e86JDK1.8+\u7684\u670d\u52a1\u5668\u7528\u4e8e\u90e8\u7f72\u7f51\u5173\u542f\u52a8\u5668\u3002"}),"\n",(0,c.jsx)(n.li,{children:"\u51c6\u5907\u4e00\u53f0\u5df2\u7ecf\u5b89\u88c5\u4e86mysql\u3001pgsql\u3001h2\u548cJDK1.8+\u7684\u670d\u52a1\u5668\u7528\u4e8e\u90e8\u7f72\u7f51\u5173\u7ba1\u7406\u7aef\u3002"}),"\n",(0,c.jsx)(n.li,{children:"\u51c6\u5907\u4e00\u53f0\u670d\u52a1\u5668\u7528\u4e8e\u90e8\u7f72Nginx\u3002"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u542f\u52a8-apache-shenyu-admin",children:"\u542f\u52a8 Apache ShenYu Admin"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u5728\u4f60\u7684\u7f51\u5173\u7ba1\u7406\u7aef\u670d\u52a1\u5668\u4e0b\u8f7d\u5e76\u89e3\u538b",(0,c.jsx)(n.a,{href:"https://archive.apache.org/dist/incubator/shenyu/2.4.1/apache-shenyu-incubating-2.4.1-admin-bin.tar.gz",children:"apache-shenyu-incubating-2.4.1-admin-bin.tar.gz"})," \u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u914d\u7f6e\u4f60\u7684\u6570\u636e\u5e93\uff0c\u8fdb\u5165",(0,c.jsx)(n.code,{children:"/conf"}),"\u76ee\u5f55\uff0c\u5728",(0,c.jsx)(n.code,{children:"application.yaml"}),"\u6587\u4ef6\u4e2d\u4fee\u6539",(0,c.jsx)(n.code,{children:"spring.profiles.active"}),"\u8282\u70b9\u4e3a",(0,c.jsx)(n.code,{children:"mysql"}),", ",(0,c.jsx)(n.code,{children:"pg"})," or ",(0,c.jsx)(n.code,{children:"h2"}),"\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u914d\u7f6e\u4f60\u7684\u6570\u636e\u540c\u6b65\u65b9\u5f0f\uff0c\u8fdb\u5165",(0,c.jsx)(n.code,{children:"/conf"}),"\u76ee\u5f55\uff0c\u5728",(0,c.jsx)(n.code,{children:"application.yaml"}),"\u6587\u4ef6\u4e2d\u4fee\u6539",(0,c.jsx)(n.code,{children:"shenyu.sync"}),"\u8282\u70b9\u4e3a",(0,c.jsx)(n.code,{children:"websocket"}),", ",(0,c.jsx)(n.code,{children:"http"}),", ",(0,c.jsx)(n.code,{children:"zookeeper"}),", ",(0,c.jsx)(n.code,{children:"etcd"}),", ",(0,c.jsx)(n.code,{children:"consul"})," \u6216\u8005 ",(0,c.jsx)(n.code,{children:"nacos"}),"\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u8fdb\u5165",(0,c.jsx)(n.code,{children:"bin"}),"\u76ee\u5f55\uff0c\u542f\u52a8ShenYu Bootstrap\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"> windows: start.bat \n\n> linux: ./start.sh \n"})}),"\n",(0,c.jsx)(n.h3,{id:"\u542f\u52a8-apache-shenyu-boostrap",children:"\u542f\u52a8 Apache ShenYu Boostrap"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u5728\u4f60\u7684\u7f51\u5173\u542f\u52a8\u5668\u670d\u52a1\u5668\u4e0b\u8f7d\u5e76\u89e3\u538b ",(0,c.jsx)(n.a,{href:"https://archive.apache.org/dist/incubator/shenyu/2.4.1/apache-shenyu-incubating-2.4.1-bootstrap-bin.tar.gz",children:"apache-shenyu-incubating-2.4.1-bootstrap-bin.tar.gz"})," \u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u914d\u7f6e\u4f60\u7684\u6570\u636e\u540c\u6b65\u65b9\u5f0f\uff0c\u8fdb\u5165",(0,c.jsx)(n.code,{children:"/conf"}),"\u76ee\u5f55\uff0c\u5728",(0,c.jsx)(n.code,{children:"application.yaml"}),"\u6587\u4ef6\u4e2d\u4fee\u6539",(0,c.jsx)(n.code,{children:"shenyu.sync"}),"\u8282\u70b9\u4e3a",(0,c.jsx)(n.code,{children:"websocket"}),", ",(0,c.jsx)(n.code,{children:"http"}),", ",(0,c.jsx)(n.code,{children:"zookeeper"}),", ",(0,c.jsx)(n.code,{children:"etcd"}),", ",(0,c.jsx)(n.code,{children:"consul"})," \u6216\u8005 ",(0,c.jsx)(n.code,{children:"nacos"}),"\uff0c\u8fd9\u4e2a\u914d\u7f6e\u5fc5\u987b\u4e0e",(0,c.jsx)(n.code,{children:"ShenyYu Admin"}),"\u7684\u914d\u7f6e\u4fdd\u6301\u76f8\u540c\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u8fdb\u5165",(0,c.jsx)(n.code,{children:"bin"}),"\u76ee\u5f55\uff0c\u542f\u52a8ShenYu Admin\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"> windwos : start.bat \n\n> linux : ./start.sh \n"})}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:["\u5728\u5b8c\u6210\u8fd9\u4e9b\u64cd\u4f5c\u540e\uff0c\u4f60\u5c06\u6210\u529f\u90e8\u7f72",(0,c.jsx)(n.code,{children:"ShenYu Boostrap"}),"\u96c6\u7fa4\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u5047\u5982\u4f60",(0,c.jsx)(n.code,{children:"10.1.1.1"}),"\u548c",(0,c.jsx)(n.code,{children:"10.1.1.2"}),"\u4e24\u53f0\u670d\u52a1\u5668\u5728\u5c06\u90e8\u7f72",(0,c.jsx)(n.code,{children:"ShenYu Bootstrap"}),"\uff0c\u5e76\u4e14\u5728",(0,c.jsx)(n.code,{children:"10.1.1.3"}),"\u90e8\u7f72nginx\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u542f\u52a8-nginx",children:"\u542f\u52a8 Nginx"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"\u4e0b\u8f7d\u5e76\u5b89\u88c5nginx\u3002"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["\u5728",(0,c.jsx)(n.code,{children:"nginx.conf"}),"\u6587\u4ef6\u4e2d\u4fee\u6539",(0,c.jsx)(n.code,{children:"upstream"}),"\u548c",(0,c.jsx)(n.code,{children:"server"}),"\u8282\u70b9\u7684\u914d\u7f6e\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-nginx",children:"upstream shenyu_gateway_cluster {\n  ip_hash;\n  server 10.1.1.1:9195 max_fails=3 fail_timeout=10s weight=50;\n  server 10.1.1.2:9195 max_fails=3 fail_timeout=10s weight=50;\n}\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-nginx",children:"server {\n  location / {\n\t\tproxy_pass http://shenyu_gateway_cluster;\n\t\tproxy_set_header HOST $host;\n\t\tproxy_read_timeout 10s;\n\t\tproxy_connect_timeout 10s;\n  }\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u542f\u52a8 nginx."}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"> windows: ./nginx.exe\n\n> linux: /usr/local/nginx/sbin/nginx \n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u9a8c\u8bc1nginx\u914d\u7f6e\u662f\u5426\u751f\u6548\uff0c\u5728",(0,c.jsx)(n.code,{children:"ShenYu Bootstrap"}),"\u6216\u8005",(0,c.jsx)(n.code,{children:"Nginx"}),"\u7684\u65e5\u5fd7\u6587\u4ef6\u4e2d\u67e5\u770b\u8bf7\u6c42\u88ab\u5206\u53d1\u5230\u90a3\u53f0\u670d\u52a1\u5668\u4e0a\u3002"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}}}]);