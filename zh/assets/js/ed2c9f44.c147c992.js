"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[24056],{10035:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/rule-list-9a66ac71f764e2766fb7880c1811bae2.png"},28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>o});var s=i(96540);const r={},t=s.createContext(r);function c(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(t.Provider,{value:n},e.children)}},28489:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/postman-test-1bd985bc5b3dbe25e90f5c01d2ee1094.png"},35910:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/idea-http-test-proxy-fc83eddb6fa4a74cc790258ac670a8ec.png"},38383:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/idea-http-test-local-bd2ea4b9e8ab5d867edc120e3946e00c.png"},61680:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>a});var s=i(74848),r=i(28453);const t={title:"Spring Cloud\u5feb\u901f\u5f00\u59cb",description:"Spring Cloud\u5feb\u901f\u5f00\u59cb"},c=void 0,o={id:"quick-start/quick-start-springcloud",title:"Spring Cloud\u5feb\u901f\u5f00\u59cb",description:"Spring Cloud\u5feb\u901f\u5f00\u59cb",source:"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.5.0/quick-start/quick-start-springcloud.md",sourceDirName:"quick-start",slug:"/quick-start/quick-start-springcloud",permalink:"/zh/docs/2.5.0/quick-start/quick-start-springcloud",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/shenyu-website/edit/main/i18n/zh/docusaurus-plugin-content-docs/version-2.5.0/quick-start/quick-start-springcloud.md",tags:[],version:"2.5.0",frontMatter:{title:"Spring Cloud\u5feb\u901f\u5f00\u59cb",description:"Spring Cloud\u5feb\u901f\u5f00\u59cb"},sidebar:"tutorialSidebar",previous:{title:"Sofa\u5feb\u901f\u5f00\u59cb",permalink:"/zh/docs/2.5.0/quick-start/quick-start-sofa"},next:{title:"Tars\u5feb\u901f\u5f00\u59cb",permalink:"/zh/docs/2.5.0/quick-start/quick-start-tars"}},l={},a=[{value:"\u73af\u5883\u51c6\u5907",id:"\u73af\u5883\u51c6\u5907",level:2},{value:"\u8fd0\u884cshenyu-examples-springcloud",id:"\u8fd0\u884cshenyu-examples-springcloud",level:2},{value:"\u6d4b\u8bd5Http\u8bf7\u6c42",id:"\u6d4b\u8bd5http\u8bf7\u6c42",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["\u672c\u6587\u6863\u6f14\u793a\u5982\u4f55\u5c06",(0,s.jsx)(n.code,{children:"Spring Cloud"}),"\u670d\u52a1\u63a5\u5165\u5230",(0,s.jsx)(n.code,{children:"Apache ShenYu"}),"\u7f51\u5173\u3002\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u5de5\u7a0b\u4e0b\u627e\u5230\u672c\u6587\u6863\u7684",(0,s.jsx)(n.a,{href:"https://github.com/apache/shenyu/tree/v2.5.0/shenyu-examples/shenyu-examples-springcloud",children:"\u793a\u4f8b\u4ee3\u7801"})," \u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u73af\u5883\u51c6\u5907",children:"\u73af\u5883\u51c6\u5907"}),"\n",(0,s.jsxs)(n.p,{children:["\u8bf7\u53c2\u8003\u8fd0\u7ef4\u90e8\u7f72\u7684\u5185\u5bb9\uff0c\u9009\u62e9\u4e00\u79cd\u65b9\u5f0f\u542f\u52a8",(0,s.jsx)(n.code,{children:"shenyu-admin"}),"\u3002\u6bd4\u5982\uff0c\u901a\u8fc7 ",(0,s.jsx)(n.a,{href:"../deployment/deployment-local",children:"\u672c\u5730\u90e8\u7f72"})," \u542f\u52a8",(0,s.jsx)(n.code,{children:"Apache ShenYu"}),"\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u542f\u52a8\u6210\u529f\u540e\uff0c\u9700\u8981\u5728\u57fa\u7840\u914d\u7f6e",(0,s.jsx)(n.code,{children:"->"}),"\u63d2\u4ef6\u7ba1\u7406\u4e2d\uff0c\u628a",(0,s.jsx)(n.code,{children:"springCloud"})," \u63d2\u4ef6\u8bbe\u7f6e\u4e3a\u5f00\u542f\u3002"]}),"\n",(0,s.jsx)("img",{src:"/img/shenyu/quick-start/springcloud/springCloud-plugin-enable.png",width:"60%",height:"50%"}),"\n",(0,s.jsxs)(n.p,{children:["\u542f\u52a8\u7f51\u5173\uff0c\u5982\u679c\u662f\u901a\u8fc7\u6e90\u7801\u7684\u65b9\u5f0f\uff0c\u76f4\u63a5\u8fd0\u884c",(0,s.jsx)(n.code,{children:"shenyu-bootstrap"}),"\u4e2d\u7684",(0,s.jsx)(n.code,{children:"ShenyuBootstrapApplication"}),"\u3002"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u6ce8\u610f\uff0c\u5728\u542f\u52a8\u524d\uff0c\u8bf7\u786e\u4fdd\u7f51\u5173\u5df2\u7ecf\u5f15\u5165\u76f8\u5173\u4f9d\u8d56\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5f15\u5165\u7f51\u5173\u5bf9",(0,s.jsx)(n.code,{children:"Spring Cloud"}),"\u7684\u4ee3\u7406\u63d2\u4ef6\uff0c\u5e76\u6dfb\u52a0\u76f8\u5173\u6ce8\u518c\u4e2d\u5fc3\u4f9d\u8d56\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"\x3c!-- apache shenyu springCloud plugin start--\x3e\n               <dependency>\n                    <groupId>org.apache.shenyu</groupId>\n                    <artifactId>shenyu-spring-boot-starter-plugin-springcloud</artifactId>\n                    <version>${project.version}</version>\n                </dependency>\n\n                <dependency>\n                    <groupId>org.springframework.cloud</groupId>\n                    <artifactId>spring-cloud-commons</artifactId>\n                    <version>2.2.0.RELEASE</version>\n                </dependency>\n\n                <dependency>\n                    <groupId>org.apache.shenyu</groupId>\n                    <artifactId>shenyu-spring-boot-starter-plugin-httpclient</artifactId>\n                    <version>${project.version}</version>\n                </dependency>\n        \x3c!-- springCloud if you config register center is eureka please dependency end--\x3e\n                <dependency>\n                    <groupId>org.springframework.cloud</groupId>\n                    <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n                    <version>2.2.0.RELEASE</version>\n                </dependency>\n        \x3c!-- apache shenyu springCloud plugin end--\x3e\n\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"eureka"}),"\u914d\u7f6e\u4fe1\u606f\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"eureka:\n  client:\n    serviceUrl:\n      defaultZone: http://localhost:8761/eureka/\n  instance:\n    prefer-ip-address: true\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u7279\u522b\u6ce8\u610f: \u8bf7\u4fdd\u8bc1",(0,s.jsx)(n.code,{children:"springCloud"}),"\u6ce8\u518c\u4e2d\u5fc3\u670d\u52a1\u53d1\u73b0\u914d\u7f6e\u4e3a\u5f00\u542f"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u914d\u7f6e\u65b9\u5f0f"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"spring:\n  cloud:\n    discovery:\n      enabled: true\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4ee3\u7801\u65b9\u5f0f"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@SpringBootApplication\n@EnableDiscoveryClient\npublic class ShenyuBootstrapApplication {\n    \n    /**\n     * Main Entrance.\n     *\n     * @param args startup arguments\n     */\n    public static void main(final String[] args) {\n        SpringApplication.run(ShenyuBootstrapApplication.class, args);\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u542f\u52a8",(0,s.jsx)(n.code,{children:"shenyu-bootstrap"}),"\u9879\u76ee\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u8fd0\u884cshenyu-examples-springcloud",children:"\u8fd0\u884cshenyu-examples-springcloud"}),"\n",(0,s.jsxs)(n.p,{children:["\u793a\u4f8b\u9879\u76ee\u4e2d\u6211\u4eec\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"eureka"})," \u4f5c\u4e3a ",(0,s.jsx)(n.code,{children:"Spring Cloud"}),"\u7684\u6ce8\u518c\u4e2d\u5fc3\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u672c\u5730\u7684",(0,s.jsx)(n.code,{children:"eureka"}),"\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u793a\u4f8b\u4e2d\u63d0\u4f9b\u7684\u5e94\u7528\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4e0b\u8f7d ",(0,s.jsx)(n.a,{href:"https://github.com/apache/shenyu/tree/v2.5.0/shenyu-examples/shenyu-examples-eureka",children:"shenyu-examples-eureka"})," \u3001",(0,s.jsx)(n.a,{href:"https://github.com/apache/incubator-shenyu/tree/master/shenyu-examples/shenyu-examples-springcloud",children:"shenyu-examples-springcloud"})," ."]}),"\n",(0,s.jsxs)(n.p,{children:["\u542f\u52a8",(0,s.jsx)(n.code,{children:"eureka"}),"\u670d\u52a1\uff0c\u8fd0\u884c",(0,s.jsx)(n.code,{children:"org.apache.shenyu.examples.eureka.EurekaServerApplication"}),"main\u65b9\u6cd5\u542f\u52a8\u9879\u76ee\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u542f\u52a8",(0,s.jsx)(n.code,{children:"spring cloud"}),"\u670d\u52a1\uff0c\u8fd0\u884c",(0,s.jsx)(n.code,{children:"org.apache.shenyu.examples.springcloud.ShenyuTestSpringCloudApplication"}),"main\u65b9\u6cd5\u542f\u52a8\u9879\u76ee\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4ece",(0,s.jsx)(n.code,{children:"2.4.3"}),"\u5f00\u59cb\uff0c\u7528\u6237\u53ef\u4ee5\u4e0d\u914d\u7f6e",(0,s.jsx)(n.code,{children:"shenyu.client.springCloud.props.port"}),"\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u6210\u529f\u542f\u52a8\u4f1a\u6709\u5982\u4e0b\u65e5\u5fd7\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'2021-02-10 14:03:51.301  INFO 2860 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService \'applicationTaskExecutor\'\n2021-02-10 14:03:51.669  INFO 2860 --- [pool-1-thread-1] o.d.s.client.common.utils.RegisterUtils  : springCloud client register success: {"appName":"springCloud-test","context":"/springcloud","path":"/springcloud/order/save","pathDesc":"","rpcType":"springCloud","ruleName":"/springcloud/order/save","enabled":true} \n2021-02-10 14:03:51.676  INFO 2860 --- [pool-1-thread-1] o.d.s.client.common.utils.RegisterUtils  : springCloud client register success: {"appName":"springCloud-test","context":"/springcloud","path":"/springcloud/order/path/**","pathDesc":"","rpcType":"springCloud","ruleName":"/springcloud/order/path/**","enabled":true} \n2021-02-10 14:03:51.682  INFO 2860 --- [pool-1-thread-1] o.d.s.client.common.utils.RegisterUtils  : springCloud client register success: {"appName":"springCloud-test","context":"/springcloud","path":"/springcloud/order/findById","pathDesc":"","rpcType":"springCloud","ruleName":"/springcloud/order/findById","enabled":true} \n2021-02-10 14:03:51.688  INFO 2860 --- [pool-1-thread-1] o.d.s.client.common.utils.RegisterUtils  : springCloud client register success: {"appName":"springCloud-test","context":"/springcloud","path":"/springcloud/order/path/**/name","pathDesc":"","rpcType":"springCloud","ruleName":"/springcloud/order/path/**/name","enabled":true} \n2021-02-10 14:03:51.692  INFO 2860 --- [pool-1-thread-1] o.d.s.client.common.utils.RegisterUtils  : springCloud client register success: {"appName":"springCloud-test","context":"/springcloud","path":"/springcloud/test/**","pathDesc":"","rpcType":"springCloud","ruleName":"/springcloud/test/**","enabled":true} \n2021-02-10 14:03:52.806  WARN 2860 --- [           main] ockingLoadBalancerClientRibbonWarnLogger : You already have RibbonLoadBalancerClient on your classpath. It will be used by default. As Spring Cloud Ribbon is in maintenance mode. We recommend switching to BlockingLoadBalancerClient instead. In order to use it, set the value of `spring.cloud.loadbalancer.ribbon.enabled` to `false` or remove spring-cloud-starter-netflix-ribbon from your project.\n2021-02-10 14:03:52.848  WARN 2860 --- [           main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with default default cache. You can switch to using Caffeine cache, by adding it to the classpath.\n2021-02-10 14:03:52.921  INFO 2860 --- [           main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING\n2021-02-10 14:03:52.949  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1\n2021-02-10 14:03:53.006  INFO 2860 --- [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using JSON encoding codec LegacyJacksonJson\n2021-02-10 14:03:53.006  INFO 2860 --- [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using JSON decoding codec LegacyJacksonJson\n2021-02-10 14:03:53.110  INFO 2860 --- [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using XML encoding codec XStreamXml\n2021-02-10 14:03:53.110  INFO 2860 --- [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using XML decoding codec XStreamXml\n2021-02-10 14:03:53.263  INFO 2860 --- [           main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration\n2021-02-10 14:03:53.546  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false\n2021-02-10 14:03:53.546  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null\n2021-02-10 14:03:53.547  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false\n2021-02-10 14:03:53.547  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Application is null : false\n2021-02-10 14:03:53.547  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true\n2021-02-10 14:03:53.547  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true\n2021-02-10 14:03:53.547  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server\n2021-02-10 14:03:53.754  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : The response status is 200\n2021-02-10 14:03:53.756  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30\n2021-02-10 14:03:53.758  INFO 2860 --- [           main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4\n2021-02-10 14:03:53.761  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1612937033760 with initial instances count: 0\n2021-02-10 14:03:53.762  INFO 2860 --- [           main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application SPRINGCLOUD-TEST with eureka with status UP\n2021-02-10 14:03:53.763  INFO 2860 --- [           main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1612937033763, current=UP, previous=STARTING]\n2021-02-10 14:03:53.765  INFO 2860 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_SPRINGCLOUD-TEST/host.docker.internal:springCloud-test:8884: registering service...\n2021-02-10 14:03:53.805  INFO 2860 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8884 (http) with context path \'\'\n2021-02-10 14:03:53.807  INFO 2860 --- [           main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 8884\n2021-02-10 14:03:53.837  INFO 2860 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_SPRINGCLOUD-TEST/host.docker.internal:springCloud-test:8884 - registration status: 204\n2021-02-10 14:03:54.231  INFO 2860 --- [           main] o.d.s.e.s.ShenyuTestSpringCloudApplication : Started ShenyuTestSpringCloudApplication in 6.338 seconds (JVM running for 7.361) \n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u6d4b\u8bd5http\u8bf7\u6c42",children:"\u6d4b\u8bd5Http\u8bf7\u6c42"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"shenyu-examples-springcloud"}),"\u9879\u76ee\u6210\u529f\u542f\u52a8\u4e4b\u540e\u4f1a\u81ea\u52a8\u628a\u52a0 ",(0,s.jsx)(n.code,{children:"@ShenyuSpringCloudClient"})," \u6ce8\u89e3\u7684\u63a5\u53e3\u65b9\u6cd5\u6ce8\u518c\u5230\u7f51\u5173\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u6253\u5f00",(0,s.jsx)(n.code,{children:"\u63d2\u4ef6\u5217\u8868 -> rpc proxy -> springCloud"})," \u53ef\u4ee5\u770b\u5230\u63d2\u4ef6\u89c4\u5219\u914d\u7f6e\u5217\u8868\uff1a"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(10035).A+"",width:"1697",height:"397"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4e0b\u9762\u4f7f\u7528",(0,s.jsx)(n.code,{children:"postman"}),"\u6a21\u62df",(0,s.jsx)(n.code,{children:"http"}),"\u7684\u65b9\u5f0f\u6765\u8bf7\u6c42\u4f60\u7684",(0,s.jsx)(n.code,{children:"SpringCloud"}),"\u670d\u52a1\uff1a"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(28489).A+"",width:"1071",height:"371"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"IDEA HTTP Client"})," \u63d2\u4ef6\u6a21\u62df",(0,s.jsx)(n.code,{children:"http"}),"\u7684\u65b9\u5f0f\u6765\u8bf7\u6c42\u4f60\u7684",(0,s.jsx)(n.code,{children:"SpringCloud"}),"\u670d\u52a1[\u672c\u5730\u8bbf\u95ee\uff0c\u4e0d\u4f7f\u7528",(0,s.jsx)(n.code,{children:"shenyu"}),"\u4ee3\u7406]:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(38383).A+"",width:"1040",height:"662"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"IDEA HTTP Client"})," \u63d2\u4ef6\u6a21\u62df",(0,s.jsx)(n.code,{children:"http"}),"\u7684\u65b9\u5f0f\u6765\u8bf7\u6c42\u4f60\u7684",(0,s.jsx)(n.code,{children:"SpringCloud"}),"\u670d\u52a1[\u4f7f\u7528",(0,s.jsx)(n.code,{children:"shenyu"}),"\u4ee3\u7406]:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(35910).A+"",width:"1037",height:"645"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);