"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[83626],{20986(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>h,default:()=>o,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"user-guide/kubernetes-controller/config","title":"Kubernetes Controller Config","description":"Kubernetes Controller Config","source":"@site/versioned_docs/version-2.7.0.1/user-guide/kubernetes-controller/config.md","sourceDirName":"user-guide/kubernetes-controller","slug":"/user-guide/kubernetes-controller/config","permalink":"/docs/2.7.0.1/user-guide/kubernetes-controller/config","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.7.0.1/user-guide/kubernetes-controller/config.md","tags":[],"version":"2.7.0.1","frontMatter":{"title":"Kubernetes Controller Config","description":"Kubernetes Controller Config"},"sidebar":"tutorialSidebar","previous":{"title":"Build And Deploy Kubernetes Controller","permalink":"/docs/2.7.0.1/user-guide/kubernetes-controller/build-deploy"},"next":{"title":"The client registers the API documentation","permalink":"/docs/2.7.0.1/user-guide/api-doc/shenyu-annotation-apidoc"}}');var r=s(74848),d=s(28453);const i={title:"Kubernetes Controller Config",description:"Kubernetes Controller Config"},h=void 0,l={},c=[{value:"Enable HTTPS",id:"enable-https",level:2},{value:"Ingress configuration",id:"ingress-configuration",level:2},{value:"General",id:"general",level:3},{value:"Divide plugin (HTTP proxy)",id:"divide-plugin-http-proxy",level:3},{value:"Dubbo plugin",id:"dubbo-plugin",level:3},{value:"Motan plugin",id:"motan-plugin",level:3},{value:"SpringCloud plugin",id:"springcloud-plugin",level:3},{value:"WebSocket plugin",id:"websocket-plugin",level:3}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"This article introduces Kubernetes Controller configuration."}),"\n",(0,r.jsx)(n.h2,{id:"enable-https",children:"Enable HTTPS"}),"\n",(0,r.jsxs)(n.p,{children:["To enable HTTPS, you need to configure the ",(0,r.jsx)(n.code,{children:"sni protocol"})," in the ",(0,r.jsx)(n.code,{children:"application.yml"})," file of the gateway:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"shenyu:\n   netty:\n     http:\n       sni:\n         enabled: true\n         mod: k8s #k8s mode applies\n         defaultK8sSecretNamespace: shenyu-ingress #The namespace of the default secret resource\n         defaultK8sSecretName: default-cert #default secret resource name\n"})}),"\n",(0,r.jsx)(n.p,{children:"Among them, the default secret resource must be available, but it will not be actually used at present."}),"\n",(0,r.jsx)(n.h2,{id:"ingress-configuration",children:"Ingress configuration"}),"\n",(0,r.jsxs)(n.p,{children:["ShenYu Kubernetes Controller implements the K8s native Ingress standard, see ",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/services-networking/ingress/",children:"K8s official documentation"})," for the use of the native standard"]}),"\n",(0,r.jsx)(n.p,{children:"In addition, Apache ShenYu has expanded based on the Annotation field of Ingress, and the configuration is shown in the following tables:"}),"\n",(0,r.jsx)(n.h3,{id:"general",children:"General"}),"\n",(0,r.jsx)(n.p,{children:"| Name | Default | Required | Description |\n| --------------------------- | ------ | -------- | ----- --- |\n| kubernetes.io/ingress.class | | Yes | Fill in shenyu |"}),"\n",(0,r.jsx)(n.h3,{id:"divide-plugin-http-proxy",children:"Divide plugin (HTTP proxy)"}),"\n",(0,r.jsx)(n.p,{children:"| Name | Default | Required | Description |\n| ------------------------------------- | ------ | ------- - | ------------------------------------------------ ------------ |\n| shenyu.apache.org/loadbalancer | random | No | Load balancing algorithm, optional hash, random, roundRobin, leastActive, p2c, shortestResponse |\n| shenyu.apache.org/retry | 3 | No | Number of failed retries |\n| shenyu.apache.org/timeout | 3000 | No | Backend request timeout, in milliseconds |\n| shenyu.apache.org/header-max-size | 10240 | No | The maximum size of the request header, unit byte |\n| shenyu.apache.org/request-max-size | 102400 | No | Maximum request body size, unit byte |"}),"\n",(0,r.jsx)(n.h3,{id:"dubbo-plugin",children:"Dubbo plugin"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Required or not"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/loadbalancer"}),(0,r.jsx)(n.td,{children:"random"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Load balancing algorithm, optional hash, random, roundRobin, lastActive, p2c, shortestResponse"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/retry"}),(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Number of failed retries"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/timeout"}),(0,r.jsx)(n.td,{children:"3000"}),(0,r.jsx)(n.td,{children:"no"}),(0,r.jsx)(n.td,{children:"Backend request timeout in milliseconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/header-max-size"}),(0,r.jsx)(n.td,{children:"10240"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Maximum request header size in bytes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/request-max-size"}),(0,r.jsx)(n.td,{children:"102400"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Maximum request body size in bytes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/upstreams-protocol"}),(0,r.jsx)(n.td,{children:"dubbo://"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Specify the protocol protocol used by upstream"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-dubbo-enabled"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Determines if the dubbo plugin is enabled"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/zookeeper-register-address"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify zookeeper address"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-dubbo-app-name"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the metadata application name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-dubbo-path"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the request path for metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-dubbo-rpc-type"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the rpc type for metadata (dubbo, sofa, tars, springCloud, motan, grpc)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-dubbo-service-name"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the interface name for the metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-dubbo-method-name"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specifies the method name for metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-dubbo-rpc-expand"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Specifies the rpc expansion parameter (json object) for the metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-dubbo-parameter-types"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify parameter types for metadata"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"motan-plugin",children:"Motan plugin"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Required or not"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/loadbalancer"}),(0,r.jsx)(n.td,{children:"random"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Load balancing algorithm, optional hash, random, roundRobin, lastActive, p2c, shortestResponse"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/retry"}),(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Number of failed retries"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/timeout"}),(0,r.jsx)(n.td,{children:"3000"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Back-end request timeout in milliseconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/header-max-size"}),(0,r.jsx)(n.td,{children:"10240"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Maximum request header size in bytes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/request-max-size"}),(0,r.jsx)(n.td,{children:"102400"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Maximum request body size in bytes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-motan-enabled"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Determines if the motan plugin is enabled"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/zookeeper-register-address"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify zookeeper address"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-motan-app-name"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the metadata application name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-motan-path"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the request path for metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-motan-rpc-type"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the rpc type for metadata (dubbo, sofa, tars, springCloud, motan, grpc)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-motan-service-name"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the interface name for the metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-motan-method-name"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specifies the method name for metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-motan-rpc-expand"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Specifies the rpc extension parameter (json object) for the metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-motan-parameter-types"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify parameter types for metadata"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"springcloud-plugin",children:"SpringCloud plugin"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Required or not"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/loadbalancer"}),(0,r.jsx)(n.td,{children:"random"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Load balancing algorithm, optional hash, random, roundRobin, lastActive, p2c, shortestResponse"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/retry"}),(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Number of failed retries"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/timeout"}),(0,r.jsx)(n.td,{children:"3000"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Backend request timeout in milliseconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/header-max-size"}),(0,r.jsx)(n.td,{children:"10240"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Maximum request header size in bytes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/request-max-size"}),(0,r.jsx)(n.td,{children:"102400"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Maximum request body size in bytes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-spring-cloud-enabled"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Determines whether to start the springCloud plugin"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/zookeeper-register-address"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the zookeeper address"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-spring-cloud-app-name"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the metadata application name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-spring-cloud-path"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the request path for metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-spring-cloud-rpc-type"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the rpc type (dubbo, sofa, tars, springCloud, motan, grpc) of the metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-spring-cloud-service-name"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify the interface name for metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-spring-cloud-method-name"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specifies the method name for metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-spring-cloud-rpc-expand"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Specifies the rpc extension parameter (json object) for the metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/plugin-spring-cloud-parameter-types"}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Specify parameter types for metadata"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"websocket-plugin",children:"WebSocket plugin"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Required or not"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/loadbalancer"}),(0,r.jsx)(n.td,{children:"random"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Load balancing algorithm, optional hash, random, roundRobin, lastActive, p2c, shortestResponse"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/retry"}),(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Number of failed retries"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/timeout"}),(0,r.jsx)(n.td,{children:"3000"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Back-end request timeout in milliseconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/header-max-size"}),(0,r.jsx)(n.td,{children:"10240"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Maximum request header size in bytes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"shenyu.apache.org/request-max-size"}),(0,r.jsx)(n.td,{children:"102400"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Maximum size of request body in byte"})]})]})]})]})}function o(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453(e,n,s){s.d(n,{R:()=>i,x:()=>h});var t=s(96540);const r={},d=t.createContext(r);function i(e){const n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function h(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);