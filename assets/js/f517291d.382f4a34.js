"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[86680],{28453(e,n,i){i.d(n,{R:()=>s,x:()=>o});var t=i(96540);const l={},a=t.createContext(l);function s(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),t.createElement(a.Provider,{value:n},e.children)}},58193(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"admin/plugin-handle-explanation","title":"Plugin Handle Explanation","description":"plugin handle explanation","source":"@site/versioned_docs/version-2.3.0-Legacy/admin/plugin-handle-explanation.md","sourceDirName":"admin","slug":"/admin/plugin-handle-explanation","permalink":"/docs/2.3.0-Legacy/admin/plugin-handle-explanation","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.3.0-Legacy/admin/plugin-handle-explanation.md","tags":[],"version":"2.3.0-Legacy","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Plugin Handle Explanation","keywords":["plugin"],"description":"plugin handle explanation"},"sidebar":"tutorialSidebar","previous":{"title":"Dict Management","permalink":"/docs/2.3.0-Legacy/admin/dictionary-management"},"next":{"title":"Selector Detailed Explanation","permalink":"/docs/2.3.0-Legacy/admin/selector-and-rule"}}');var l=i(74848),a=i(28453);const s={sidebar_position:2,title:"Plugin Handle Explanation",keywords:["plugin"],description:"plugin handle explanation"},o=void 0,d={},r=[{value:"Explanation",id:"explanation",level:2},{value:"Table Design",id:"table-design",level:2},{value:"Tutorial",id:"tutorial",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"explanation",children:"Explanation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"In our Soul-Admin background, each plugin uses the Handle field to represent a different processing, and plugin processing is used to manage and edit custom processing fields in JSON."}),"\n",(0,l.jsx)(n.li,{children:"This feature is mainly used to support the plug-in handling template configuration"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"table-design",children:"Table Design"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"sql"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE IF NOT EXISTS `plugin_handle` (\n  `id` varchar(128) NOT NULL,\n  `plugin_id` varchar(128) NOT NULL COMMENT 'plugin id',\n  `field` varchar(100) NOT NULL COMMENT 'field',\n  `label` varchar(100) DEFAULT NULL COMMENT 'label',\n  `data_type` smallint(6) NOT NULL DEFAULT '1' COMMENT 'data type 1 number 2 string 3 select box',\n  `type` smallint(6) NULL COMMENT 'type, 1 means selector, 2 means rule',\n  `sort` int(4)  NULL COMMENT 'sort',\n  `ext_obj` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'extra configuration (json format data)',\n  `date_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'create time',\n  `date_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'update time',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `plugin_id_field_type` (`plugin_id`,`field`,`type`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;\n"})}),"\n",(0,l.jsx)(n.h2,{id:"tutorial",children:"Tutorial"}),"\n",(0,l.jsxs)(n.p,{children:["eg. When we developed the ",(0,l.jsx)(n.code,{children:"springCloud"})," plugin, the rule table needed to store some configuration into the handle field,\nConfigure the corresponding entity class as follows:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"    public class SpringCloudRuleHandle implements RuleHandle {\n    \n        /**\n         * this remote uri path.\n         */\n        private String path;\n    \n        /**\n         * timeout is required.\n         */\n        private long timeout = Constants.TIME_OUT;    \n    }\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"step1."})," We can go directly to the plug-in management link  ",(0,l.jsx)(n.code,{children:"http://localhost:9095/#/system/plugin"})," Click Edit Plugin for processing\n",(0,l.jsx)(n.img,{src:"https://yu199195.github.io/images/soul/plugin-manager.png",alt:""})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"step2."})," Add a string type field path and a numeric type TIMEOUT"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://yu199195.github.io/images/soul/add-plugin-handle.png",alt:""})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"step3."})," Finally, you can enter path, TIMEOUT and commit to the handle field when you add a rule in the plugin rule configuration page"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://yu199195.github.io/images/soul/springcloud-rule-handle.png",alt:""})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.em,{children:["Note: If data_type is configured to be ",(0,l.jsx)(n.code,{children:"3"})," ",(0,l.jsx)(n.code,{children:"selection box"}),", the input field drop-down selection on the new rule page is displayed by going to the ",(0,l.jsx)(n.a,{href:"/docs/2.3.0-Legacy/admin/dictionary-management",children:"soul_dict\uff09"})," table to find all the options available"]})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The Sentinel plug-in, for example, is shown below:"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://yu199195.github.io/images/soul/sentinel-rule-handle.png",alt:""})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);