"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[21529],{28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>t});var l=i(96540);const r={},s=l.createContext(r);function c(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),l.createElement(s.Provider,{value:n},e.children)}},76423:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>o});var l=i(74848),r=i(28453);const s={title:"Resilience4j Plugin",keywords:["Resilience4j"],description:"resilience4j plugin"},c=void 0,t={id:"plugin-center/fault-tolerance/resilience4j-plugin",title:"Resilience4j Plugin",description:"resilience4j plugin",source:"@site/versioned_docs/version-2.5.0/plugin-center/fault-tolerance/resilience4j-plugin.md",sourceDirName:"plugin-center/fault-tolerance",slug:"/plugin-center/fault-tolerance/resilience4j-plugin",permalink:"/docs/2.5.0/plugin-center/fault-tolerance/resilience4j-plugin",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/shenyu-website/edit/main/versioned_docs/version-2.5.0/plugin-center/fault-tolerance/resilience4j-plugin.md",tags:[],version:"2.5.0",frontMatter:{title:"Resilience4j Plugin",keywords:["Resilience4j"],description:"resilience4j plugin"},sidebar:"tutorialSidebar",previous:{title:"RateLimiter Plugin",permalink:"/docs/2.5.0/plugin-center/fault-tolerance/rate-limiter-plugin"},next:{title:"Sentinel Plugin",permalink:"/docs/2.5.0/plugin-center/fault-tolerance/sentinel-plugin"}},d={},o=[{value:"Description",id:"description",level:2},{value:"Plugin Setting",id:"plugin-setting",level:2},{value:"Add resilience4j plugin dependency",id:"add-resilience4j-plugin-dependency",level:2},{value:"Resilience4j Config",id:"resilience4j-config",level:2},{value:"Selector Config",id:"selector-config",level:4},{value:"Rule Config",id:"rule-config",level:4}];function a(e){const n={a:"a",code:"code",h2:"h2",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Resilience4j"})," is one of the options that supports flow control and circuit breaking."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Resilience4j"})," supports flow control and circuit breaking functions for gateway."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"plugin-setting",children:"Plugin Setting"}),"\n",(0,l.jsxs)(n.p,{children:["Select a mode to start shenyu-admin. For details, see  deployment. For example, with ",(0,l.jsx)(n.a,{href:"../../deployment/deployment-local",children:"Local Deployment"})," starts the ",(0,l.jsx)(n.code,{children:"Apache ShenYu"})," background management system."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"In BasicConfig --\x3e Plugin --\x3e resilience4j, set to enable."}),"\n",(0,l.jsx)(n.li,{children:"If the user don't use, please disable the plugin in the background."}),"\n"]}),"\n",(0,l.jsx)("img",{src:"/img/shenyu/plugin/resilience4j/resilience4j-plugin-en-1.png",width:"80%",height:"80%"}),"\n",(0,l.jsx)(n.h2,{id:"add-resilience4j-plugin-dependency",children:"Add resilience4j plugin dependency"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Add ",(0,l.jsx)(n.code,{children:"resilience4j"})," dependency in the ",(0,l.jsx)(n.code,{children:"pom.xml"})," file of the gateway."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:"        \x3c!-- apache shenyu resilience4j plugin start--\x3e\n        <dependency>\n            <groupId>org.apache.shenyu</groupId>\n            <artifactId>shenyu-spring-boot-starter-plugin-resilience4j</artifactId>\n            <version>${project.version}</version>\n        </dependency>\n        \x3c!-- apache shenyu resilience4j plugin end--\x3e\n"})}),"\n",(0,l.jsx)(n.h2,{id:"resilience4j-config",children:"Resilience4j Config"}),"\n",(0,l.jsxs)(n.p,{children:["For more information on selectors and rules configuration, see ",(0,l.jsx)(n.a,{href:"../../user-guide/admin-usage/selector-and-rule",children:"Selector And Rule Config"})," , only some of the fields are covered here."]}),"\n",(0,l.jsx)(n.h4,{id:"selector-config",children:"Selector Config"}),"\n",(0,l.jsx)(n.p,{children:"It is used to filter traffic for the first time and does not require handle fields."}),"\n",(0,l.jsx)("img",{src:"/img/shenyu/plugin/resilience4j/resilience4j-plugin-en-2.png",width:"80%",height:"80%"}),"\n",(0,l.jsx)(n.h4,{id:"rule-config",children:"Rule Config"}),"\n",(0,l.jsx)(n.p,{children:"For the final filtering of traffic, there is a rule handler logic."}),"\n",(0,l.jsx)("img",{src:"/img/shenyu/plugin/resilience4j/resilience4j-plugin-en-3.png",width:"80%",height:"80%"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Resilience4j Processing Details"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"limitForPeriod"})," \uff1aConfigures the number of permissions available during one limit refresh period,default value:",(0,l.jsx)(n.code,{children:"50"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"limitRefreshPeriod"})," \uff1aConfigures the period of a limit refresh. After each period the rate limiter sets its permissions count back to the limitForPeriod value,default value:",(0,l.jsx)(n.code,{children:"500"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"timeoutDurationRate"})," \uff1aConfigures wait time(ms) a thread waits for a permission,default value:",(0,l.jsx)(n.code,{children:"5000"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"circuitEnable"})," \uff1aConfigures circuitBreaker enable, ",(0,l.jsx)(n.code,{children:"0"}),":OFF"," ,",(0,l.jsx)(n.code,{children:"1"}),":ON"," ,default value:",(0,l.jsx)(n.code,{children:"0"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"failureRateThreshold"})," \uff1aConfigures the failure rate threshold in percentage,When the failure rate is equal or greater than the threshold the CircuitBreaker transitions to open and starts short-circuiting calls,default value:",(0,l.jsx)(n.code,{children:"50"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"fallbackUri"})," \uff1aConfigures the fall back uri."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"minimumNumberOfCalls"})," \uff1aConfigures the minimum number of calls which are required (per sliding window period) before the CircuitBreaker can calculate the error rate or slow call rate,default value:",(0,l.jsx)(n.code,{children:"100"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"bufferSizeInHalfOpen"}),"\uff1aConfigures the number of permitted calls when the CircuitBreaker is half open,default value:",(0,l.jsx)(n.code,{children:"10"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"slidingWindowSize"})," \uff1aConfigures the size of the sliding window which is used to record the outcome of calls when the CircuitBreaker is closed,default value:",(0,l.jsx)(n.code,{children:"100"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"slidingWindowType"})," \uff1aConfigures the type of the sliding window which is used to record the outcome of calls when the CircuitBreaker is closed,\nSliding window can either be ",(0,l.jsx)(n.code,{children:"0"}),":count-based"," or ",(0,l.jsx)(n.code,{children:"1"}),":time-based",".,default value:",(0,l.jsx)(n.code,{children:"0"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"timeoutDuration"})," \uff1aConfigures request CircuitBreaker timeout(ms),default value:",(0,l.jsx)(n.code,{children:"30000"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"waitIntervalInOpen"})," \uff1aConfigures the circuitBreaker time(ms) of duration,default value:",(0,l.jsx)(n.code,{children:"10"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"automaticTransitionFromOpenToHalfOpenEnabled"})," \uff1aConfigures automatically transition from open state to half open state,",(0,l.jsx)(n.code,{children:"true"}),":ON",", ",(0,l.jsx)(n.code,{children:"false"}),":OFF",", default value:",(0,l.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);