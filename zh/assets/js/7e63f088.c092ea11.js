"use strict";(globalThis.webpackChunkshenyu_website=globalThis.webpackChunkshenyu_website||[]).push([[17300],{25560(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"user-guide/kubernetes-controller/build-deploy","title":"\u6784\u5efa\u548c\u90e8\u7f72 Kubernetes \u63a7\u5236\u5668","description":"\u6784\u5efa\u548c\u90e8\u7f72 Kubernetes \u63a7\u5236\u5668","source":"@site/i18n/zh/docusaurus-plugin-content-docs/version-2.6.1/user-guide/kubernetes-controller/build-deploy.md","sourceDirName":"user-guide/kubernetes-controller","slug":"/user-guide/kubernetes-controller/build-deploy","permalink":"/zh/docs/2.6.1/user-guide/kubernetes-controller/build-deploy","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/shenyu-website/edit/main/i18n/zh/docusaurus-plugin-content-docs/version-2.6.1/user-guide/kubernetes-controller/build-deploy.md","tags":[],"version":"2.6.1","frontMatter":{"title":"\u6784\u5efa\u548c\u90e8\u7f72 Kubernetes \u63a7\u5236\u5668","description":"\u6784\u5efa\u548c\u90e8\u7f72 Kubernetes \u63a7\u5236\u5668"},"sidebar":"tutorialSidebar","previous":{"title":"Websocket\u670d\u52a1\u63a5\u5165","permalink":"/zh/docs/2.6.1/user-guide/proxy/websocket-proxy"},"next":{"title":"Kubernetes \u63a7\u5236\u5668\u914d\u7f6e","permalink":"/zh/docs/2.6.1/user-guide/kubernetes-controller/config"}}');var t=s(74848),o=s(28453);const i={title:"\u6784\u5efa\u548c\u90e8\u7f72 Kubernetes \u63a7\u5236\u5668",description:"\u6784\u5efa\u548c\u90e8\u7f72 Kubernetes \u63a7\u5236\u5668"},a=void 0,c={},l=[{value:"\u6784\u5efa",id:"\u6784\u5efa",level:2},{value:"\u90e8\u7f72",id:"\u90e8\u7f72",level:2}];function u(e){const n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\u672c\u7bc7\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 ShenYu Kubernetes Controller\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u6784\u5efa",children:"\u6784\u5efa"}),"\n",(0,t.jsxs)(n.p,{children:["\u5efa\u8bae\u53c2\u8003",(0,t.jsx)(n.a,{href:"/zh/docs/2.6.1/deployment/deployment-custom",children:"\u81ea\u5b9a\u4e49\u90e8\u7f72"}),"\u6784\u5efa\u81ea\u5b9a\u4e49\u7f51\u5173\uff0c\u5728\u7f51\u5173\u7684 Maven \u4f9d\u8d56\u4e2d\u52a0\u5165 shenyu-kubernetes-controller \u7684\u4f9d\u8d56\uff0c\u7f51\u5173\u5373\u53ef\u96c6\u6210 kubernetes \u63a7\u5236\u5668\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"        <dependency>\n            <groupId>org.apache.shenyu</groupId>\n            <artifactId>shenyu-spring-boot-starter-k8s</artifactId>\n            <version>${project.version}</version>\n        </dependency>\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5b98\u65b9\u6784\u5efa\u7684 docker \u955c\u50cf\uff08TODO\uff0c\u672a\u5b8c\u6210\uff09"}),"\n",(0,t.jsx)(n.h2,{id:"\u90e8\u7f72",children:"\u90e8\u7f72"}),"\n",(0,t.jsx)(n.p,{children:"K8s \u90e8\u7f72\u6587\u4ef6\u53ef\u53c2\u8003\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Namespace\nmetadata:\n  name: shenyu-ingress\n---\napiVersion: v1\nautomountServiceAccountToken: true\nkind: ServiceAccount\nmetadata:\n  name: shenyu-ingress-controller\n  namespace: shenyu-ingress\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: shenyu-ingress-controller\n  namespace: shenyu-ingress\n  labels:\n    app: shenyu-ingress-controller\n    all: shenyu-ingress-controller\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: shenyu-ingress-controller\n  template:\n    metadata:\n      labels:\n        app: shenyu-ingress-controller\n    spec:\n      containers:\n      - name: shenyu-ingress-controller\n        image: apache/shenyu-integrated-test-k8s-ingress:latest\n        ports:\n        - containerPort: 9195\n        imagePullPolicy: IfNotPresent\n      serviceAccountName: shenyu-ingress-controller\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: shenyu-ingress-controller\n  namespace: shenyu-ingress\nspec:\n  selector:\n    app: shenyu-ingress-controller\n  type: NodePort\n  ports:\n    - port: 9195\n      targetPort: 9195\n      nodePort: 30095\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: shenyu-ingress-controller\nrules:\n- apiGroups:\n  - ""\n  resources:\n  - namespaces\n  - services\n  - endpoints\n  - secrets\n  - pods\n  verbs:\n  - get\n  - list\n  - watch\n- apiGroups:\n  - networking.k8s.io\n  resources:\n  - ingresses\n  verbs:\n  - get\n  - list\n  - watch\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: shenyu-ingress-controller\n  namespace: shenyu-ingress\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: shenyu-ingress-controller\nsubjects:\n- kind: ServiceAccount\n  name: shenyu-ingress-controller\n  namespace: shenyu-ingress\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u5176\u4e2d\uff0cService \u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u6539\u6210 ",(0,t.jsx)(n.code,{children:"LoadBalancer"})," \u7c7b\u578b\u3002"]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},28453(e,n,s){s.d(n,{R:()=>i,x:()=>a});var r=s(96540);const t={},o=r.createContext(t);function i(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);