"use strict";(self.webpackChunkshenyu_website=self.webpackChunkshenyu_website||[]).push([[52293],{15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>m});var a=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),g=r,m=u["".concat(s,".").concat(g)]||u[g]||d[g]||i;return n?a.createElement(m,o(o({ref:t},p),{},{components:n})):a.createElement(m,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},66657:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var a=n(58168),r=(n(96540),n(15680));const i={title:"Pull the swagger registration API document",keywords:["swagger api Interface Document Aggregation"],description:"Remotely pull swagger registration API documentation"},o=void 0,l={unversionedId:"user-guide/api-doc/swagger-apidoc",id:"user-guide/api-doc/swagger-apidoc",isDocsHomePage:!1,title:"Pull the swagger registration API document",description:"Remotely pull swagger registration API documentation",source:"@site/docs/user-guide/api-doc/swagger-apidoc.md",sourceDirName:"user-guide/api-doc",slug:"/user-guide/api-doc/swagger-apidoc",permalink:"/docs/next/user-guide/api-doc/swagger-apidoc",editUrl:"https://github.com/apache/shenyu-website/edit/main/docs/user-guide/api-doc/swagger-apidoc.md",version:"current",frontMatter:{title:"Pull the swagger registration API document",keywords:["swagger api Interface Document Aggregation"],description:"Remotely pull swagger registration API documentation"},sidebar:"tutorialSidebar",previous:{title:"The client registers the API documentation",permalink:"/docs/next/user-guide/api-doc/shenyu-annotation-apidoc"},next:{title:"ContextPath Plugin",permalink:"/docs/next/plugin-center/http-process/contextpath-plugin"}},s=[{value:"1. Description",id:"1-description",children:[]},{value:"2. Environment Preparation",id:"2-environment-preparation",children:[{value:"2.1 Run <code>shenyu-admin</code>",id:"21-run-shenyu-admin",children:[]},{value:"2.2 Enable the global switch for remotely pulling swagger documents.",id:"22-enable-the-global-switch-for-remotely-pulling-swagger-documents",children:[]}]},{value:"3. Run the Sample Project",id:"3-run-the-sample-project",children:[]},{value:"4. Demonstration Effect",id:"4-demonstration-effect",children:[{value:"4.1 List of API Documents",id:"41-list-of-api-documents",children:[]},{value:"4.2 API Details Effect",id:"42-api-details-effect",children:[]}]},{value:"5. How to Automatically Update API Documentation",id:"5-how-to-automatically-update-api-documentation",children:[{value:"5.1 Restart Project",id:"51-restart-project",children:[]},{value:"5.2 Modify the startup time of the proxy plugin selector.",id:"52-modify-the-startup-time-of-the-proxy-plugin-selector",children:[]}]}],c={toc:s},p="wrapper";function u(e){let{components:t,...i}=e;return(0,r.yg)(p,(0,a.A)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"This article introduces how to aggregate the ",(0,r.yg)("inlineCode",{parentName:"p"},"Swagger API documentation")," of each backend microservice to the ",(0,r.yg)("inlineCode",{parentName:"p"},"Apache ShenYu")," gateway management system."),(0,r.yg)("h2",{id:"1-description"},"1. Description"),(0,r.yg)("p",null,"Remotely pull swagger documents, currently only supports swagger2.0, and only supports Divide and SpringCloud proxy plug-ins."),(0,r.yg)("h2",{id:"2-environment-preparation"},"2. Environment Preparation"),(0,r.yg)("h3",{id:"21-run-shenyu-admin"},"2.1 Run ",(0,r.yg)("inlineCode",{parentName:"h3"},"shenyu-admin")),(0,r.yg)("p",null,"Please refer to the ",(0,r.yg)("inlineCode",{parentName:"p"},"deployment")," document, choose a way to run ",(0,r.yg)("inlineCode",{parentName:"p"},"shenyu-admin"),"."),(0,r.yg)("h3",{id:"22-enable-the-global-switch-for-remotely-pulling-swagger-documents"},"2.2 Enable the global switch for remotely pulling swagger documents."),(0,r.yg)("p",null,"It is enabled by default. In the ",(0,r.yg)("inlineCode",{parentName:"p"},"Apache ShenYu")," gateway management system --\x3e BasicConfig --\x3e Dictionary, find the data whose DictionaryType is ",(0,r.yg)("inlineCode",{parentName:"p"},"apidoc"),", and modify the dictionary value: ",(0,r.yg)("inlineCode",{parentName:"p"},"true"),"."),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"\u3010Notice\u3011DictionaryValue: ",(0,r.yg)("inlineCode",{parentName:"p"},"true")," means the switch is on, ",(0,r.yg)("inlineCode",{parentName:"p"},"false")," means it is off. If it is closed, ",(0,r.yg)("inlineCode",{parentName:"p"},"shenyu-admin")," will not automatically pull the swagger documents of each microservice.")),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"apidoc-dictionary-en",src:n(27764).A})),(0,r.yg)("h2",{id:"3-run-the-sample-project"},"3. Run the Sample Project"),(0,r.yg)("p",null,"3.1. Download ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/apache/shenyu/tree/master/shenyu-examples/shenyu-examples-http-swagger2"},"shenyu-examples-http-swagger2")),(0,r.yg)("p",null,"3.2. Run ",(0,r.yg)("inlineCode",{parentName:"p"},"org.apache.shenyu.examples.http.ShenyuTestSwaggerApplication")," main method to start the project."),(0,r.yg)("p",null,"The examples project will synchronize the service startup information to ",(0,r.yg)("inlineCode",{parentName:"p"},"shenyu-admin")," through the Shenyu client annotation (such as ",(0,r.yg)("inlineCode",{parentName:"p"},"@ShenyuSpringMvcClient"),") according to the address configured by ",(0,r.yg)("inlineCode",{parentName:"p"},"shenyu.register.serverLists"),", and then trigger ",(0,r.yg)("inlineCode",{parentName:"p"},"shenyu-admin")," to remotely pull the swagger document And complete the analysis, and finally aggregate to produce a new API document."),(0,r.yg)("h2",{id:"4-demonstration-effect"},"4. Demonstration Effect"),(0,r.yg)("h3",{id:"41-list-of-api-documents"},"4.1 List of API Documents"),(0,r.yg)("p",null,"In ",(0,r.yg)("inlineCode",{parentName:"p"},"Apache ShenYu")," Gateway Management System --\x3e Document --\x3e API Document, you can see the aggregated API documents."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"apidoc-swagger-list-en",src:n(89100).A})),(0,r.yg)("h3",{id:"42-api-details-effect"},"4.2 API Details Effect"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"apidoc-detail-en",src:n(97921).A})),(0,r.yg)("h2",{id:"5-how-to-automatically-update-api-documentation"},"5. How to Automatically Update API Documentation"),(0,r.yg)("h3",{id:"51-restart-project"},"5.1 Restart Project"),(0,r.yg)("p",null,"As in the example above, an automatic update of the API docs is triggered by starting the project."),(0,r.yg)("h3",{id:"52-modify-the-startup-time-of-the-proxy-plugin-selector"},"5.2 Modify the startup time of the proxy plugin selector."),(0,r.yg)("p",null,"In the PlugiList --\x3e Proxy --\x3e selector, find the target service, and then modify the startup time."),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Note: The startup time of the new setting must not be earlier than the original startup time, otherwise the API document will not be automatically pulled and refreshed.")),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"app-proxy-startuptime-en",src:n(46930).A})))}u.isMDXComponent=!0},97921:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/apidoc-detail-en-828985abbfa6d2b36b87f819ed3f39ae.png"},27764:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/apidoc-dictionary-en-c62f7e2be1763f8bee65a1245556327b.png"},89100:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/apidoc-swagger-list-en-1eb2c525a7c0e2ab6a955d91b42982c3.png"},46930:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/app-proxy-startuptime-en-1696ab1f3f4b39a079d04e9cafb45bf2.png"}}]);